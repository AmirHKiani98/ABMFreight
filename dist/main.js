/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={4428:(t,e,n)=>{"use strict";function r(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var i,o;n.d(e,{TS:()=>s,w6:()=>u}),1===(i=r).length&&(o=i,i=function(t,e){return r(o(t),e)});var a=Array.prototype;function s(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n}function u(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}a.slice,a.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2)},8227:(t,e,n)=>{"use strict";function r(){return new i}function i(){this.reset()}n.d(e,{Z:()=>r}),i.prototype={constructor:i,reset:function(){this.s=this.t=0},add:function(t){a(o,t,this.t),a(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new i;function a(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}},1593:(t,e,n)=>{"use strict";n.d(e,{Y1:()=>i,Og:()=>o,j9:()=>a,T5:()=>s,s0:()=>u,T:()=>c,iJ:()=>f});var r=n(5350);function i(t){return[(0,r.fv)(t[1],t[0]),(0,r.ZR)(t[2])]}function o(t){var e=t[0],n=t[1],i=(0,r.mC)(n);return[i*(0,r.mC)(e),i*(0,r.O$)(e),(0,r.O$)(n)]}function a(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function s(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function u(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function c(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function f(t){var e=(0,r._b)(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}},9766:(t,e,n)=>{"use strict";n.d(e,{m:()=>s,Z:()=>c});var r=n(1593);function i(t){return function(){return t}}var o=n(5350),a=n(1613);function s(t,e,n,i,a,s){if(n){var c=(0,o.mC)(e),f=(0,o.O$)(e),l=i*n;null==a?(a=e+i*o.BZ,s=e-l/2):(a=u(c,a),s=u(c,s),(i>0?a<s:a>s)&&(a+=i*o.BZ));for(var h,d=a;i>0?d>s:d<s;d-=l)h=(0,r.Y1)([c,-f*(0,o.mC)(d),-f*(0,o.O$)(d)]),t.point(h[0],h[1])}}function u(t,e){(e=(0,r.Og)(e))[0]-=t,(0,r.iJ)(e);var n=(0,o.Kh)(-e[1]);return((-e[2]<0?-n:n)+o.BZ-o.Ho)%o.BZ}function c(){var t,e,n=i([0,0]),r=i(90),u=i(6),c={point:function(n,r){t.push(n=e(n,r)),n[0]*=o.RW,n[1]*=o.RW}};function f(){var i=n.apply(this,arguments),f=r.apply(this,arguments)*o.uR,l=u.apply(this,arguments)*o.uR;return t=[],e=(0,a.I)(-i[0]*o.uR,-i[1]*o.uR,0).invert,s(c,f,l,1),i={type:"Polygon",coordinates:[t]},t=e=null,i}return f.center=function(t){return arguments.length?(n="function"==typeof t?t:i([+t[0],+t[1]]),f):n},f.radius=function(t){return arguments.length?(r="function"==typeof t?t:i(+t),f):r},f.precision=function(t){return arguments.length?(u="function"==typeof t?t:i(+t),f):u},f}},4969:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(1778),i=n(5350);const o=(0,r.Z)((function(){return!0}),(function(t){var e,n=NaN,r=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,s){var u=a>0?i.pi:-i.pi,c=(0,i.Wn)(a-n);(0,i.Wn)(c-i.pi)<i.Ho?(t.point(n,r=(r+s)/2>0?i.ou:-i.ou),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(a,r),e=0):o!==u&&c>=i.pi&&((0,i.Wn)(n-o)<i.Ho&&(n-=o*i.Ho),(0,i.Wn)(a-u)<i.Ho&&(a-=u*i.Ho),r=function(t,e,n,r){var o,a,s=(0,i.O$)(t-n);return(0,i.Wn)(s)>i.Ho?(0,i.z4)(((0,i.O$)(e)*(a=(0,i.mC)(r))*(0,i.O$)(n)-(0,i.O$)(r)*(o=(0,i.mC)(e))*(0,i.O$)(t))/(o*a*s)):(e+r)/2}(n,r,a,s),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=a,r=s),o=u},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var o;if(null==t)o=n*i.ou,r.point(-i.pi,o),r.point(0,o),r.point(i.pi,o),r.point(i.pi,0),r.point(i.pi,-o),r.point(0,-o),r.point(-i.pi,-o),r.point(-i.pi,0),r.point(-i.pi,o);else if((0,i.Wn)(t[0]-e[0])>i.Ho){var a=t[0]<e[0]?i.pi:-i.pi;o=n*a/2,r.point(-a,o),r.point(0,o),r.point(a,o)}else r.point(e[0],e[1])}),[-i.pi,-i.ou])},8627:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=n(1344);function i(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:r.Z,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}},3880:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var r=n(1593),i=n(9766),o=n(5350),a=n(5228),s=n(1778);function u(t){var e=(0,o.mC)(t),n=6*o.uR,u=e>0,c=(0,o.Wn)(e)>o.Ho;function f(t,n){return(0,o.mC)(t)*(0,o.mC)(n)>e}function l(t,n,i){var a=(0,r.Og)(t),s=(0,r.Og)(n),u=[1,0,0],c=(0,r.T5)(a,s),f=(0,r.j9)(c,c),l=c[0],h=f-l*l;if(!h)return!i&&t;var d=e*f/h,p=-e*l/h,g=(0,r.T5)(u,c),m=(0,r.T)(u,d),v=(0,r.T)(c,p);(0,r.s0)(m,v);var y=g,w=(0,r.j9)(m,y),b=(0,r.j9)(y,y),x=w*w-b*((0,r.j9)(m,m)-1);if(!(x<0)){var E=(0,o._b)(x),S=(0,r.T)(y,(-w-E)/b);if((0,r.s0)(S,m),S=(0,r.Y1)(S),!i)return S;var _,T=t[0],I=n[0],C=t[1],A=n[1];I<T&&(_=T,T=I,I=_);var R=I-T,F=(0,o.Wn)(R-o.pi)<o.Ho;if(!F&&A<C&&(_=C,C=A,A=_),F||R<o.Ho?F?C+A>0^S[1]<((0,o.Wn)(S[0]-T)<o.Ho?C:A):C<=S[1]&&S[1]<=A:R>o.pi^(T<=S[0]&&S[0]<=I)){var P=(0,r.T)(y,(-w+E)/b);return(0,r.s0)(P,m),[S,(0,r.Y1)(P)]}}}function h(e,n){var r=u?t:o.pi-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}return(0,s.Z)(f,(function(t){var e,n,r,i,s;return{lineStart:function(){i=r=!1,s=1},point:function(d,p){var g,m=[d,p],v=f(d,p),y=u?v?0:h(d,p):v?h(d+(d<0?o.pi:-o.pi),p):0;if(!e&&(i=r=v)&&t.lineStart(),v!==r&&(!(g=l(e,m))||(0,a.Z)(e,g)||(0,a.Z)(m,g))&&(m[2]=1),v!==r)s=0,v?(t.lineStart(),g=l(m,e),t.point(g[0],g[1])):(g=l(e,m),t.point(g[0],g[1],2),t.lineEnd()),e=g;else if(c&&e&&u^v){var w;y&n||!(w=l(m,e,!0))||(s=0,u?(t.lineStart(),t.point(w[0][0],w[0][1]),t.point(w[1][0],w[1][1]),t.lineEnd()):(t.point(w[1][0],w[1][1]),t.lineEnd(),t.lineStart(),t.point(w[0][0],w[0][1],3)))}!v||e&&(0,a.Z)(e,m)||t.point(m[0],m[1]),e=m,r=v,n=y},lineEnd:function(){r&&t.lineEnd(),e=null},clean:function(){return s|(i&&r)<<1}}}),(function(e,r,o,a){(0,i.m)(a,t,n,o,e,r)}),u?[0,-t]:[-o.pi,t-o.pi])}},1778:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var r=n(8627),i=n(8684),o=n(5350),a=n(2629),s=n(4428);function u(t,e,n,o){return function(u){var l,h,d,p=e(u),g=(0,r.Z)(),m=e(g),v=!1,y={point:w,lineStart:x,lineEnd:E,polygonStart:function(){y.point=S,y.lineStart=_,y.lineEnd=T,h=[],l=[]},polygonEnd:function(){y.point=w,y.lineStart=x,y.lineEnd=E,h=(0,s.TS)(h);var t=(0,a.Z)(l,o);h.length?(v||(u.polygonStart(),v=!0),(0,i.Z)(h,f,t,n,u)):t&&(v||(u.polygonStart(),v=!0),u.lineStart(),n(null,null,1,u),u.lineEnd()),v&&(u.polygonEnd(),v=!1),h=l=null},sphere:function(){u.polygonStart(),u.lineStart(),n(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function w(e,n){t(e,n)&&u.point(e,n)}function b(t,e){p.point(t,e)}function x(){y.point=b,p.lineStart()}function E(){y.point=w,p.lineEnd()}function S(t,e){d.push([t,e]),m.point(t,e)}function _(){m.lineStart(),d=[]}function T(){S(d[0][0],d[0][1]),m.lineEnd();var t,e,n,r,i=m.clean(),o=g.result(),a=o.length;if(d.pop(),l.push(d),d=null,a)if(1&i){if((e=(n=o[0]).length-1)>0){for(v||(u.polygonStart(),v=!0),u.lineStart(),t=0;t<e;++t)u.point((r=n[t])[0],r[1]);u.lineEnd()}}else a>1&&2&i&&o.push(o.pop().concat(o.shift())),h.push(o.filter(c))}return y}}function c(t){return t.length>1}function f(t,e){return((t=t.x)[0]<0?t[1]-o.ou-o.Ho:o.ou-t[1])-((e=e.x)[0]<0?e[1]-o.ou-o.Ho:o.ou-e[1])}},3825:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var r=n(5350),i=n(8627),o=n(8684),a=n(4428),s=1e9,u=-s;function c(t,e,n,c){function f(r,i){return t<=r&&r<=n&&e<=i&&i<=c}function l(r,i,o,a){var s=0,u=0;if(null==r||(s=h(r,o))!==(u=h(i,o))||p(r,i)<0^o>0)do{a.point(0===s||3===s?t:n,s>1?c:e)}while((s=(s+o+4)%4)!==u);else a.point(i[0],i[1])}function h(i,o){return(0,r.Wn)(i[0]-t)<r.Ho?o>0?0:3:(0,r.Wn)(i[0]-n)<r.Ho?o>0?2:1:(0,r.Wn)(i[1]-e)<r.Ho?o>0?1:0:o>0?3:2}function d(t,e){return p(t.x,e.x)}function p(t,e){var n=h(t,1),r=h(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){var h,p,g,m,v,y,w,b,x,E,S,_=r,T=(0,i.Z)(),I={point:C,lineStart:function(){I.point=A,p&&p.push(g=[]),E=!0,x=!1,w=b=NaN},lineEnd:function(){h&&(A(m,v),y&&x&&T.rejoin(),h.push(T.result())),I.point=C,x&&_.lineEnd()},polygonStart:function(){_=T,h=[],p=[],S=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=p.length;n<r;++n)for(var i,o,a=p[n],s=1,u=a.length,f=a[0],l=f[0],h=f[1];s<u;++s)i=l,o=h,l=(f=a[s])[0],h=f[1],o<=c?h>c&&(l-i)*(c-o)>(h-o)*(t-i)&&++e:h<=c&&(l-i)*(c-o)<(h-o)*(t-i)&&--e;return e}(),n=S&&e,i=(h=(0,a.TS)(h)).length;(n||i)&&(r.polygonStart(),n&&(r.lineStart(),l(null,null,1,r),r.lineEnd()),i&&(0,o.Z)(h,d,e,l,r),r.polygonEnd()),_=r,h=p=g=null}};function C(t,e){f(t,e)&&_.point(t,e)}function A(r,i){var o=f(r,i);if(p&&g.push([r,i]),E)m=r,v=i,y=o,E=!1,o&&(_.lineStart(),_.point(r,i));else if(o&&x)_.point(r,i);else{var a=[w=Math.max(u,Math.min(s,w)),b=Math.max(u,Math.min(s,b))],l=[r=Math.max(u,Math.min(s,r)),i=Math.max(u,Math.min(s,i))];!function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=0,f=1,l=e[0]-s,h=e[1]-u;if(a=n-s,l||!(a>0)){if(a/=l,l<0){if(a<c)return;a<f&&(f=a)}else if(l>0){if(a>f)return;a>c&&(c=a)}if(a=i-s,l||!(a<0)){if(a/=l,l<0){if(a>f)return;a>c&&(c=a)}else if(l>0){if(a<c)return;a<f&&(f=a)}if(a=r-u,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>c&&(c=a)}if(a=o-u,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<f&&(f=a)}return c>0&&(t[0]=s+c*l,t[1]=u+c*h),f<1&&(e[0]=s+f*l,e[1]=u+f*h),!0}}}}}(a,l,t,e,n,c)?o&&(_.lineStart(),_.point(r,i),S=!1):(x||(_.lineStart(),_.point(a[0],a[1])),_.point(l[0],l[1]),o||_.lineEnd(),S=!1)}w=r,b=i,x=o}return I}}},8684:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(5228),i=n(5350);function o(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function a(t,e,n,a,u){var c,f,l=[],h=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,a=t[0],s=t[e];if((0,r.Z)(a,s)){if(!a[2]&&!s[2]){for(u.lineStart(),c=0;c<e;++c)u.point((a=t[c])[0],a[1]);return void u.lineEnd()}s[0]+=2*i.Ho}l.push(n=new o(a,t,null,!0)),h.push(n.o=new o(a,null,n,!1)),l.push(n=new o(s,t,null,!1)),h.push(n.o=new o(s,null,n,!0))}})),l.length){for(h.sort(e),s(l),s(h),c=0,f=h.length;c<f;++c)h[c].e=n=!n;for(var d,p,g=l[0];;){for(var m=g,v=!0;m.v;)if((m=m.n)===g)return;d=m.z,u.lineStart();do{if(m.v=m.o.v=!0,m.e){if(v)for(c=0,f=d.length;c<f;++c)u.point((p=d[c])[0],p[1]);else a(m.x,m.n.x,1,u);m=m.n}else{if(v)for(d=m.p.z,c=d.length-1;c>=0;--c)u.point((p=d[c])[0],p[1]);else a(m.x,m.p.x,-1,u);m=m.p}d=(m=m.o).z,v=!v}while(!m.v);u.lineEnd()}}}function s(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}},4079:(t,e,n)=>{"use strict";function r(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}n.d(e,{Z:()=>r})},7423:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{Z:()=>r})},8482:(t,e,n)=>{"use strict";n.r(e),n.d(e,{geoAlbers:()=>Ke,geoAlbersUsa:()=>en,geoArea:()=>w,geoAzimuthalEqualArea:()=>an,geoAzimuthalEqualAreaRaw:()=>on,geoAzimuthalEquidistant:()=>un,geoAzimuthalEquidistantRaw:()=>sn,geoBounds:()=>ot,geoCentroid:()=>vt,geoCircle:()=>yt.Z,geoClipAntimeridian:()=>wt.Z,geoClipCircle:()=>bt.Z,geoClipExtent:()=>Et,geoClipRectangle:()=>xt.Z,geoConicConformal:()=>hn,geoConicConformalRaw:()=>ln,geoConicEqualArea:()=>Qe,geoConicEqualAreaRaw:()=>Je,geoConicEquidistant:()=>mn,geoConicEquidistantRaw:()=>gn,geoContains:()=>Dt,geoDistance:()=>Mt,geoEqualEarth:()=>Sn,geoEqualEarthRaw:()=>En,geoEquirectangular:()=>pn,geoEquirectangularRaw:()=>dn,geoGnomonic:()=>Tn,geoGnomonicRaw:()=>_n,geoGraticule:()=>zt,geoGraticule10:()=>Ut,geoIdentity:()=>Cn,geoInterpolate:()=>Gt,geoLength:()=>Nt,geoMercator:()=>cn.ZP,geoMercatorRaw:()=>cn.hk,geoNaturalEarth1:()=>Rn,geoNaturalEarth1Raw:()=>An,geoOrthographic:()=>Pn,geoOrthographicRaw:()=>Fn,geoPath:()=>ze,geoProjection:()=>Ue.Z,geoProjectionMutator:()=>Ue.r,geoRotation:()=>Ln.Z,geoStereographic:()=>On,geoStereographicRaw:()=>Nn,geoStream:()=>l.Z,geoTransform:()=>In.Z,geoTransverseMercator:()=>Mn,geoTransverseMercatorRaw:()=>kn});var r,i,o,a,s,u=n(8227),c=n(5350),f=n(1344),l=n(3311),h=(0,u.Z)(),d=(0,u.Z)(),p={point:f.Z,lineStart:f.Z,lineEnd:f.Z,polygonStart:function(){h.reset(),p.lineStart=g,p.lineEnd=m},polygonEnd:function(){var t=+h;d.add(t<0?c.BZ+t:t),this.lineStart=this.lineEnd=this.point=f.Z},sphere:function(){d.add(c.BZ)}};function g(){p.point=v}function m(){y(r,i)}function v(t,e){p.point=y,r=t,i=e,t*=c.uR,e*=c.uR,o=t,a=(0,c.mC)(e=e/2+c.pu),s=(0,c.O$)(e)}function y(t,e){t*=c.uR,e=(e*=c.uR)/2+c.pu;var n=t-o,r=n>=0?1:-1,i=r*n,u=(0,c.mC)(e),f=(0,c.O$)(e),l=s*f,d=a*u+l*(0,c.mC)(i),p=l*r*(0,c.O$)(i);h.add((0,c.fv)(p,d)),o=t,a=u,s=f}function w(t){return d.reset(),(0,l.Z)(t,p),2*d}var b,x,E,S,_,T,I,C,A,R,F,P,N,O,k,M,L,B,Z,H,Y,j,W,V,D,X,$=n(1593),q=(0,u.Z)(),z={point:U,lineStart:J,lineEnd:Q,polygonStart:function(){z.point=K,z.lineStart=tt,z.lineEnd=et,q.reset(),p.polygonStart()},polygonEnd:function(){p.polygonEnd(),z.point=U,z.lineStart=J,z.lineEnd=Q,h<0?(b=-(E=180),x=-(S=90)):q>c.Ho?S=90:q<-c.Ho&&(x=-90),R[0]=b,R[1]=E},sphere:function(){b=-(E=180),x=-(S=90)}};function U(t,e){A.push(R=[b=t,E=t]),e<x&&(x=e),e>S&&(S=e)}function G(t,e){var n=(0,$.Og)([t*c.uR,e*c.uR]);if(C){var r=(0,$.T5)(C,n),i=[r[1],-r[0],0],o=(0,$.T5)(i,r);(0,$.iJ)(o),o=(0,$.Y1)(o);var a,s=t-_,u=s>0?1:-1,f=o[0]*c.RW*u,l=(0,c.Wn)(s)>180;l^(u*_<f&&f<u*t)?(a=o[1]*c.RW)>S&&(S=a):l^(u*_<(f=(f+360)%360-180)&&f<u*t)?(a=-o[1]*c.RW)<x&&(x=a):(e<x&&(x=e),e>S&&(S=e)),l?t<_?nt(b,t)>nt(b,E)&&(E=t):nt(t,E)>nt(b,E)&&(b=t):E>=b?(t<b&&(b=t),t>E&&(E=t)):t>_?nt(b,t)>nt(b,E)&&(E=t):nt(t,E)>nt(b,E)&&(b=t)}else A.push(R=[b=t,E=t]);e<x&&(x=e),e>S&&(S=e),C=n,_=t}function J(){z.point=G}function Q(){R[0]=b,R[1]=E,z.point=U,C=null}function K(t,e){if(C){var n=t-_;q.add((0,c.Wn)(n)>180?n+(n>0?360:-360):n)}else T=t,I=e;p.point(t,e),G(t,e)}function tt(){p.lineStart()}function et(){K(T,I),p.lineEnd(),(0,c.Wn)(q)>c.Ho&&(b=-(E=180)),R[0]=b,R[1]=E,C=null}function nt(t,e){return(e-=t)<0?e+360:e}function rt(t,e){return t[0]-e[0]}function it(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function ot(t){var e,n,r,i,o,a,s;if(S=E=-(b=x=1/0),A=[],(0,l.Z)(t,z),n=A.length){for(A.sort(rt),e=1,o=[r=A[0]];e<n;++e)it(r,(i=A[e])[0])||it(r,i[1])?(nt(r[0],i[1])>nt(r[0],r[1])&&(r[1]=i[1]),nt(i[0],r[1])>nt(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,e=0,r=o[n=o.length-1];e<=n;r=i,++e)i=o[e],(s=nt(r[1],i[0]))>a&&(a=s,b=i[0],E=r[1])}return A=R=null,b===1/0||x===1/0?[[NaN,NaN],[NaN,NaN]]:[[b,x],[E,S]]}var at={sphere:f.Z,point:st,lineStart:ct,lineEnd:ht,polygonStart:function(){at.lineStart=dt,at.lineEnd=pt},polygonEnd:function(){at.lineStart=ct,at.lineEnd=ht}};function st(t,e){t*=c.uR,e*=c.uR;var n=(0,c.mC)(e);ut(n*(0,c.mC)(t),n*(0,c.O$)(t),(0,c.O$)(e))}function ut(t,e,n){++F,N+=(t-N)/F,O+=(e-O)/F,k+=(n-k)/F}function ct(){at.point=ft}function ft(t,e){t*=c.uR,e*=c.uR;var n=(0,c.mC)(e);V=n*(0,c.mC)(t),D=n*(0,c.O$)(t),X=(0,c.O$)(e),at.point=lt,ut(V,D,X)}function lt(t,e){t*=c.uR,e*=c.uR;var n=(0,c.mC)(e),r=n*(0,c.mC)(t),i=n*(0,c.O$)(t),o=(0,c.O$)(e),a=(0,c.fv)((0,c._b)((a=D*o-X*i)*a+(a=X*r-V*o)*a+(a=V*i-D*r)*a),V*r+D*i+X*o);P+=a,M+=a*(V+(V=r)),L+=a*(D+(D=i)),B+=a*(X+(X=o)),ut(V,D,X)}function ht(){at.point=st}function dt(){at.point=gt}function pt(){mt(j,W),at.point=st}function gt(t,e){j=t,W=e,t*=c.uR,e*=c.uR,at.point=mt;var n=(0,c.mC)(e);V=n*(0,c.mC)(t),D=n*(0,c.O$)(t),X=(0,c.O$)(e),ut(V,D,X)}function mt(t,e){t*=c.uR,e*=c.uR;var n=(0,c.mC)(e),r=n*(0,c.mC)(t),i=n*(0,c.O$)(t),o=(0,c.O$)(e),a=D*o-X*i,s=X*r-V*o,u=V*i-D*r,f=(0,c._b)(a*a+s*s+u*u),l=(0,c.ZR)(f),h=f&&-l/f;Z+=h*a,H+=h*s,Y+=h*u,P+=l,M+=l*(V+(V=r)),L+=l*(D+(D=i)),B+=l*(X+(X=o)),ut(V,D,X)}function vt(t){F=P=N=O=k=M=L=B=Z=H=Y=0,(0,l.Z)(t,at);var e=Z,n=H,r=Y,i=e*e+n*n+r*r;return i<c.aW&&(e=M,n=L,r=B,P<c.Ho&&(e=N,n=O,r=k),(i=e*e+n*n+r*r)<c.aW)?[NaN,NaN]:[(0,c.fv)(n,e)*c.RW,(0,c.ZR)(r/(0,c._b)(i))*c.RW]}var yt=n(9766),wt=n(4969),bt=n(3880),xt=n(3825);function Et(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=(0,xt.Z)(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}}var St,_t,Tt,It=n(2629),Ct=(0,u.Z)(),At={sphere:f.Z,point:f.Z,lineStart:function(){At.point=Ft,At.lineEnd=Rt},lineEnd:f.Z,polygonStart:f.Z,polygonEnd:f.Z};function Rt(){At.point=At.lineEnd=f.Z}function Ft(t,e){t*=c.uR,e*=c.uR,St=t,_t=(0,c.O$)(e),Tt=(0,c.mC)(e),At.point=Pt}function Pt(t,e){t*=c.uR,e*=c.uR;var n=(0,c.O$)(e),r=(0,c.mC)(e),i=(0,c.Wn)(t-St),o=(0,c.mC)(i),a=r*(0,c.O$)(i),s=Tt*n-_t*r*o,u=_t*n+Tt*r*o;Ct.add((0,c.fv)((0,c._b)(a*a+s*s),u)),St=t,_t=n,Tt=r}function Nt(t){return Ct.reset(),(0,l.Z)(t,At),+Ct}var Ot=[null,null],kt={type:"LineString",coordinates:Ot};function Mt(t,e){return Ot[0]=t,Ot[1]=e,Nt(kt)}var Lt={Feature:function(t,e){return Zt(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)if(Zt(n[r].geometry,e))return!0;return!1}},Bt={Sphere:function(){return!0},Point:function(t,e){return Ht(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Ht(n[r],e))return!0;return!1},LineString:function(t,e){return Yt(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(Yt(n[r],e))return!0;return!1},Polygon:function(t,e){return jt(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(jt(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)if(Zt(n[r],e))return!0;return!1}};function Zt(t,e){return!(!t||!Bt.hasOwnProperty(t.type))&&Bt[t.type](t,e)}function Ht(t,e){return 0===Mt(t,e)}function Yt(t,e){for(var n,r,i,o=0,a=t.length;o<a;o++){if(0===(r=Mt(t[o],e)))return!0;if(o>0&&(i=Mt(t[o],t[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<c.aW*i)return!0;n=r}return!1}function jt(t,e){return!!(0,It.Z)(t.map(Wt),Vt(e))}function Wt(t){return(t=t.map(Vt)).pop(),t}function Vt(t){return[t[0]*c.uR,t[1]*c.uR]}function Dt(t,e){return(t&&Lt.hasOwnProperty(t.type)?Lt[t.type]:Zt)(t,e)}var Xt=n(4428);function $t(t,e,n){var r=(0,Xt.w6)(t,e-c.Ho,n).concat(e);return function(t){return r.map((function(e){return[t,e]}))}}function qt(t,e,n){var r=(0,Xt.w6)(t,e-c.Ho,n).concat(e);return function(t){return r.map((function(e){return[e,t]}))}}function zt(){var t,e,n,r,i,o,a,s,u,f,l,h,d=10,p=d,g=90,m=360,v=2.5;function y(){return{type:"MultiLineString",coordinates:w()}}function w(){return(0,Xt.w6)((0,c.mD)(r/g)*g,n,g).map(l).concat((0,Xt.w6)((0,c.mD)(s/m)*m,a,m).map(h)).concat((0,Xt.w6)((0,c.mD)(e/d)*d,t,d).filter((function(t){return(0,c.Wn)(t%g)>c.Ho})).map(u)).concat((0,Xt.w6)((0,c.mD)(o/p)*p,i,p).filter((function(t){return(0,c.Wn)(t%m)>c.Ho})).map(f))}return y.lines=function(){return w().map((function(t){return{type:"LineString",coordinates:t}}))},y.outline=function(){return{type:"Polygon",coordinates:[l(r).concat(h(a).slice(1),l(n).reverse().slice(1),h(s).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),y.precision(v)):[[r,s],[n,a]]},y.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),y.precision(v)):[[e,o],[t,i]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(g=+t[0],m=+t[1],y):[g,m]},y.stepMinor=function(t){return arguments.length?(d=+t[0],p=+t[1],y):[d,p]},y.precision=function(c){return arguments.length?(v=+c,u=$t(o,i,90),f=qt(e,t,v),l=$t(s,a,90),h=qt(r,n,v),y):v},y.extentMajor([[-180,-90+c.Ho],[180,90-c.Ho]]).extentMinor([[-180,-80-c.Ho],[180,80+c.Ho]])}function Ut(){return zt()()}function Gt(t,e){var n=t[0]*c.uR,r=t[1]*c.uR,i=e[0]*c.uR,o=e[1]*c.uR,a=(0,c.mC)(r),s=(0,c.O$)(r),u=(0,c.mC)(o),f=(0,c.O$)(o),l=a*(0,c.mC)(n),h=a*(0,c.O$)(n),d=u*(0,c.mC)(i),p=u*(0,c.O$)(i),g=2*(0,c.ZR)((0,c._b)((0,c.Jy)(o-r)+a*u*(0,c.Jy)(i-n))),m=(0,c.O$)(g),v=g?function(t){var e=(0,c.O$)(t*=g)/m,n=(0,c.O$)(g-t)/m,r=n*l+e*d,i=n*h+e*p,o=n*s+e*f;return[(0,c.fv)(i,r)*c.RW,(0,c.fv)(o,(0,c._b)(r*r+i*i))*c.RW]}:function(){return[n*c.RW,r*c.RW]};return v.distance=g,v}var Jt,Qt,Kt,te,ee=n(7423),ne=(0,u.Z)(),re=(0,u.Z)(),ie={point:f.Z,lineStart:f.Z,lineEnd:f.Z,polygonStart:function(){ie.lineStart=oe,ie.lineEnd=ue},polygonEnd:function(){ie.lineStart=ie.lineEnd=ie.point=f.Z,ne.add((0,c.Wn)(re)),re.reset()},result:function(){var t=ne/2;return ne.reset(),t}};function oe(){ie.point=ae}function ae(t,e){ie.point=se,Jt=Kt=t,Qt=te=e}function se(t,e){re.add(te*t-Kt*e),Kt=t,te=e}function ue(){se(Jt,Qt)}const ce=ie;var fe,le,he,de,pe=n(3310),ge=0,me=0,ve=0,ye=0,we=0,be=0,xe=0,Ee=0,Se=0,_e={point:Te,lineStart:Ie,lineEnd:Re,polygonStart:function(){_e.lineStart=Fe,_e.lineEnd=Pe},polygonEnd:function(){_e.point=Te,_e.lineStart=Ie,_e.lineEnd=Re},result:function(){var t=Se?[xe/Se,Ee/Se]:be?[ye/be,we/be]:ve?[ge/ve,me/ve]:[NaN,NaN];return ge=me=ve=ye=we=be=xe=Ee=Se=0,t}};function Te(t,e){ge+=t,me+=e,++ve}function Ie(){_e.point=Ce}function Ce(t,e){_e.point=Ae,Te(he=t,de=e)}function Ae(t,e){var n=t-he,r=e-de,i=(0,c._b)(n*n+r*r);ye+=i*(he+t)/2,we+=i*(de+e)/2,be+=i,Te(he=t,de=e)}function Re(){_e.point=Te}function Fe(){_e.point=Ne}function Pe(){Oe(fe,le)}function Ne(t,e){_e.point=Oe,Te(fe=he=t,le=de=e)}function Oe(t,e){var n=t-he,r=e-de,i=(0,c._b)(n*n+r*r);ye+=i*(he+t)/2,we+=i*(de+e)/2,be+=i,xe+=(i=de*t-he*e)*(he+t),Ee+=i*(de+e),Se+=3*i,Te(he=t,de=e)}const ke=_e;function Me(t){this._context=t}Me.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,c.BZ)}},result:f.Z};var Le,Be,Ze,He,Ye,je=(0,u.Z)(),We={point:f.Z,lineStart:function(){We.point=Ve},lineEnd:function(){Le&&De(Be,Ze),We.point=f.Z},polygonStart:function(){Le=!0},polygonEnd:function(){Le=null},result:function(){var t=+je;return je.reset(),t}};function Ve(t,e){We.point=De,Be=He=t,Ze=Ye=e}function De(t,e){He-=t,Ye-=e,je.add((0,c._b)(He*He+Ye*Ye)),He=t,Ye=e}const Xe=We;function $e(){this._string=[]}function qe(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function ze(t,e){var n,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),(0,l.Z)(t,n(r))),r.result()}return o.area=function(t){return(0,l.Z)(t,n(ce)),ce.result()},o.measure=function(t){return(0,l.Z)(t,n(Xe)),Xe.result()},o.bounds=function(t){return(0,l.Z)(t,n(pe.Z)),pe.Z.result()},o.centroid=function(t){return(0,l.Z)(t,n(ke)),ke.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,ee.Z):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new $e):new Me(e=t),"function"!=typeof i&&r.pointRadius(i),o):e},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(e)}$e.prototype={_radius:4.5,_circle:qe(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=qe(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var Ue=n(2368);function Ge(t){var e=0,n=c.pi/3,r=(0,Ue.r)(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*c.uR,n=t[1]*c.uR):[e*c.RW,n*c.RW]},i}function Je(t,e){var n=(0,c.O$)(t),r=(n+(0,c.O$)(e))/2;if((0,c.Wn)(r)<c.Ho)return function(t){var e=(0,c.mC)(t);function n(t,n){return[t*e,(0,c.O$)(n)/e]}return n.invert=function(t,n){return[t/e,(0,c.ZR)(n*e)]},n}(t);var i=1+n*(2*r-n),o=(0,c._b)(i)/r;function a(t,e){var n=(0,c._b)(i-2*r*(0,c.O$)(e))/r;return[n*(0,c.O$)(t*=r),o-n*(0,c.mC)(t)]}return a.invert=function(t,e){var n=o-e,a=(0,c.fv)(t,(0,c.Wn)(n))*(0,c.Xx)(n);return n*r<0&&(a-=c.pi*(0,c.Xx)(t)*(0,c.Xx)(n)),[a/r,(0,c.ZR)((i-(t*t+n*n)*r*r)/(2*r))]},a}function Qe(){return Ge(Je).scale(155.424).center([0,33.6442])}function Ke(){return Qe().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var tn=n(3776);function en(){var t,e,n,r,i,o,a=Ke(),s=Qe().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Qe().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(t,e){o=[t,e]}};function l(t){var e=t[0],a=t[1];return o=null,n.point(e,a),o||(r.point(e,a),o)||(i.point(e,a),o)}function h(){return t=e=null,l}return l.invert=function(t){var e=a.scale(),n=a.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(t)},l.stream=function(n){return t&&e===n?t:(r=[a.stream(e=n),s.stream(n),u.stream(n)],i=r.length,t={point:function(t,e){for(var n=-1;++n<i;)r[n].point(t,e)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},l.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),h()):a.precision()},l.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),l.translate(a.translate())):a.scale()},l.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),o=+t[0],l=+t[1];return n=a.translate(t).clipExtent([[o-.455*e,l-.238*e],[o+.455*e,l+.238*e]]).stream(f),r=s.translate([o-.307*e,l+.201*e]).clipExtent([[o-.425*e+c.Ho,l+.12*e+c.Ho],[o-.214*e-c.Ho,l+.234*e-c.Ho]]).stream(f),i=u.translate([o-.205*e,l+.212*e]).clipExtent([[o-.214*e+c.Ho,l+.166*e+c.Ho],[o-.115*e-c.Ho,l+.234*e-c.Ho]]).stream(f),h()},l.fitExtent=function(t,e){return(0,tn.qg)(l,t,e)},l.fitSize=function(t,e){return(0,tn.mF)(l,t,e)},l.fitWidth=function(t,e){return(0,tn.V6)(l,t,e)},l.fitHeight=function(t,e){return(0,tn.rf)(l,t,e)},l.scale(1070)}function nn(t){return function(e,n){var r=(0,c.mC)(e),i=(0,c.mC)(n),o=t(r*i);return[o*i*(0,c.O$)(e),o*(0,c.O$)(n)]}}function rn(t){return function(e,n){var r=(0,c._b)(e*e+n*n),i=t(r),o=(0,c.O$)(i),a=(0,c.mC)(i);return[(0,c.fv)(e*o,r*a),(0,c.ZR)(r&&n*o/r)]}}var on=nn((function(t){return(0,c._b)(2/(1+t))}));function an(){return(0,Ue.Z)(on).scale(124.75).clipAngle(179.999)}on.invert=rn((function(t){return 2*(0,c.ZR)(t/2)}));var sn=nn((function(t){return(t=(0,c.Kh)(t))&&t/(0,c.O$)(t)}));function un(){return(0,Ue.Z)(sn).scale(79.4188).clipAngle(179.999)}sn.invert=rn((function(t){return t}));var cn=n(3007);function fn(t){return(0,c.OR)((c.ou+t)/2)}function ln(t,e){var n=(0,c.mC)(t),r=t===e?(0,c.O$)(t):(0,c.cM)(n/(0,c.mC)(e))/(0,c.cM)(fn(e)/fn(t)),i=n*(0,c.sQ)(fn(t),r)/r;if(!r)return cn.hk;function o(t,e){i>0?e<-c.ou+c.Ho&&(e=-c.ou+c.Ho):e>c.ou-c.Ho&&(e=c.ou-c.Ho);var n=i/(0,c.sQ)(fn(e),r);return[n*(0,c.O$)(r*t),i-n*(0,c.mC)(r*t)]}return o.invert=function(t,e){var n=i-e,o=(0,c.Xx)(r)*(0,c._b)(t*t+n*n),a=(0,c.fv)(t,(0,c.Wn)(n))*(0,c.Xx)(n);return n*r<0&&(a-=c.pi*(0,c.Xx)(t)*(0,c.Xx)(n)),[a/r,2*(0,c.z4)((0,c.sQ)(i/o,1/r))-c.ou]},o}function hn(){return Ge(ln).scale(109.5).parallels([30,30])}function dn(t,e){return[t,e]}function pn(){return(0,Ue.Z)(dn).scale(152.63)}function gn(t,e){var n=(0,c.mC)(t),r=t===e?(0,c.O$)(t):(n-(0,c.mC)(e))/(e-t),i=n/r+t;if((0,c.Wn)(r)<c.Ho)return dn;function o(t,e){var n=i-e,o=r*t;return[n*(0,c.O$)(o),i-n*(0,c.mC)(o)]}return o.invert=function(t,e){var n=i-e,o=(0,c.fv)(t,(0,c.Wn)(n))*(0,c.Xx)(n);return n*r<0&&(o-=c.pi*(0,c.Xx)(t)*(0,c.Xx)(n)),[o/r,i-(0,c.Xx)(r)*(0,c._b)(t*t+n*n)]},o}function mn(){return Ge(gn).scale(131.154).center([0,13.9389])}dn.invert=dn;var vn=1.340264,yn=-.081106,wn=893e-6,bn=.003796,xn=(0,c._b)(3)/2;function En(t,e){var n=(0,c.ZR)(xn*(0,c.O$)(e)),r=n*n,i=r*r*r;return[t*(0,c.mC)(n)/(xn*(vn+3*yn*r+i*(7*wn+9*bn*r))),n*(vn+yn*r+i*(wn+bn*r))]}function Sn(){return(0,Ue.Z)(En).scale(177.158)}function _n(t,e){var n=(0,c.mC)(e),r=(0,c.mC)(t)*n;return[n*(0,c.O$)(t)/r,(0,c.O$)(e)/r]}function Tn(){return(0,Ue.Z)(_n).scale(144.049).clipAngle(60)}En.invert=function(t,e){for(var n,r=e,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(vn+yn*i+o*(wn+bn*i))-e)/(vn+3*yn*i+o*(7*wn+9*bn*i)))*r)*i*i,!((0,c.Wn)(n)<c.aW));++a);return[xn*t*(vn+3*yn*i+o*(7*wn+9*bn*i))/(0,c.mC)(r),(0,c.ZR)((0,c.O$)(r)/xn)]},_n.invert=rn(c.z4);var In=n(71);function Cn(){var t,e,n,r,i,o,a,s=1,u=0,f=0,l=1,h=1,d=0,p=null,g=1,m=1,v=(0,In.l)({point:function(t,e){var n=b([t,e]);this.stream.point(n[0],n[1])}}),y=ee.Z;function w(){return g=s*l,m=s*h,o=a=null,b}function b(n){var r=n[0]*g,i=n[1]*m;if(d){var o=i*t-r*e;r=r*t+i*e,i=o}return[r+u,i+f]}return b.invert=function(n){var r=n[0]-u,i=n[1]-f;if(d){var o=i*t+r*e;r=r*t-i*e,i=o}return[r/g,i/m]},b.stream=function(t){return o&&a===t?o:o=v(y(a=t))},b.postclip=function(t){return arguments.length?(y=t,p=n=r=i=null,w()):y},b.clipExtent=function(t){return arguments.length?(y=null==t?(p=n=r=i=null,ee.Z):(0,xt.Z)(p=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),w()):null==p?null:[[p,n],[r,i]]},b.scale=function(t){return arguments.length?(s=+t,w()):s},b.translate=function(t){return arguments.length?(u=+t[0],f=+t[1],w()):[u,f]},b.angle=function(n){return arguments.length?(d=n%360*c.uR,e=(0,c.O$)(d),t=(0,c.mC)(d),w()):d*c.RW},b.reflectX=function(t){return arguments.length?(l=t?-1:1,w()):l<0},b.reflectY=function(t){return arguments.length?(h=t?-1:1,w()):h<0},b.fitExtent=function(t,e){return(0,tn.qg)(b,t,e)},b.fitSize=function(t,e){return(0,tn.mF)(b,t,e)},b.fitWidth=function(t,e){return(0,tn.V6)(b,t,e)},b.fitHeight=function(t,e){return(0,tn.rf)(b,t,e)},b}function An(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Rn(){return(0,Ue.Z)(An).scale(175.295)}function Fn(t,e){return[(0,c.mC)(e)*(0,c.O$)(t),(0,c.O$)(e)]}function Pn(){return(0,Ue.Z)(Fn).scale(249.5).clipAngle(90+c.Ho)}function Nn(t,e){var n=(0,c.mC)(e),r=1+(0,c.mC)(t)*n;return[n*(0,c.O$)(t)/r,(0,c.O$)(e)/r]}function On(){return(0,Ue.Z)(Nn).scale(250).clipAngle(142)}function kn(t,e){return[(0,c.cM)((0,c.OR)((c.ou+e)/2)),-t]}function Mn(){var t=(0,cn.iW)(kn),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}An.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-e)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while((0,c.Wn)(n)>c.Ho&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},Fn.invert=rn(c.ZR),Nn.invert=rn((function(t){return 2*(0,c.z4)(t)})),kn.invert=function(t,e){return[-e,2*(0,c.z4)((0,c.Qq)(t))-c.ou]};var Ln=n(1613)},5350:(t,e,n)=>{"use strict";n.d(e,{Ho:()=>r,aW:()=>i,pi:()=>o,ou:()=>a,pu:()=>s,BZ:()=>u,RW:()=>c,uR:()=>f,Wn:()=>l,z4:()=>h,fv:()=>d,mC:()=>p,mD:()=>g,Qq:()=>m,cM:()=>v,sQ:()=>y,O$:()=>w,Xx:()=>b,_b:()=>x,OR:()=>E,Kh:()=>S,ZR:()=>_,Jy:()=>T});var r=1e-6,i=1e-12,o=Math.PI,a=o/2,s=o/4,u=2*o,c=180/o,f=o/180,l=Math.abs,h=Math.atan,d=Math.atan2,p=Math.cos,g=Math.ceil,m=Math.exp,v=(Math.floor,Math.log),y=Math.pow,w=Math.sin,b=Math.sign||function(t){return t>0?1:t<0?-1:0},x=Math.sqrt,E=Math.tan;function S(t){return t>1?0:t<-1?o:Math.acos(t)}function _(t){return t>1?a:t<-1?-a:Math.asin(t)}function T(t){return(t=w(t/2))*t}},1344:(t,e,n)=>{"use strict";function r(){}n.d(e,{Z:()=>r})},3310:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var r=n(1344),i=1/0,o=i,a=-i,s=a;const u={point:function(t,e){t<i&&(i=t),t>a&&(a=t),e<o&&(o=e),e>s&&(s=e)},lineStart:r.Z,lineEnd:r.Z,polygonStart:r.Z,polygonEnd:r.Z,result:function(){var t=[[i,o],[a,s]];return a=s=-(o=i=1/0),t}}},5228:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=n(5350);function i(t,e){return(0,r.Wn)(t[0]-e[0])<r.Ho&&(0,r.Wn)(t[1]-e[1])<r.Ho}},2629:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var r=n(8227),i=n(1593),o=n(5350),a=(0,r.Z)();function s(t){return(0,o.Wn)(t[0])<=o.pi?t[0]:(0,o.Xx)(t[0])*(((0,o.Wn)(t[0])+o.pi)%o.BZ-o.pi)}function u(t,e){var n=s(e),r=e[1],u=(0,o.O$)(r),c=[(0,o.O$)(n),-(0,o.mC)(n),0],f=0,l=0;a.reset(),1===u?r=o.ou+o.Ho:-1===u&&(r=-o.ou-o.Ho);for(var h=0,d=t.length;h<d;++h)if(g=(p=t[h]).length)for(var p,g,m=p[g-1],v=s(m),y=m[1]/2+o.pu,w=(0,o.O$)(y),b=(0,o.mC)(y),x=0;x<g;++x,v=S,w=T,b=I,m=E){var E=p[x],S=s(E),_=E[1]/2+o.pu,T=(0,o.O$)(_),I=(0,o.mC)(_),C=S-v,A=C>=0?1:-1,R=A*C,F=R>o.pi,P=w*T;if(a.add((0,o.fv)(P*A*(0,o.O$)(R),b*I+P*(0,o.mC)(R))),f+=F?C+A*o.BZ:C,F^v>=n^S>=n){var N=(0,i.T5)((0,i.Og)(m),(0,i.Og)(E));(0,i.iJ)(N);var O=(0,i.T5)(c,N);(0,i.iJ)(O);var k=(F^C>=0?-1:1)*(0,o.ZR)(O[2]);(r>k||r===k&&(N[0]||N[1]))&&(l+=F^C>=0?1:-1)}}return(f<-o.Ho||f<o.Ho&&a<-o.Ho)^1&l}},3776:(t,e,n)=>{"use strict";n.d(e,{qg:()=>a,mF:()=>s,V6:()=>u,rf:()=>c});var r=n(3311),i=n(3310);function o(t,e,n){var o=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),(0,r.Z)(n,t.stream(i.Z)),e(i.Z.result()),null!=o&&t.clipExtent(o),t}function a(t,e,n){return o(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,s])}),n)}function s(t,e,n){return a(t,[[0,0],e],n)}function u(t,e,n){return o(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function c(t,e,n){return o(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}},2368:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y,r:()=>w});var r=n(4969),i=n(3880),o=n(3825),a=n(4079),s=n(7423),u=n(5350),c=n(1613),f=n(71),l=n(3776),h=n(1593),d=(0,u.mC)(30*u.uR);function p(t,e){return+e?function(t,e){function n(r,i,o,a,s,c,f,l,h,p,g,m,v,y){var w=f-r,b=l-i,x=w*w+b*b;if(x>4*e&&v--){var E=a+p,S=s+g,_=c+m,T=(0,u._b)(E*E+S*S+_*_),I=(0,u.ZR)(_/=T),C=(0,u.Wn)((0,u.Wn)(_)-1)<u.Ho||(0,u.Wn)(o-h)<u.Ho?(o+h)/2:(0,u.fv)(S,E),A=t(C,I),R=A[0],F=A[1],P=R-r,N=F-i,O=b*P-w*N;(O*O/x>e||(0,u.Wn)((w*P+b*N)/x-.5)>.3||a*p+s*g+c*m<d)&&(n(r,i,o,a,s,c,R,F,C,E/=T,S/=T,_,v,y),y.point(R,F),n(R,F,C,E,S,_,f,l,h,p,g,m,v,y))}}return function(e){var r,i,o,a,s,u,c,f,l,d,p,g,m={point:v,lineStart:y,lineEnd:b,polygonStart:function(){e.polygonStart(),m.lineStart=x},polygonEnd:function(){e.polygonEnd(),m.lineStart=y}};function v(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){f=NaN,m.point=w,e.lineStart()}function w(r,i){var o=(0,h.Og)([r,i]),a=t(r,i);n(f,l,c,d,p,g,f=a[0],l=a[1],c=r,d=o[0],p=o[1],g=o[2],16,e),e.point(f,l)}function b(){m.point=v,e.lineEnd()}function x(){y(),m.point=E,m.lineEnd=S}function E(t,e){w(r=t,e),i=f,o=l,a=d,s=p,u=g,m.point=w}function S(){n(f,l,c,d,p,g,i,o,r,a,s,u,16,e),m.lineEnd=b,b()}return m}}(t,e):function(t){return(0,f.l)({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var g=(0,f.l)({point:function(t,e){this.stream.point(t*u.uR,e*u.uR)}});function m(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}function v(t,e,n,r,i,o){var a=(0,u.mC)(o),s=(0,u.O$)(o),c=a*t,f=s*t,l=a/t,h=s/t,d=(s*n-a*e)/t,p=(s*e+a*n)/t;function g(t,o){return[c*(t*=r)-f*(o*=i)+e,n-f*t-c*o]}return g.invert=function(t,e){return[r*(l*t-h*e+d),i*(p-h*t-l*e)]},g}function y(t){return w((function(){return t}))()}function w(t){var e,n,h,d,y,w,b,x,E,S,_=150,T=480,I=250,C=0,A=0,R=0,F=0,P=0,N=0,O=1,k=1,M=null,L=r.Z,B=null,Z=s.Z,H=.5;function Y(t){return x(t[0]*u.uR,t[1]*u.uR)}function j(t){return(t=x.invert(t[0],t[1]))&&[t[0]*u.RW,t[1]*u.RW]}function W(){var t=v(_,0,0,O,k,N).apply(null,e(C,A)),r=(N?v:m)(_,T-t[0],I-t[1],O,k,N);return n=(0,c.I)(R,F,P),b=(0,a.Z)(e,r),x=(0,a.Z)(n,b),w=p(b,H),V()}function V(){return E=S=null,Y}return Y.stream=function(t){return E&&S===t?E:E=g(function(t){return(0,f.l)({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(L(w(Z(S=t)))))},Y.preclip=function(t){return arguments.length?(L=t,M=void 0,V()):L},Y.postclip=function(t){return arguments.length?(Z=t,B=h=d=y=null,V()):Z},Y.clipAngle=function(t){return arguments.length?(L=+t?(0,i.Z)(M=t*u.uR):(M=null,r.Z),V()):M*u.RW},Y.clipExtent=function(t){return arguments.length?(Z=null==t?(B=h=d=y=null,s.Z):(0,o.Z)(B=+t[0][0],h=+t[0][1],d=+t[1][0],y=+t[1][1]),V()):null==B?null:[[B,h],[d,y]]},Y.scale=function(t){return arguments.length?(_=+t,W()):_},Y.translate=function(t){return arguments.length?(T=+t[0],I=+t[1],W()):[T,I]},Y.center=function(t){return arguments.length?(C=t[0]%360*u.uR,A=t[1]%360*u.uR,W()):[C*u.RW,A*u.RW]},Y.rotate=function(t){return arguments.length?(R=t[0]%360*u.uR,F=t[1]%360*u.uR,P=t.length>2?t[2]%360*u.uR:0,W()):[R*u.RW,F*u.RW,P*u.RW]},Y.angle=function(t){return arguments.length?(N=t%360*u.uR,W()):N*u.RW},Y.reflectX=function(t){return arguments.length?(O=t?-1:1,W()):O<0},Y.reflectY=function(t){return arguments.length?(k=t?-1:1,W()):k<0},Y.precision=function(t){return arguments.length?(w=p(b,H=t*t),V()):(0,u._b)(H)},Y.fitExtent=function(t,e){return(0,l.qg)(Y,t,e)},Y.fitSize=function(t,e){return(0,l.mF)(Y,t,e)},Y.fitWidth=function(t,e){return(0,l.V6)(Y,t,e)},Y.fitHeight=function(t,e){return(0,l.rf)(Y,t,e)},function(){return e=t.apply(this,arguments),Y.invert=e.invert&&j,W()}}},3007:(t,e,n)=>{"use strict";n.d(e,{hk:()=>a,ZP:()=>s,iW:()=>u});var r=n(5350),i=n(1613),o=n(2368);function a(t,e){return[t,(0,r.cM)((0,r.OR)((r.ou+e)/2))]}function s(){return u(a).scale(961/r.BZ)}function u(t){var e,n,s,u=(0,o.Z)(t),c=u.center,f=u.scale,l=u.translate,h=u.clipExtent,d=null;function p(){var o=r.pi*f(),c=u((0,i.Z)(u.rotate()).invert([0,0]));return h(null==d?[[c[0]-o,c[1]-o],[c[0]+o,c[1]+o]]:t===a?[[Math.max(c[0]-o,d),e],[Math.min(c[0]+o,n),s]]:[[d,Math.max(c[1]-o,e)],[n,Math.min(c[1]+o,s)]])}return u.scale=function(t){return arguments.length?(f(t),p()):f()},u.translate=function(t){return arguments.length?(l(t),p()):l()},u.center=function(t){return arguments.length?(c(t),p()):c()},u.clipExtent=function(t){return arguments.length?(null==t?d=e=n=s=null:(d=+t[0][0],e=+t[0][1],n=+t[1][0],s=+t[1][1]),p()):null==d?null:[[d,e],[n,s]]},p()}a.invert=function(t,e){return[t,2*(0,r.z4)((0,r.Qq)(e))-r.ou]}},1613:(t,e,n)=>{"use strict";n.d(e,{I:()=>a,Z:()=>f});var r=n(4079),i=n(5350);function o(t,e){return[(0,i.Wn)(t)>i.pi?t+Math.round(-t/i.BZ)*i.BZ:t,e]}function a(t,e,n){return(t%=i.BZ)?e||n?(0,r.Z)(u(t),c(e,n)):u(t):e||n?c(e,n):o}function s(t){return function(e,n){return[(e+=t)>i.pi?e-i.BZ:e<-i.pi?e+i.BZ:e,n]}}function u(t){var e=s(t);return e.invert=s(-t),e}function c(t,e){var n=(0,i.mC)(t),r=(0,i.O$)(t),o=(0,i.mC)(e),a=(0,i.O$)(e);function s(t,e){var s=(0,i.mC)(e),u=(0,i.mC)(t)*s,c=(0,i.O$)(t)*s,f=(0,i.O$)(e),l=f*n+u*r;return[(0,i.fv)(c*o-l*a,u*n-f*r),(0,i.ZR)(l*o+c*a)]}return s.invert=function(t,e){var s=(0,i.mC)(e),u=(0,i.mC)(t)*s,c=(0,i.O$)(t)*s,f=(0,i.O$)(e),l=f*o-c*a;return[(0,i.fv)(c*o+f*a,u*n+l*r),(0,i.ZR)(l*n-u*r)]},s}function f(t){function e(e){return(e=t(e[0]*i.uR,e[1]*i.uR))[0]*=i.RW,e[1]*=i.RW,e}return t=a(t[0]*i.uR,t[1]*i.uR,t.length>2?t[2]*i.uR:0),e.invert=function(e){return(e=t.invert(e[0]*i.uR,e[1]*i.uR))[0]*=i.RW,e[1]*=i.RW,e},e}o.invert=o},3311:(t,e,n)=>{"use strict";function r(t,e){t&&o.hasOwnProperty(t.type)&&o[t.type](t,e)}n.d(e,{Z:()=>u});var i={Feature:function(t,e){r(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,o=n.length;++i<o;)r(n[i].geometry,e)}},o={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){a(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)a(n[r],e,0)},Polygon:function(t,e){s(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)s(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,o=n.length;++i<o;)r(n[i],e)}};function a(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function s(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)a(t[n],e,1);e.polygonEnd()}function u(t,e){t&&i.hasOwnProperty(t.type)?i[t.type](t,e):r(t,e)}},71:(t,e,n)=>{"use strict";function r(t){return{stream:i(t)}}function i(t){return function(e){var n=new o;for(var r in t)n[r]=t[r];return n.stream=e,n}}function o(){}n.d(e,{Z:()=>r,l:()=>i}),o.prototype={constructor:o,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},645:(t,e)=>{e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,f=-7,l=n?i-1:0,h=n?-1:1,d=t[e+l];for(l+=h,o=d&(1<<-f)-1,d>>=-f,f+=s;f>0;o=256*o+t[e+l],l+=h,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=r;f>0;a=256*a+t[e+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+l>=1?h/u:h*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(e*u-1)*Math.pow(2,i),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*g}},4245:t=>{t.exports=function(t){!function(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}(t);var e=function(t){var e=Object.create(null);return{on:function(n,r,i){if("function"!=typeof r)throw new Error("callback is expected to be a function");var o=e[n];return o||(o=e[n]=[]),o.push({callback:r,ctx:i}),t},off:function(n,r){if(void 0===n)return e=Object.create(null),t;if(e[n])if("function"!=typeof r)delete e[n];else for(var i=e[n],o=0;o<i.length;++o)i[o].callback===r&&i.splice(o,1);return t},fire:function(n){var r,i=e[n];if(!i)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var o=0;o<i.length;++o){var a=i[o];a.callback.apply(a.ctx,r)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},4736:(t,e,n)=>{t.exports=function(t){if("uniqueLinkId"in(t=t||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),t.multigraph=t.uniqueLinkId),void 0===t.multigraph&&(t.multigraph=!1),"function"!=typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e,n=new Map,c=[],f={},l=0,h=t.multigraph?function(t,e,n){var r=u(t,e),i=f.hasOwnProperty(r);if(i||C(t,e)){i||(f[r]=0);var o="@"+ ++f[r];r=u(t+o,e+o)}return new s(t,e,n,r)}:function(t,e,n){return new s(t,e,n,u(t,e))},d=[],p=A,g=A,m=A,v=A,y={addNode:x,addLink:function(t,e,n){m();var r=E(t)||x(t),i=E(e)||x(e),o=h(t,e,n);return c.push(o),a(r,o),t!==e&&a(i,o),p(o,"add"),v(),o},removeLink:I,removeNode:S,getNode:E,getNodeCount:_,getLinkCount:T,getLinksCount:T,getNodesCount:_,getLinks:function(t){var e=E(t);return e?e.links:null},forEachNode:P,forEachLinkedNode:function(t,e,r){var i=E(t);if(i&&i.links&&"function"==typeof e)return r?function(t,e,r){for(var i=0;i<t.length;++i){var o=t[i];if(o.fromId===e&&r(n.get(o.toId),o))return!0}}(i.links,t,e):function(t,e,r){for(var i=0;i<t.length;++i){var o=t[i],a=o.fromId===e?o.toId:o.fromId;if(r(n.get(a),o))return!0}}(i.links,t,e)},forEachLink:function(t){var e,n;if("function"==typeof t)for(e=0,n=c.length;e<n;++e)t(c[e])},beginUpdate:m,endUpdate:v,clear:function(){m(),P((function(t){S(t.id)})),v()},hasLink:C,hasNode:E,getLink:C};return r(y),e=y.on,y.on=function(){return y.beginUpdate=m=R,y.endUpdate=v=F,p=w,g=b,y.on=e,e.apply(y,arguments)},y;function w(t,e){d.push({link:t,changeType:e})}function b(t,e){d.push({node:t,changeType:e})}function x(t,e){if(void 0===t)throw new Error("Invalid node identifier");m();var r=E(t);return r?(r.data=e,g(r,"update")):(r=new o(t,e),g(r,"add")),n.set(t,r),v(),r}function E(t){return n.get(t)}function S(t){var e=E(t);if(!e)return!1;m();var r=e.links;if(r){e.links=null;for(var i=0;i<r.length;++i)I(r[i])}return n.delete(t),g(e,"remove"),v(),!0}function _(){return n.size}function T(){return c.length}function I(t){if(!t)return!1;var e=i(t,c);if(e<0)return!1;m(),c.splice(e,1);var n=E(t.fromId),r=E(t.toId);return n&&(e=i(t,n.links))>=0&&n.links.splice(e,1),r&&(e=i(t,r.links))>=0&&r.links.splice(e,1),p(t,"remove"),v(),!0}function C(t,e){var n,r=E(t);if(!r||!r.links)return null;for(n=0;n<r.links.length;++n){var i=r.links[n];if(i.fromId===t&&i.toId===e)return i}return null}function A(){}function R(){l+=1}function F(){0==(l-=1)&&d.length>0&&(y.fire("changed",d),d.length=0)}function P(t){if("function"!=typeof t)throw new Error("Function is expected to iterate over graph nodes. You passed "+t);for(var e=n.values(),r=e.next();!r.done;){if(t(r.value))return!0;r=e.next()}}};var r=n(4245);function i(t,e){if(!e)return-1;if(e.indexOf)return e.indexOf(t);var n,r=e.length;for(n=0;n<r;n+=1)if(e[n]===t)return n;return-1}function o(t,e){this.id=t,this.links=null,this.data=e}function a(t,e){t.links?t.links.push(e):t.links=[e]}function s(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function u(t,e){return t.toString()+"ðŸ‘‰ "+e.toString()}},1039:t=>{function e(t,i){if(!(this instanceof e))return new e(t,i);if(Array.isArray(t)||(i=t,t=[]),i=i||{},this.data=t||[],this.length=this.data.length,this.compare=i.compare||r,this.setNodeId=i.setNodeId||n,this.length>0)for(var o=this.length>>1;o>=0;o--)this._down(o);if(i.setNodeId)for(o=0;o<this.length;++o)this.setNodeId(this.data[o],o)}function n(){}function r(t,e){return t-e}t.exports=e,e.prototype={push:function(t){this.data.push(t),this.setNodeId(t,this.length),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this.setNodeId(this.data[0],0),this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},updateItem:function(t){this._down(t),this._up(t)},_up:function(t){for(var e=this.data,n=this.compare,r=this.setNodeId,i=e[t];t>0;){var o=t-1>>1,a=e[o];if(n(i,a)>=0)break;e[t]=a,r(a,t),t=o}e[t]=i,r(i,t)},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t],o=this.setNodeId;t<r;){var a=1+(t<<1),s=a+1,u=e[a];if(s<this.length&&n(e[s],u)<0&&(a=s,u=e[s]),n(u,i)>=0)break;e[t]=u,o(u,t),t=a}e[t]=i,o(i,t)}}},4394:(t,e,n)=>{t.exports=function(t,e){var n=(e=e||{}).oriented,o=e.heuristic;o||(o=a.heuristic);var u=e.distance;u||(u=a.distance);var c=i();return{find:function(e,i){var f=t.getNode(e);if(!f)throw new Error("fromId is not defined in this graph: "+e);var l=t.getNode(i);if(!l)throw new Error("toId is not defined in this graph: "+i);if(f===l)return[f];c.reset();var h=n?function(t,e){if(1===E){if(e.fromId===S.node.id)return T(t,e,S)}else if(2===E&&e.toId===S.node.id)return T(t,e,S)}:function(t,e){return T(t,e,S)},d=new Map,p=new r({compare:a.compareFScore,setNodeId:a.setHeapIndex}),g=new r({compare:a.compareFScore,setNodeId:a.setHeapIndex}),m=c.createNewState(f);d.set(e,m),m.fScore=o(f,l),m.distanceToSource=0,p.push(m),m.open=1;var v=c.createNewState(l);v.fScore=o(l,f),v.distanceToSource=0,g.push(v),v.open=2;for(var y,w,b=Number.POSITIVE_INFINITY,x=p,E=1;p.length>0&&g.length>0;){p.length<g.length?(E=1,x=p):(E=2,x=g);var S=x.pop();if(S.closed=!0,!(S.distanceToSource>b)&&(t.forEachLinkedNode(S.node.id,h),y&&w))return _(y,w)}return s;function _(t,e){for(var n=[],r=t;r;)n.push(r.node),r=r.parent;for(var i=e;i;)n.unshift(i.node),i=i.parent;return n}function T(t,e,n){var r,i=d.get(t.id);if(i||(i=c.createNewState(t),d.set(t.id,i)),!i.closed)if((r=i.open)&&r!==E){var a=i.distanceToSource+n.distanceToSource;a<b&&(y=i,w=n,b=a)}else{var s=n.distanceToSource+u(i.node,n.node,e);if(!(s>=i.distanceToSource)){var h=1===E?l:f,p=s+o(i.node,h);p>=b||(i.fScore=p,0===i.open&&(x.push(i),x.updateItem(i.heapIndex),i.open=E),i.parent=n,i.distanceToSource=s)}}}}}};var r=n(1039),i=n(2492),o=n(4276),a=n(2100),s=a.NO_PATH;t.exports.l2=o.l2,t.exports.l1=o.l1},1005:(t,e,n)=>{t.exports=function(t,e){var n=(e=e||{}).oriented,o=e.heuristic;o||(o=a.heuristic);var c=e.distance;c||(c=a.distance);var f=i();return{find:function(e,i){var l=t.getNode(e);if(!l)throw new Error("fromId is not defined in this graph: "+e);var h=t.getNode(i);if(!h)throw new Error("toId is not defined in this graph: "+i);f.reset();var d,p,g,m=new Map,v=new r({compare:a.compareFScore,setNodeId:a.setHeapIndex}),y=f.createNewState(l);for(m.set(e,y),y.fScore=o(l,h),y.distanceToSource=0,v.push(y),y.open=1;v.length>0;){if(p=d=v.pop(),g=h,p.node===g)return u(d);d.closed=!0,t.forEachLinkedNode(d.node.id,w,n)}return s;function w(t,e){var n=m.get(t.id);if(n||(n=f.createNewState(t),m.set(t.id,n)),!n.closed){0===n.open&&(v.push(n),n.open=1);var r=d.distanceToSource+c(t,d.node,e);r>=n.distanceToSource||(n.parent=d,n.distanceToSource=r,n.fScore=r+o(n.node,h),v.updateItem(n.heapIndex))}}}}};var r=n(1039),i=n(2492),o=n(4276),a=n(2100),s=a.NO_PATH;function u(t){for(var e=[t.node],n=t.parent;n;)e.push(n.node),n=n.parent;return e}t.exports.l2=o.l2,t.exports.l1=o.l1},2100:t=>{var e=[];"function"==typeof Object.freeze&&Object.freeze(e),t.exports={heuristic:function(){return 0},distance:function(){return 1},compareFScore:function(t,e){return t.fScore-e.fScore},NO_PATH:e,setHeapIndex:function(t,e){t.heapIndex=e},setH1:function(t,e){t.h1=e},setH2:function(t,e){t.h2=e},compareF1Score:function(t,e){return t.f1-e.f1},compareF2Score:function(t,e){return t.f2-e.f2}}},4276:t=>{t.exports={l2:function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},l1:function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.abs(n)+Math.abs(r)}}},2492:t=>{function e(t){this.node=t,this.parent=null,this.closed=!1,this.open=0,this.distanceToSource=Number.POSITIVE_INFINITY,this.fScore=Number.POSITIVE_INFINITY,this.heapIndex=-1}t.exports=function(){var t=0,n=[];return{createNewState:function(r){var i=n[t];return i?(i.node=r,i.parent=null,i.closed=!1,i.open=0,i.distanceToSource=Number.POSITIVE_INFINITY,i.fScore=Number.POSITIVE_INFINITY,i.heapIndex=-1):(i=new e(r),n[t]=i),t++,i},reset:function(){t=0}}}},9238:(t,e,n)=>{t.exports=function(t,e){var n=(e=e||{}).oriented,i=e.quitFast,u=e.heuristic;u||(u=o.heuristic);var c=e.distance;c||(c=o.distance);var f=a();return{find:function(e,a){var l=t.getNode(e);if(!l)throw new Error("fromId is not defined in this graph: "+e);var h=t.getNode(a);if(!h)throw new Error("toId is not defined in this graph: "+a);f.reset();var d,p=n?function(t,e){if(e.fromId===S.node.id)return T(t,e)}:T,g=n?function(t,e){if(e.toId===S.node.id)return I(t,e)}:I,m=new Map,v=new r({compare:o.compareF1Score,setNodeId:o.setH1}),y=new r({compare:o.compareF2Score,setNodeId:o.setH2}),w=Number.POSITIVE_INFINITY,b=f.createNewState(l);m.set(e,b),b.g1=0;var x=u(l,h);b.f1=x,v.push(b);var E=f.createNewState(h);m.set(a,E),E.g2=0;var S,_=x;for(E.f2=_,y.push(E);y.length&&v.length&&(v.length<y.length?(S=v.pop()).closed||(S.closed=!0,S.f1<w&&S.g1+_-u(l,S.node)<w&&t.forEachLinkedNode(S.node.id,p),v.length>0&&(x=v.peek().f1)):(S=y.pop()).closed||(S.closed=!0,S.f2<w&&S.g2+x-u(S.node,h)<w&&t.forEachLinkedNode(S.node.id,g),y.length>0&&(_=y.peek().f2)),!i||!d););return function(t){if(!t)return s;for(var e=[t.node],n=t.p1;n;)e.push(n.node),n=n.p1;for(var r=t.p2;r;)e.unshift(r.node),r=r.p2;return e}(d);function T(t,e){var n=m.get(t.id);if(n||(n=f.createNewState(t),m.set(t.id,n)),!n.closed){var r=S.g1+c(S.node,t,e);r<n.g1&&(n.g1=r,n.f1=r+u(n.node,h),n.p1=S,n.h1<0?v.push(n):v.updateItem(n.h1));var i=n.g1+n.g2;i<w&&(w=i,d=n)}}function I(t,e){var n=m.get(t.id);if(n||(n=f.createNewState(t),m.set(t.id,n)),!n.closed){var r=S.g2+c(S.node,t,e);r<n.g2&&(n.g2=r,n.f2=r+u(l,n.node),n.p2=S,n.h2<0?y.push(n):y.updateItem(n.h2));var i=n.g1+n.g2;i<w&&(w=i,d=n)}}}}};var r=n(1039),i=n(4276),o=n(2100),a=n(7653),s=o.NO_PATH;t.exports.l2=i.l2,t.exports.l1=i.l1},7653:t=>{function e(t){this.node=t,this.p1=null,this.p2=null,this.closed=!1,this.g1=Number.POSITIVE_INFINITY,this.g2=Number.POSITIVE_INFINITY,this.f1=Number.POSITIVE_INFINITY,this.f2=Number.POSITIVE_INFINITY,this.h1=-1,this.h2=-1}t.exports=function(){var t=0,n=[];return{createNewState:function(r){var i=n[t];return i?(i.node=r,i.p1=null,i.p2=null,i.closed=!1,i.g1=Number.POSITIVE_INFINITY,i.g2=Number.POSITIVE_INFINITY,i.f1=Number.POSITIVE_INFINITY,i.f2=Number.POSITIVE_INFINITY,i.h1=-1,i.h2=-1):(i=new e(r),n[t]=i),t++,i},reset:function(){t=0}}}},4901:(t,e,n)=>{t.exports={aStar:n(1005),aGreedy:n(4394),nba:n(9238)}},3614:(t,e,n)=>{"use strict";t.exports=i;var r=n(645);function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o=4294967296,a=1/o,s="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function u(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function c(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function f(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function l(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function h(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function g(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function m(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function v(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function y(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function w(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function x(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function E(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=E(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=b(this.buf,this.pos)+b(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=b(this.buf,this.pos)+E(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return c(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return c(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return c(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return c(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return c(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return c(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&s?function(t,e,n){return s.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,u=t[i],c=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f>n)break;1===f?u<128&&(c=u):2===f?128==(192&(o=t[i+1]))&&(c=(31&u)<<6|63&o)<=127&&(c=null):3===f?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((c=(15&u)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===f&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,f=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=f}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var n=u(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&f(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&f(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,i.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,l,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,v,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,w,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},9161:(t,e,n)=>{t.exports=a;var r,i=n(7040),o=n(4669);function a(t,e){var n=(e=e||{}).history||o(t,e);!function(t){if(!t)throw new Error("history is required");if("function"!=typeof t.dispose)throw new Error("dispose is required");if("function"!=typeof t.onChanged)throw new Error("onChanged is required")}(n),n.onChanged((function(t){r=t,s.fire("change",r)}));var r=n.get()||Object.create(null),a={get:function(t){return void 0===t?r:r[t]},set:function(t,e){var i=typeof t;return"object"===i?Object.keys(t).forEach((function(e){r[e]=t[e]})):"string"===i&&(r[t]=e),n.set(r),a},unset:function(t){if(t in r)return delete r[t],n.set(r),a},setIfEmpty:function(t,e){if("object"==typeof t&&Object.keys(t).forEach((function(e){e in r||(r[e]=t[e])})),!(t in r))return r[t]=e,n.set(r),a},dispose:function(){n.dispose(),s.off()},onChange:function(t,e){s.on("change",t,e)},offChange:function(t,e){s.off("change",t,e)},getHistoryObject:function(){return n}},s=i({});return a}a.instance=function(t,e){return r?t&&r.setIfEmpty(t):r=a(t,e),r}},1827:t=>{t.exports=function(t){var e=[],n=t;return{dispose:function(){e=[]},onChanged:function(t){if("function"!=typeof t)throw new Error("changeCallback should be a function");e.push(t)},set:function(t){n=t,setTimeout((function(){var n;n=t,e.forEach((function(t){t(n)}))}),0)},get:function(){return n}}}},8513:t=>{function e(t){return encodeURIComponent(t).replace(/[()]/g,n)}function n(t){return")"===t?"%29":"("===t?"%28":t}t.exports={parse:function(t){var e=Object.create(null);return t?(t.split("&").forEach((function(t){if(t){var n,r,i,o=t.split("=");e[decodeURIComponent(o[0])]=(i=o[1],""===(i=decodeURIComponent(i))?i:isNaN(i)?"true"===(r=i)||"false"===r?"true"===i:(n=i)&&n.match(/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/)?new Date(i):i:parseFloat(i))}})),e):e},stringify:function(t){return t?Object.keys(t).map((function(n){var r=t[n],i=e(n);return void 0!==r&&(i+="="+function(t){return t instanceof Date&&(t=t.toISOString()),e(t)}(r)),i})).join("&"):""}}},4669:(t,e,n)=>{t.exports=function(t,e){if("undefined"==typeof window)return r(t);var n,o,a=[],s=e&&e.useSearch,u=s?"?":"#?";return e.rewriteHashToSearch&&c(),n=h(),o=!1,"object"==typeof t&&t&&Object.keys(t).forEach((function(e){e in n||(n[e]=t[e],o=!0)})),o&&f(n),{onChanged:function(t){if("function"!=typeof t)throw new Error("changeCallback needs to be a function");0===a.length&&window.addEventListener("hashchange",l,!1),a.push(t)},dispose:function(){0!==a.length&&(a=[],window.removeEventListener("hashchange",l,!1))},set:f,get:h,rewriteHashToSearch:c};function c(){var t=Object.create(null),e=window.location.search;e&&(t=Object.assign(t,i.parse(e.substr(1))));var n=window.location.hash;n&&(t=Object.assign(t,i.parse(n.substr(2)))),f(t)}function f(t){var e=u+i.stringify(t);s&&window.location.hash&&(e+=window.location.hash),window.history?window.history.replaceState(void 0,void 0,e):window.location.replace(e)}function l(){!function(t){for(var e=0;e<a.length;++e)(0,a[e])(t)}(h())}function h(){var t=((s?window.location.search:window.location.hash)||u).substr(u.length);return i.parse(t)}};var r=n(1827),i=n(8513)},7040:t=>{t.exports=function(t){!function(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}(t);var e=function(t){var e=Object.create(null);return{on:function(n,r,i){if("function"!=typeof r)throw new Error("callback is expected to be a function");var o=e[n];return o||(o=e[n]=[]),o.push({callback:r,ctx:i}),t},off:function(n,r){if(void 0===n)return e=Object.create(null),t;if(e[n])if("function"!=typeof r)delete e[n];else for(var i=e[n],o=0;o<i.length;++o)i[o].callback===r&&i.splice(o,1);return t},fire:function(n){var r,i=e[n];if(!i)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var o=0;o<i.length;++o){var a=i[o];a.callback.apply(a.ctx,r)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},3959:t=>{t.exports=function(t,e,n,r){var i=0,o=0,a=(r=r||{}).step||1,s=r.maxTimeMS||8,u=r.probeElements||5e3;setTimeout((function r(){var c=Math.min(t.length,i+u),f=i,l=new Date;for(f=i;f<c;f+=a)e(t[f],f,t);f<t.length?(o+=new Date-l,i=f,u=Math.round(i*s/o),setTimeout(r,0)):n(t)}),0)}},7621:(t,e,n)=>{var r;!function(i){var o=/^\s+/,a=/\s+$/,s=0,u=i.round,c=i.min,f=i.max,l=i.random;function h(t,e){if(e=e||{},(t=t||"")instanceof h)return t;if(!(this instanceof h))return new h(t,e);var n=function(t){var e={r:0,g:0,b:0},n=1,r=null,s=null,u=null,l=!1,h=!1;return"string"==typeof t&&(t=function(t){t=t.replace(o,"").replace(a,"").toLowerCase();var e,n=!1;if(F[t])t=F[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=V.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=V.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=V.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=V.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=V.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=V.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=V.hex8.exec(t))?{r:M(e[1]),g:M(e[2]),b:M(e[3]),a:H(e[4]),format:n?"name":"hex8"}:(e=V.hex6.exec(t))?{r:M(e[1]),g:M(e[2]),b:M(e[3]),format:n?"name":"hex"}:(e=V.hex4.exec(t))?{r:M(e[1]+""+e[1]),g:M(e[2]+""+e[2]),b:M(e[3]+""+e[3]),a:H(e[4]+""+e[4]),format:n?"name":"hex8"}:!!(e=V.hex3.exec(t))&&{r:M(e[1]+""+e[1]),g:M(e[2]+""+e[2]),b:M(e[3]+""+e[3]),format:n?"name":"hex"}}(t)),"object"==typeof t&&(D(t.r)&&D(t.g)&&D(t.b)?(e=function(t,e,n){return{r:255*O(t,255),g:255*O(e,255),b:255*O(n,255)}}(t.r,t.g,t.b),l=!0,h="%"===String(t.r).substr(-1)?"prgb":"rgb"):D(t.h)&&D(t.s)&&D(t.v)?(r=B(t.s),s=B(t.v),e=function(t,e,n){t=6*O(t,360),e=O(e,100),n=O(n,100);var r=i.floor(t),o=t-r,a=n*(1-e),s=n*(1-o*e),u=n*(1-(1-o)*e),c=r%6;return{r:255*[n,s,a,a,u,n][c],g:255*[u,n,n,s,a,a][c],b:255*[a,a,u,n,n,s][c]}}(t.h,r,s),l=!0,h="hsv"):D(t.h)&&D(t.s)&&D(t.l)&&(r=B(t.s),u=B(t.l),e=function(t,e,n){var r,i,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=O(t,360),e=O(e,100),n=O(n,100),0===e)r=i=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;r=a(u,s,t+1/3),i=a(u,s,t),o=a(u,s,t-1/3)}return{r:255*r,g:255*i,b:255*o}}(t.h,r,u),l=!0,h="hsl"),t.hasOwnProperty("a")&&(n=t.a)),n=N(n),{ok:l,format:t.format||h,r:c(255,f(e.r,0)),g:c(255,f(e.g,0)),b:c(255,f(e.b,0)),a:n}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=u(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=u(this._r)),this._g<1&&(this._g=u(this._g)),this._b<1&&(this._b=u(this._b)),this._ok=n.ok,this._tc_id=s++}function d(t,e,n){t=O(t,255),e=O(e,255),n=O(n,255);var r,i,o=f(t,e,n),a=c(t,e,n),s=(o+a)/2;if(o==a)r=i=0;else{var u=o-a;switch(i=s>.5?u/(2-o-a):u/(o+a),o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,l:s}}function p(t,e,n){t=O(t,255),e=O(e,255),n=O(n,255);var r,i,o=f(t,e,n),a=c(t,e,n),s=o,u=o-a;if(i=0===o?0:u/o,o==a)r=0;else{switch(o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,v:s}}function g(t,e,n,r){var i=[L(u(t).toString(16)),L(u(e).toString(16)),L(u(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function m(t,e,n,r){return[L(Z(r)),L(u(t).toString(16)),L(u(e).toString(16)),L(u(n).toString(16))].join("")}function v(t,e){e=0===e?0:e||10;var n=h(t).toHsl();return n.s-=e/100,n.s=k(n.s),h(n)}function y(t,e){e=0===e?0:e||10;var n=h(t).toHsl();return n.s+=e/100,n.s=k(n.s),h(n)}function w(t){return h(t).desaturate(100)}function b(t,e){e=0===e?0:e||10;var n=h(t).toHsl();return n.l+=e/100,n.l=k(n.l),h(n)}function x(t,e){e=0===e?0:e||10;var n=h(t).toRgb();return n.r=f(0,c(255,n.r-u(-e/100*255))),n.g=f(0,c(255,n.g-u(-e/100*255))),n.b=f(0,c(255,n.b-u(-e/100*255))),h(n)}function E(t,e){e=0===e?0:e||10;var n=h(t).toHsl();return n.l-=e/100,n.l=k(n.l),h(n)}function S(t,e){var n=h(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,h(n)}function _(t){var e=h(t).toHsl();return e.h=(e.h+180)%360,h(e)}function T(t){var e=h(t).toHsl(),n=e.h;return[h(t),h({h:(n+120)%360,s:e.s,l:e.l}),h({h:(n+240)%360,s:e.s,l:e.l})]}function I(t){var e=h(t).toHsl(),n=e.h;return[h(t),h({h:(n+90)%360,s:e.s,l:e.l}),h({h:(n+180)%360,s:e.s,l:e.l}),h({h:(n+270)%360,s:e.s,l:e.l})]}function C(t){var e=h(t).toHsl(),n=e.h;return[h(t),h({h:(n+72)%360,s:e.s,l:e.l}),h({h:(n+216)%360,s:e.s,l:e.l})]}function A(t,e,n){e=e||6,n=n||30;var r=h(t).toHsl(),i=360/n,o=[h(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(h(r));return o}function R(t,e){e=e||6;for(var n=h(t).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/e;e--;)a.push(h({h:r,s:i,v:o})),o=(o+s)%1;return a}h.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r=this.toRgb();return t=r.r/255,e=r.g/255,n=r.b/255,.2126*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=N(t),this._roundA=u(100*this._a)/100,this},toHsv:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=p(this._r,this._g,this._b),e=u(360*t.h),n=u(100*t.s),r=u(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=d(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=d(this._r,this._g,this._b),e=u(360*t.h),n=u(100*t.s),r=u(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return g(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var o=[L(u(t).toString(16)),L(u(e).toString(16)),L(u(n).toString(16)),L(Z(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:u(this._r),g:u(this._g),b:u(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+u(this._r)+", "+u(this._g)+", "+u(this._b)+")":"rgba("+u(this._r)+", "+u(this._g)+", "+u(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:u(100*O(this._r,255))+"%",g:u(100*O(this._g,255))+"%",b:u(100*O(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+u(100*O(this._r,255))+"%, "+u(100*O(this._g,255))+"%, "+u(100*O(this._b,255))+"%)":"rgba("+u(100*O(this._r,255))+"%, "+u(100*O(this._g,255))+"%, "+u(100*O(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(P[g(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+m(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=h(t);n="#"+m(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return h(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(E,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(R,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(T,arguments)},tetrad:function(){return this._applyCombination(I,arguments)}},h.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:B(t[r]));t=n}return h(t,e)},h.equals=function(t,e){return!(!t||!e)&&h(t).toRgbString()==h(e).toRgbString()},h.random=function(){return h.fromRatio({r:l(),g:l(),b:l()})},h.mix=function(t,e,n){n=0===n?0:n||50;var r=h(t).toRgb(),i=h(e).toRgb(),o=n/100;return h({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},h.readability=function(t,e){var n=h(t),r=h(e);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},h.isReadable=function(t,e,n){var r,i,o,a,s,u=h.readability(t,e);switch(i=!1,(o=n,"AA"!==(a=((o=o||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==a&&(a="AA"),"small"!==(s=(o.size||"small").toLowerCase())&&"large"!==s&&(s="small"),r={level:a,size:s}).level+r.size){case"AAsmall":case"AAAlarge":i=u>=4.5;break;case"AAlarge":i=u>=3;break;case"AAAsmall":i=u>=7}return i},h.mostReadable=function(t,e,n){var r,i,o,a,s=null,u=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var c=0;c<e.length;c++)(r=h.readability(t,e[c]))>u&&(u=r,s=h(e[c]));return h.isReadable(t,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,h.mostReadable(t,["#fff","#000"],n))};var F=h.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},P=h.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(F);function N(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function O(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=c(e,f(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),i.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function k(t){return c(1,f(0,t))}function M(t){return parseInt(t,16)}function L(t){return 1==t.length?"0"+t:""+t}function B(t){return t<=1&&(t=100*t+"%"),t}function Z(t){return i.round(255*parseFloat(t)).toString(16)}function H(t){return M(t)/255}var Y,j,W,V=(j="[\\s|\\(]+("+(Y="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+Y+")[,|\\s]+("+Y+")\\s*\\)?",W="[\\s|\\(]+("+Y+")[,|\\s]+("+Y+")[,|\\s]+("+Y+")[,|\\s]+("+Y+")\\s*\\)?",{CSS_UNIT:new RegExp(Y),rgb:new RegExp("rgb"+j),rgba:new RegExp("rgba"+W),hsl:new RegExp("hsl"+j),hsla:new RegExp("hsla"+W),hsv:new RegExp("hsv"+j),hsva:new RegExp("hsva"+W),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function D(t){return!!V.CSS_UNIT.exec(t)}t.exports?t.exports=h:void 0===(r=function(){return h}.call(e,n,e,t))||(t.exports=r)}(Math)},4964:(t,e,n)=>{"use strict";n.r(e),n.d(e,{scene:()=>j,PointCollection:()=>K,Point:()=>tt,LineCollection:()=>at,WireCollection:()=>ut,LineStripCollection:()=>ft,Element:()=>Y,isWebGLEnabled:()=>lt,utils:()=>W});var r,i,o,a=c,s=c,u="";function c(t,e,n){f(t,o,e,n),"DOMMouseScroll"==o&&f(t,"MozMousePixelScroll",e,n)}function f(t,e,n,i){t[r](u+e,"wheel"==o?n:function(t){!t&&(t=window.event);var e={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaY:0,deltaZ:0,clientX:t.clientX,clientY:t.clientY,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1},stopPropagation:function(){t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){t.stopImmediatePropagation&&t.stopImmediatePropagation()}};return"mousewheel"==o?(e.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(e.deltaX=-1/40*t.wheelDeltaX)):e.deltaY=t.detail,n(e)},i||!1)}function l(t,e,n,r){t[i](u+e,n,r||!1)}!function(t,e){t&&t.addEventListener?(r="addEventListener",i="removeEventListener"):(r="attachEvent",i="detachEvent",u="on"),o=e?"onwheel"in e.createElement("div")?"wheel":void 0!==e.onmousewheel?"mousewheel":"DOMMouseScroll":"wheel"}("undefined"!=typeof window&&window,"undefined"!=typeof document&&document),a.addWheelListener=s,a.removeWheelListener=function(t,e,n){l(t,o,e,n),"DOMMouseScroll"==o&&l(t,"MozMousePixelScroll",e,n)};var h=.1,d="function"==typeof Float32Array;function p(t,e){return 1-3*e+3*t}function g(t,e){return 3*e-6*t}function m(t){return 3*t}function v(t,e,n){return((p(e,n)*t+g(e,n))*t+m(e))*t}function y(t,e,n){return 3*p(e,n)*t*t+2*g(e,n)*t+m(e)}function w(t){return t}var b=function(t,e,n,r){if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===r)return w;for(var i=d?new Float32Array(11):new Array(11),o=0;o<11;++o)i[o]=v(o*h,t,n);return function(o){return 0===o?0:1===o?1:v(function(e){for(var r=0,o=1;10!==o&&i[o]<=e;++o)r+=h;--o;var a=r+(e-i[o])/(i[o+1]-i[o])*h,s=y(a,t,n);return s>=.001?function(t,e,n,r){for(var i=0;i<4;++i){var o=y(e,n,r);if(0===o)return e;e-=(v(e,n,r)-t)/o}return e}(e,a,t,n):0===s?a:function(t,e,n,r,i){var o,a,s=0;do{(o=v(a=e+(n-e)/2,r,i)-t)>0?n=a:e=a}while(Math.abs(o)>1e-7&&++s<10);return a}(e,r,r+h,t,n)}(o),e,r)}},x={ease:b(.25,.1,.25,1),easeIn:b(.42,0,1,1),easeOut:b(0,0,.58,1),easeInOut:b(.42,0,.58,1),linear:b(0,0,1,1)},E=function(t,e,n){var r=Object.create(null),i=Object.create(null),o="function"==typeof(n=n||{}).easing?n.easing:x[n.easing];o||(n.easing&&console.warn("Unknown easing function in amator: "+n.easing),o=x.ease);var a="function"==typeof n.step?n.step:T,s="function"==typeof n.done?n.done:T,u=function(t){if(!t)return"undefined"!=typeof window&&window.requestAnimationFrame?{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}:{next:function(t){return setTimeout(t,1e3/60)},cancel:function(t){return clearTimeout(t)}};if("function"!=typeof t.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!=typeof t.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return t}(n.scheduler),c=Object.keys(e);c.forEach((function(n){r[n]=t[n],i[n]=e[n]-t[n]}));var f,l="number"==typeof n.duration?n.duration:400,h=Math.max(1,.06*l),d=0;return f=u.next((function e(){var n=o(d/h);d+=1,function(e){c.forEach((function(n){t[n]=i[n]*e+r[n]}))}(n),d<=h?(f=u.next(e),a(t)):(f=0,setTimeout((function(){s(t)}),0))})),{cancel:function(){u.cancel(f),f=0}}},S=I,_=I();function T(){}function I(){var t=new Set,e=new Set,n=0;return{next:r,cancel:r,clearAll:function(){t.clear(),e.clear(),cancelAnimationFrame(n),n=0}};function r(t){e.add(t),n||(n=requestAnimationFrame(i))}function i(){n=0;var r=e;e=t,(t=r).forEach((function(t){t()})),t.clear()}}E.makeAggregateRaf=S,E.sharedScheduler=_;var C="function"!=typeof Event;function A(t){return t.stopPropagation(),!1}var R,F,P,N=function(){this.x=0,this.y=0,this.scale=1},O={capture:function(t){F=window.document.onselectstart,P=window.document.ondragstart,window.document.onselectstart=A,(R=t).ondragstart=A},release:function(){window.document.onselectstart=F,R&&(R.ondragstart=P)}},k=function(t,e){var n=(e=e||{}).controller;if(n||(t instanceof SVGElement&&(n=function(t){if(!(t instanceof SVGElement))throw new Error("svg element is required for svg.panzoom to work");var e=t.ownerSVGElement;if(!e)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");return e.setAttribute("tabindex",1),{getBBox:function(){var e=t.getBBox();return{left:e.x,top:e.y,width:e.width,height:e.height}},getScreenCTM:function(){return e.getScreenCTM()},getOwner:function(){return e},applyTransform:function(e){t.setAttribute("transform","matrix("+e.scale+" 0 0 "+e.scale+" "+e.x+" "+e.y+")")},initTransform:function(n){var r=t.getScreenCTM();n.x=r.e,n.y=r.f,n.scale=r.a,e.removeAttributeNS(null,"viewBox")}}}(t)),t instanceof HTMLElement&&(n=function(t){if(!(t instanceof HTMLElement))throw new Error("svg element is required for svg.panzoom to work");var e=t.parentElement;if(!e)throw new Error("Do not apply panzoom to the detached DOM element. ");return t.scrollTop=0,e.setAttribute("tabindex",1),{getBBox:function(){return{left:0,top:0,width:t.clientWidth,height:t.clientHeight}},getOwner:function(){return e},applyTransform:function(e){t.style.transformOrigin="0 0 0",t.style.transform="matrix("+e.scale+", 0, 0, "+e.scale+", "+e.x+", "+e.y+")"}}}(t))),!n)throw new Error("Cannot create panzoom for the current type of dom element");var r=n.getOwner(),i={x:0,y:0},o=!1,s=new N;n.initTransform&&n.initTransform(s);var u,c="boolean"==typeof e.realPinch&&e.realPinch,f=e.bounds,l="number"==typeof e.maxZoom?e.maxZoom:Number.POSITIVE_INFINITY,h="number"==typeof e.minZoom?e.minZoom:0,d="number"==typeof e.boundsPadding?e.boundsPadding:.05,p="number"==typeof e.zoomDoubleClickSpeed?e.zoomDoubleClickSpeed:1.75,g=e.beforeWheel||M,m="number"==typeof e.zoomSpeed?e.zoomSpeed:.065;(function(t){var e=typeof t;if("undefined"!==e&&"boolean"!==e&&!(L(t.left)&&L(t.top)&&L(t.bottom)&&L(t.right)))throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")})(f),e.autocenter&&function(){var t,e,i=0,o=0,a=Z();a?(i=a.left,o=a.top,t=a.right-a.left,e=a.bottom-a.top):(t=r.clientWidth,e=r.clientHeight);var u=n.getBBox();if(0!==u.width&&0!==u.height){var c=e/u.height,f=t/u.width,l=Math.min(f,c);s.x=-(u.left+u.width/2)*l+t/2+i,s.y=-(u.top+u.height/2)*l+e/2+o,s.scale=l}}();var v,y,w,b,x,S,_,T=0,I=!1,A=!1;return b="smoothScroll"in e&&!e.smoothScroll?{start:M,stop:M,cancel:M}:function(t,e,n){"object"!=typeof n&&(n={});var r,i,o,a,s,u,c,f,l,h,d="number"==typeof n.minVelocity?n.minVelocity:5,p="number"==typeof n.amplitude?n.amplitude:.25;return{start:function(){r=t(),u=l=a=c=0,i=new Date,window.clearInterval(o),window.cancelAnimationFrame(h),o=window.setInterval(g,100)},stop:function(){window.clearInterval(o),window.cancelAnimationFrame(h);var e=t();s=e.x,f=e.y,i=Date.now(),(a<-d||a>d)&&(s+=u=p*a),(c<-d||c>d)&&(f+=l=p*c),h=window.requestAnimationFrame(m)},cancel:function(){window.clearInterval(o),window.cancelAnimationFrame(h)}};function g(){var e=Date.now(),n=e-i;i=e;var o=t(),s=o.x-r.x,u=o.y-r.y;r=o;var f=1e3/(1+n);a=.8*s*f+.2*a,c=.8*u*f+.2*c}function m(){var t=Date.now()-i,n=!1,r=0,o=0;u&&((r=-u*Math.exp(-t/342))>.5||r<-.5?n=!0:r=u=0),l&&((o=-l*Math.exp(-t/342))>.5||o<-.5?n=!0:o=l=0),n&&(e(s+r,f+o),h=window.requestAnimationFrame(m))}}((function(){return{x:s.x,y:s.y}}),(function(t,e){st(),F(t,e)}),e.smoothScroll),r.addEventListener("mousedown",J),r.addEventListener("dblclick",G),r.addEventListener("touchstart",X),r.addEventListener("keydown",D),a.addWheelListener(r,nt),H(),{dispose:function(){a.removeWheelListener(r,nt),r.removeEventListener("mousedown",J),r.removeEventListener("keydown",D),r.removeEventListener("dblclick",G),u&&(window.cancelAnimationFrame(u),u=0),b.cancel(),tt(),et(),ft()},moveBy:W,moveTo:F,centerOn:function(t){var e=t.ownerSVGElement;if(!e)throw new Error("ui element is required to be within the scene");var n=t.getBoundingClientRect(),r=n.left+n.width/2,i=n.top+n.height/2,o=e.getBoundingClientRect();W(o.width/2-r,o.height/2-i,!0)},zoomTo:at,zoomAbs:j,getTransform:function(){return s},showRectangle:function(t){var e=R(r.clientWidth,r.clientHeight),n=t.right-t.left,i=t.bottom-t.top;if(!Number.isFinite(n)||!Number.isFinite(i))throw new Error("Invalid rectangle");var o=e.x/n,a=e.y/i,u=Math.min(o,a);s.x=-(t.left+n/2)*u+e.x/2,s.y=-(t.top+i/2)*u+e.y/2,s.scale=u}};function R(t,e){if(n.getScreenCTM){var r=n.getScreenCTM(),o=r.a,a=r.d,s=r.e,u=r.f;i.x=t*o-s,i.y=e*a-u}else i.x=t,i.y=e;return i}function F(t,e){s.x=t,s.y=e,k(),lt("pan"),H()}function P(t,e){F(s.x+t,s.y+e)}function k(){var t=Z();if(t){var e,r,i,o,a=!1,u=(i=(e=n.getBBox()).left,o=e.top,{left:(r={x:i*s.scale+s.x,y:o*s.scale+s.y}).x,top:r.y,right:e.width*s.scale+r.x,bottom:e.height*s.scale+r.y}),c=t.left-u.right;return c>0&&(s.x+=c,a=!0),(c=t.right-u.left)<0&&(s.x+=c,a=!0),(c=t.top-u.bottom)>0&&(s.y+=c,a=!0),(c=t.bottom-u.top)<0&&(s.y+=c,a=!0),a}}function Z(){if(f){if("boolean"==typeof f){var t=r.clientWidth,e=r.clientHeight;return{left:t*d,top:e*d,right:t*(1-d),bottom:e*(1-d)}}return f}}function H(){o=!0,u=window.requestAnimationFrame(V)}function Y(t,e,n){if(B(t)||B(e)||B(n))throw new Error("zoom requires valid numbers");var r=s.scale*n;if(r<h){if(s.scale===h)return;n=h/s.scale}if(r>l){if(s.scale===l)return;n=l/s.scale}var i=R(t,e);s.x=i.x-n*(i.x-s.x),s.y=i.y-n*(i.y-s.y),k()||(s.scale*=n),lt("zoom"),H()}function j(t,e,n){Y(t,e,n/s.scale)}function W(t,e,n){if(!n)return P(t,e);x&&x.cancel();var r=0,i=0;x=E({x:0,y:0},{x:t,y:e},{step:function(t){P(t.x-r,t.y-i),r=t.x,i=t.y}})}function V(){o&&(o=!1,n.applyTransform(s),lt("transform"),u=0)}function D(t){var e=0,n=0,i=0;if(38===t.keyCode?n=1:40===t.keyCode?n=-1:37===t.keyCode?e=1:39===t.keyCode?e=-1:189===t.keyCode||109===t.keyCode?i=1:187!==t.keyCode&&107!==t.keyCode||(i=-1),e||n){t.preventDefault(),t.stopPropagation();var o=r.getBoundingClientRect(),a=Math.min(o.width,o.height);W(.05*a*e,.05*a*n)}if(i){var s=ut(i);at(r.clientWidth/2,r.clientHeight/2,s)}}function X(t){if(function(t){e.onTouch&&!e.onTouch(t)||(t.stopPropagation(),t.preventDefault())}(t),1===t.touches.length)return function(t){var e=it(t.touches[0],t.target);v=e.x,y=e.y,$()}(t,t.touches[0]);2===t.touches.length&&(w=U(t.touches[0],t.touches[1]),_=!0,$())}function $(){I||(I=!0,document.addEventListener("touchmove",q),document.addEventListener("touchend",z),document.addEventListener("touchcancel",z))}function q(t){if(1===t.touches.length){t.stopPropagation();var e=it(t.touches[0],t.target),n=e.x-v,r=e.y-y;0!==n&&0!==r&&ct(),v=e.x,y=e.y;var i=R(n,r);W(i.x,i.y)}else if(2===t.touches.length){_=!0;var o=t.touches[0],a=t.touches[1],s=U(o,a),u=1;if(c)u=s/w;else{var f=0;s<w?f=1:s>w&&(f=-1),u=ut(f)}v=(o.clientX+a.clientX)/2,y=(o.clientY+a.clientY)/2,at(v,y,u),w=s,t.stopPropagation(),t.preventDefault()}}function z(t){if(t.touches.length>0){var e=it(t.touches[0],t.target);v=e.x,y=e.y}else{var n=new Date;n-T<300&&ot(v,y,p),T=n,I=!1,ft(),et()}}function U(t,e){return Math.sqrt((t.clientX-e.clientX)*(t.clientX-e.clientX)+(t.clientY-e.clientY)*(t.clientY-e.clientY))}function G(t){var e=rt(t);ot(e.x,e.y,p),t.preventDefault(),t.stopPropagation()}function J(t){if(I)return t.stopPropagation(),!1;if(1===t.button&&null!==window.event||0===t.button){var e=rt(t),n=R(e.x,e.y);return v=n.x,y=n.y,document.addEventListener("mousemove",Q),document.addEventListener("mouseup",K),O.capture(t.target||t.srcElement),!1}}function Q(t){if(!I){ct();var e=rt(t),n=R(e.x,e.y),r=n.x-v,i=n.y-y;v=n.x,y=n.y,W(r,i)}}function K(){O.release(),ft(),tt()}function tt(){document.removeEventListener("mousemove",Q),document.removeEventListener("mouseup",K),A=!1}function et(){document.removeEventListener("touchmove",q),document.removeEventListener("touchend",z),document.removeEventListener("touchcancel",z),A=!1,_=!1}function nt(t){if(!g(t)){b.cancel();var e=ut(t.deltaY);if(1!==e){var n=rt(t);at(n.x,n.y,e),t.preventDefault()}}}function rt(t){var e=t.offsetX,n=t.offsetY;if(void 0===e){var r=t.target.getBoundingClientRect();e=t.clientX-r.left,n=t.clientY-r.top}return{x:e,y:n}}function it(t,e){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}function ot(t,e,n){var r=s.scale,i={scale:r},o={scale:n*r};b.cancel(),st(),lt("zoom"),S=E(i,o,{step:function(n){j(t,e,n.scale)}})}function at(t,e,n){return b.cancel(),st(),Y(t,e,n)}function st(){S&&(S.cancel(),S=null)}function ut(t){var e=1;return t>0?e=1-m:t<0&&(e=1+m),e}function ct(){A||(lt("panstart"),A=!0,b.start())}function ft(){A&&(_||b.stop(),lt("panend"))}function lt(e){var n=function(t){if(C){var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!0,!0,void 0),e}return new Event(t,{bubbles:!0})}(e);t.dispatchEvent(n)}};function M(){}function L(t){return Number.isFinite(t)}function B(t){return Number.isNaN?Number.isNaN(t):t!=t}var Z=function(t,e,n){t=t||1,e=e||0,n=n||0,this._array=[t,0,0,0,0,t,0,0,0,0,1,0,e,n,0,1]},H={scale:{},dx:{},dy:{}};Z.prototype.multiply=function(t,e){var n=t.scale*e.scale,r=t.scale*e.dx+t.dx,i=t.scale*e.dy+t.dy;return this.scale=n,this.dx=r,this.dy=i,this},H.scale.get=function(){return this._array[0]},H.dx.get=function(){return this._array[12]},H.dy.get=function(){return this._array[13]},H.dx.set=function(t){this._array[12]=t},H.dy.set=function(t){this._array[13]=t},H.scale.set=function(t){this._array[0]=t,this._array[5]=t},Z.prototype.copyTo=function(t){return function(t,e){if(t.length!==e.length)throw new Error("Array length mismatch");for(var n=0;n<t.length;++n)e[n]=t[n]}(this._array,t._array),this},Z.prototype.getArray=function(){return this._array},Object.defineProperties(Z.prototype,H);var Y=function(){this.children=[],this.transform=new Z,this.worldTransform=new Z,this.worldTransformNeedsUpdate=!0,this.type="Element",this.scene=null};Y.prototype.appendChild=function(t,e){t.parent=this,e?this.children.unshift(t):this.children.push(t),t.bindScene&&t.bindScene(this.scene),this.scene&&this.scene.renderFrame()},Y.prototype.bindScene=function(t){this.scene=t},Y.prototype.traverse=function(t,e){t(this);for(var n=0;n<this.children.length;++n)this.children[n].traverse(t,e);e&&e(this)},Y.prototype.removeChild=function(t){var e=this.children.indexOf(t);e>-1&&this.children.splice(e,1),this.scene&&this.scene.renderFrame()},Y.prototype.updateWorldTransform=function(t){(this.worldTransformNeedsUpdate||t)&&(this.parent?this.worldTransform.multiply(this.parent.worldTransform,this.transform):this.transform.copyTo(this.worldTransform),this.worldTransformNeedsUpdate=!1,t=!0);for(var e=t,n=this.children,r=0;r<n.length;r++)e=n[r].updateWorldTransform(t)||e;return e},Y.prototype.draw=function(t,e){for(var n=0;n<this.children.length;++n)this.children[n].draw(t,e)},Y.prototype.dispose=function(){for(var t=0;t<this.children.length;++t)this.children[t].dispose()};function j(t,e){var n,r,i={width:0,height:0},o=window.devicePixelRatio;e||(e={});var a=e.wglContext,s=t.getContext("webgl",a)||t.getContext("experimental-webgl",a);s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),s.enable(s.BLEND),s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT);var u=0,c=new Y;g();var f,l=function(t){!function(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}(t);var e=function(t){var e=Object.create(null);return{on:function(n,r,i){if("function"!=typeof r)throw new Error("callback is expected to be a function");var o=e[n];return o||(o=e[n]=[]),o.push({callback:r,ctx:i}),t},off:function(n,r){if(void 0===n)return e=Object.create(null),t;if(e[n])if("function"!=typeof r)delete e[n];else for(var i=e[n],o=0;o<i.length;++o)i[o].callback===r&&i.splice(o,1);return t},fire:function(n){var r,i=e[n];if(!i)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var o=0;o<i.length;++o){var a=i[o];a.callback.apply(a.ctx,r)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}({appendChild:function(t,e){c.appendChild(t,e)},getSceneCoordinate:w,getClientCoordinate:function(t,e){var n=c.transform;return{x:(t*n.scale+n.dx)/o,y:(e*n.scale+n.dy)/o}},getTransform:function(){return c.transform},getRoot:function(){return c},removeChild:function(t){c.removeChild(t)},setViewBox:function(t){d.showRectangle(t,{width:n,height:r});var e=d.getTransform();h.applyTransform(e)},setClearColor:function(t,e,n,r){s.clearColor(t,e,n,r)},dispose:function(){t.removeEventListener("mousemove",y),t.removeEventListener("transform",m),f&&f(),window.removeEventListener("resize",p,!0),d.dispose(),c.dispose(),u&&(cancelAnimationFrame(u),u=0)},renderFrame:b,getPixelRatio:function(){return o},setPixelRatio:function(t){o=t,g()}}),h=function(t,n,r){var i={applyTransform:function(t){var e=n.transform,i=r.getPixelRatio();e.dx=t.x*i,e.dy=t.y*i,e.scale=t.scale,n.worldTransformNeedsUpdate=!0,r.renderFrame()},getOwner:function(){return t}};return e.size&&(i.getScreenCTM=function(){return{a:e.size.width/t.offsetWidth,d:e.size.height/t.offsetHeight,e:0,f:0}}),i}(t,c,l),d=k(t,{zoomSpeed:.025,controller:h});return c.bindScene(l),function(){t.addEventListener("mousemove",y),t.addEventListener("transform",m),f=function(t,e,n){var r,i=new Date;return t.addEventListener("click",s),t.addEventListener("touchend",a),t.addEventListener("touchstart",o),function(){t.removeEventListener("click",s),t.removeEventListener("touchend",a),t.removeEventListener("touchstart",o)};function o(t){1===t.touches.length&&(i=new Date,r={x:t.touches[0].pageX,y:t.touches[0].pageY})}function a(t){if(!(t.touches.length>1||new Date-i>300)){var e=t.changedTouches[0],n=e.pageX-r.x,o=e.pageY-r.y;n*n+o*o<25&&s(e)}}function s(t){e.call(n,t)}}(t,v,this),window.addEventListener("resize",p,!0)}(),b(),l;function p(){g()}function g(){e.size?(n=t.width=e.size.width,r=t.height=e.size.height):(n=t.width=t.offsetWidth*o,r=t.height=t.offsetHeight*o),s.viewport(0,0,n,r),i.width=n,i.height=r,c.worldTransformNeedsUpdate=!0,b()}function m(t){l.fire("transform",t)}function v(t){var e=w(t.clientX,t.clientY);l.fire("click",{originalEvent:t,sceneX:e.x,sceneY:e.y})}function y(t){var e=w(t.clientX,t.clientY);l.fire("mousemove",{originalEvent:t,sceneX:e.x,sceneY:e.y})}function w(t,e){var n=c.transform,r=e*o;return{x:(t*o-n.dx)/n.scale,y:(r-n.dy)/n.scale}}function b(){u||(u=requestAnimationFrame(x))}function x(){s.clear(s.COLOR_BUFFER_BIT),i.wasDirty=c.updateWorldTransform(),c.draw(s,i),u=0}}var W={compile:function(t,e,n){var r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(r));return r},link:function(t,e,n){var r=t.createProgram();if(t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(r));return r},getLocations:function(t,e){return{attributes:V(t,e),uniforms:D(t,e)}},getAttributes:V,getUniforms:D,initBuffer:function(t,e,n,r){var i=t.createBuffer();if(!i)throw new Error("Failed to create a buffer");t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.vertexAttribPointer(r,n,t.FLOAT,!1,0,0),t.enableVertexAttribArray(r)}};function V(t,e){for(var n=Object.create(null),r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<r;++i){var o=t.getActiveAttrib(e,i).name;n[o]=t.getAttribLocation(e,o)}return n}function D(t,e){for(var n=Object.create(null),r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=t.getActiveUniform(e,i).name;n[o]=t.getUniformLocation(e,o)}return n}var X=function(t){var e=[];return t.forEach((function(t){t.globals&&e.push(t.globals())})),e.push("void main() {"),t.forEach((function(t){t.mainBody&&e.push(t.mainBody())})),e.push("}"),e.join("\n")},$={globals:function(){return"\nattribute vec2 aPosition;\nuniform vec2 uScreenSize;\nuniform mat4 uTransform;\n"},mainBody:function(){return"\n  mat4 transformed = mat4(uTransform);\n\n  // Translate screen coordinates to webgl space\n  vec2 vv = 2.0 * uTransform[3].xy/uScreenSize;\n  transformed[3][0] = vv.x - 1.0;\n  transformed[3][1] = 1.0 - vv.y;\n  vec2 xy = 2.0 * aPosition/uScreenSize;\n  gl_Position = transformed * vec4(xy.x, -xy.y, 0.0, 1.0);\n"}},q=X([$,{globals:function(){return"\nattribute float aPointSize;\nattribute vec4 aColor;\nvarying vec4 vColor;\n"},mainBody:function(){return"\n  gl_PointSize = aPointSize * transformed[0][0];\n  vColor = aColor;\n"}}]),z=new Map;function U(t,e,n,r,i){for(var o=0,a=0,s=t-n;s<t+n;++s)if(!(s<0||s>=i))for(var u=e-n;u<e+n;++u)u<0||u>=i||(o+=r[4*(s*i+u)+3],a+=1);return o/a}var G=function(t,e,n,r){this.r=t,this.g=e,this.b=n,this.a=void 0===r?1:r},J=function(t,e,n,r){this.offset=e,this.buffer=t,this.color=n||new G(1,1,1,1),void 0!==r&&(this.data=r)},Q={x:{},y:{}};Q.x.get=function(){return this.buffer[this.offset]},Q.y.get=function(){return this.buffer[this.offset+1]},J.prototype.update=function(t,e){var n=this.offset,r=this.buffer;r[n+0]=t.x,r[n+1]=t.y,(t.size||e)&&(r[n+2]="number"==typeof t.size?t.size:e.size),this.setColor(this.color)},J.prototype.setColor=function(t){this.color=t,this.buffer[this.offset+3]=t.r,this.buffer[this.offset+4]=t.g,this.buffer[this.offset+5]=t.b},Object.defineProperties(J.prototype,Q);var K=function(t){function e(e){t.call(this),this.type="PointCollection",this.pointsAccessor=[],this.capacity=e,this.pointsBuffer=new Float32Array(6*e),this.count=0,this._program=null,this.color=new G(1,1,1,1),this.size=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.draw=function(t,e){this._program||(this._program=function(t,e){var n=z.get(t);if(!n){var r=W.compile(t,t.VERTEX_SHADER,q),i=W.compile(t,t.FRAGMENT_SHADER,"\nprecision highp float;\nvarying vec4 vColor;\nuniform sampler2D texture;\n\nvoid main() {\n  vec4 tColor = texture2D( texture, gl_PointCoord );\n  gl_FragColor = vec4(vColor.rgb, tColor.a);\n  //gl_FragColor = vec4(vColor.rgb, 1.0);\n  // vec2 t = 2.0 * gl_PointCoord - 1.0;\n  // float a = 1.0 - pow(t.x, 2.0) - pow(t.y, 2.0);\n  // gl_FragColor = vec4(vColor.rgb, a);\n}\n");n=W.link(t,r,i),z.set(t,n)}var o=W.getLocations(t,n),a=t.createBuffer();if(!a)throw new Error("failed to create a nodesBuffer");t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,e.byteLength,t.DYNAMIC_DRAW);var s=function(t){var e=t.createTexture();if(!e)throw new Error("Failed to create circle texture");t.bindTexture(t.TEXTURE_2D,e);var n=function(t){for(var e=new Uint8Array(t*t*4),n=(t-8)/2,r=0;r<t;++r)for(var i=r*t,o=0;o<t;++o){var a=4*(i+o),s=r-n,u=o-n,c=Math.sqrt(u*u+s*s);if(c<n){var f=1-c/n;e[a+3]=f>.3?255:255*f}else e[a+3]=0}return function(t,e){for(var n=new Uint8Array(e*e*4),r=0;r<e;++r)for(var i=0;i<e;++i)n[4*(r*e+i)+3]=U(r,i,3,t,e);return n}(e,t)}(64);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,64,64,0,t.RGBA,t.UNSIGNED_BYTE,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.generateMipmap(t.TEXTURE_2D),e}(t);return{draw:function(r,i,u){t.useProgram(n);var c=e.BYTES_PER_ELEMENT;r&&t.uniformMatrix4fv(o.uniforms.uTransform,!1,r.getArray()),t.uniform2f(o.uniforms.uScreenSize,i.width,i.height),t.bindTexture(t.TEXTURE_2D,s),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW),t.vertexAttribPointer(o.attributes.aPosition,2,t.FLOAT,!1,6*c,0),t.enableVertexAttribArray(o.attributes.aPosition),t.vertexAttribPointer(o.attributes.aPointSize,1,t.FLOAT,!1,6*c,2*c),t.enableVertexAttribArray(o.attributes.aPointSize),t.vertexAttribPointer(o.attributes.aColor,3,t.FLOAT,!1,6*c,3*c),t.enableVertexAttribArray(o.attributes.aColor),t.drawArrays(t.POINTS,0,u)},updateData:function(t){e=t},dispose:function(){t.deleteProgram(n),t.deleteTexture(s),z.delete(t)}}}(t,this.pointsBuffer)),this._program.draw(this.worldTransform,e,this.count)},e.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null)},e.prototype.add=function(t,e){if(!t)throw new Error("Point is required");this.count>=this.capacity&&this._extendArray();var n=this.pointsBuffer,r=this.count,i=new J(n,6*r,t.color||this.color,e);return this.pointsAccessor.push(i),i.update(t,this),this.count+=1,i},e.prototype._extendArray=function(){throw new Error("Cannot extend array at the moment :(")},e}(Y),tt=function(t,e,n){if(Number.isNaN(t))throw new Error("x is not a number");if(Number.isNaN(e))throw new Error("y is not a number");this.x=t,this.y=e,this.color=new G(255,255,255),this.size=Number.isFinite(n)?n:4},et=function(t){function e(e,n){t.call(this),this.itemsPerLine=n,this.capacity=e,this.count=0,this._program=null,this.color=new G(1,1,1,1),this.buffer=new Float32Array(e*this.itemsPerLine)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.draw=function(t,e){this._program||(this._program=this._makeProgram(t));var n=this.worldTransform;this._program.draw(n,this.color,e)},e.prototype._makeProgram=function(){throw new Error("Not implemented")},e.prototype._addInternal=function(){throw new Error("Not implemented")},e.prototype.add=function(t){if(!t)throw new Error("Line is required");this.count>=this.capacity&&this._extendArray();var e=this.count*this.itemsPerLine,n=this._addInternal(t,e);return this.count+=1,n},e.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null)},e.prototype._extendArray=function(){var t=this.capacity*this.itemsPerLine*2,e=new Float32Array(t);this.buffer&&e.set(this.buffer),this.buffer=e,this.capacity=t},e}(Y),nt=X([$]),rt=new Map;function it(t,e,n){var r=rt.get(t);if(!r){var i=W.compile(t,t.VERTEX_SHADER,nt),o=W.compile(t,t.FRAGMENT_SHADER,"\nprecision highp float;\nuniform vec4 uColor;\n\nvoid main() {\n  gl_FragColor = uColor;\n}\n");r=W.link(t,i,o),rt.set(t,r)}var a=W.getLocations(t,r),s=t.createBuffer(),u=e.BYTES_PER_ELEMENT,c=n?t.TRIANGLES:t.LINES;return t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,e.byteLength,t.STATIC_DRAW),t.bufferSubData(t.ARRAY_BUFFER,0,e),{draw:function(n,i,o){0!==e.length&&(t.useProgram(r),t.uniformMatrix4fv(a.uniforms.uTransform,!1,n.getArray()),t.uniform2f(a.uniforms.uScreenSize,o.width,o.height),t.uniform4f(a.uniforms.uColor,i.r,i.g,i.b,i.a),t.bindBuffer(t.ARRAY_BUFFER,s),t.enableVertexAttribArray(a.attributes.aPosition),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.vertexAttribPointer(a.attributes.aPosition,2,t.FLOAT,!1,2*u,0),t.drawArrays(c,0,e.length/2))},dispose:function(){t.deleteBuffer(s),t.deleteProgram(r),rt.delete(t)}}}var ot=function(t,e){this.offset=e,this.buffer=t,this.width=1};ot.prototype.setWidth=function(t){this.width=t},ot.prototype.update=function(t,e){var n=this.buffer,r=this.offset,i=e.x-t.x,o=e.y-t.y;0===i&&(i=1e-4),0===o&&(o=1e-4);var a=Math.sqrt(i*i+o*o),s=i/a,u=o/a,c=this.width,f=c*s,l=c*u,h=t.x+l,d=t.y-f,p=e.x+l,g=e.y-f,m=t.x-l,v=t.y+f,y=e.x-l,w=e.y+f;n[r+0]=h,n[r+1]=d,n[r+2]=p,n[r+3]=g,n[r+4]=m,n[r+5]=v,n[(r+=6)+0]=p,n[r+1]=g,n[r+2]=m,n[r+3]=v,n[r+4]=y,n[r+5]=w};var at=function(t){function e(e){t.call(this,e,12),this.type="LineCollection"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._makeProgram=function(t){return it(t,this.buffer,!0)},e.prototype._addInternal=function(t,e){var n=new ot(this.buffer,e);return n.update(t.from,t.to),n},e}(et),st=function(t,e){this.offset=e,this.buffer=t};st.prototype.update=function(t,e){var n=this.buffer,r=this.offset;n[r+0]=t.x,n[r+1]=t.y,n[r+2]=e.x,n[r+3]=e.y};var ut=function(t){function e(e){t.call(this,e,4),this.type="WireCollection"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._makeProgram=function(t){return it(t,this.buffer,!1)},e.prototype._addInternal=function(t,e){var n=new st(this.buffer,e);return n.update(t.from,t.to),n},e}(et),ct=new Map;var ft=function(t){function e(e,n){void 0===n&&(n=!1),t.call(this),this.drawCount=0,this.madeFullCircle=!1,this.allowColors=n,this.itemsPerLine=n?3:2,this.capacity=e,this.nextElementIndex=1,this._program=null,this.color=new G(1,1,1,1),this.buffer=new ArrayBuffer((e+1)*this.itemsPerLine*4),this.positions=new Float32Array(this.buffer),n&&(this.colors=new Uint32Array(this.buffer))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.draw=function(t,e){this._program||(this._program=function(t,e,n){var r=ct.get(t),i=n?3:2;if(!r){var o=function(t){return{lineVSSrc:X([{globals:function(){return"\n  attribute vec2 aPosition;\n  varying vec4 vColor;\n  "+(t?"attribute vec4 aColor;":"")+"\n  uniform vec4 uColor;\n  uniform vec2 uScreenSize;\n  uniform mat4 uTransform;\n"},mainBody:function(){return"\n  mat4 transformed = mat4(uTransform);\n\n  // Translate screen coordinates to webgl space\n  vec2 vv = 2.0 * uTransform[3].xy/uScreenSize;\n  transformed[3][0] = vv.x - 1.0;\n  transformed[3][1] = 1.0 - vv.y;\n  vec2 xy = 2.0 * aPosition.xy/uScreenSize;\n  gl_Position = transformed * vec4(xy.x, -xy.y, 0.0, 1.0);\n  vColor = "+(t?"aColor.abgr":"uColor")+";\n"}}]),lineFSSrc:"precision mediump float;\nvarying vec4 vColor;\nvoid main() {\n  gl_FragColor = vColor;\n}\n"}}(n),a=o.lineFSSrc,s=o.lineVSSrc,u=W.compile(t,t.VERTEX_SHADER,s),c=W.compile(t,t.FRAGMENT_SHADER,a);r=W.link(t,u,c),ct.set(t,r)}var f=W.getLocations(t,r),l=t.createBuffer();return{draw:function(o,a,s,u,c){if(0!==e.length){t.useProgram(r);var h=o.getArray();if(t.uniformMatrix4fv(f.uniforms.uTransform,!1,h),t.uniform2f(f.uniforms.uScreenSize,s.width,s.height),t.uniform4f(f.uniforms.uColor,a.r,a.g,a.b,a.a),t.bindBuffer(t.ARRAY_BUFFER,l),t.enableVertexAttribArray(f.attributes.aPosition),t.bufferData(t.ARRAY_BUFFER,e,t.DYNAMIC_DRAW),n?(t.vertexAttribPointer(f.attributes.aPosition,2,t.FLOAT,!1,12,0),t.enableVertexAttribArray(f.attributes.aColor),t.vertexAttribPointer(f.attributes.aColor,4,t.UNSIGNED_BYTE,!0,12,8)):t.vertexAttribPointer(f.attributes.aPosition,2,t.FLOAT,!1,0,0),c){var d=e.byteLength/4/i-u;t.drawArrays(t.LINE_STRIP,u,d),u>1&&t.drawArrays(t.LINE_STRIP,0,u-1)}else t.drawArrays(t.LINE_STRIP,1,u-1)}},dispose:function(){t.deleteBuffer(l),t.deleteProgram(r),ct.delete(t)}}}(t,this.buffer,this.allowColors));var n=this.worldTransform;this._program.draw(n,this.color,e,this.nextElementIndex,this.madeFullCircle)},e.prototype.add=function(t,e,n){var r=this.nextElementIndex*this.itemsPerLine,i=this.positions;i[r]=t,i[r+1]=e,this.allowColors&&(this.colors[r+2]=void 0===n?0:n),this.nextElementIndex+=1,this.drawCount+=1,this.nextElementIndex>this.capacity&&(this.nextElementIndex=1,i[0]=t,i[1]=e,this.allowColors&&(this.colors[2]=this.colors[r+2]),this.madeFullCircle=!0)},e.prototype.dispose=function(){this._program&&(this._program.dispose(),this._program=null)},e}(Y);function lt(t){try{return!(!window.WebGLRenderingContext||(t||(t=document.createElement("canvas")),!t.getContext("webgl")&&!t.getContext("experimental-webgl")))}catch(t){return!1}}},6738:(t,e,n)=>{var r=n(590),i=n(8236),o=new r,a=n(4806),s=n(3959);t.exports=function(){var t,e,n=new r,u={init:function(n){c(n),e=n,t=f(n);for(var r=0;r<n.length;r+=2)t.insert(r,e)},initAsync:function(n,r){c(n);var i=r&&r.done,o=r&&r.progress;t=f(n),e=n,s(n,(function(e,r){t.insert(r,n,0),o&&o(r,n.length)}),(function(){"function"==typeof i&&i(u)}),{step:2})},bounds:function(){return t?t.bounds:o},pointsAround:function(r,i,o,s){"function"!=typeof s&&(s=a);var u=[];return n.x=r,n.y=i,n.half=o,t.query(n,u,e,s),u},visit:function(e){return t.visit(e)}};return u;function c(t){if(!t)throw new Error("Points array is required for quadtree to work");if("number"!=typeof t.length)throw new Error("Points should be array-like object");if(t.length%2!=0)throw new Error("Points array should consist of series of x,y coordinates and be multiple of 2")}function f(t){if(0===t.length){var e=new r;return new i(e)}for(var n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,u=0;u<t.length;u+=2){var c=t[u],f=t[u+1];c<n&&(n=c),c>a&&(a=c),f<o&&(o=f),f>s&&(s=f)}var l=Math.max(a-n,s-o),h=(l+=2)/2,d=new r((n-=1)+h,(o-=1)+h,h);return new i(d)}}},590:t=>{function e(t,e,n){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.half="number"==typeof n?n:0}t.exports=e,e.prototype.left=function(){return this.x-this.half},e.prototype.top=function(){return this.y-this.half},e.prototype.width=function(){return 2*this.half},e.prototype.height=function(){return 2*this.half},e.prototype.centerX=function(){return this.x},e.prototype.centerY=function(){return this.y},e.prototype.contains=function(t,e){var n=this.half;return this.x-n<=t&&t<this.x+n&&this.y-n<=e&&e<this.y+n}},4806:t=>{t.exports=function(t,e){return t.x-t.half<e.x+e.half&&t.x+t.half>e.x-e.half&&t.y-t.half<e.y+e.half&&t.y+t.half>e.y-e.half}},8236:(t,e,n)=>{var r=n(590);function i(t){this.bounds=t,this.nw=null,this.ne=null,this.sw=null,this.se=null,this.items=null}t.exports=i,i.prototype.subdivide=function(){var t=this.bounds,e=t.half/2;this.nw=new i(new r(t.x-e,t.y-e,e)),this.ne=new i(new r(t.x+e,t.y-e,e)),this.sw=new i(new r(t.x-e,t.y+e,e)),this.se=new i(new r(t.x+e,t.y+e,e))},i.prototype.insert=function(t,e,n){if(n||(n=0),!(n>24))if(null===this.nw){if(null===this.items?this.items=[t]:this.items.push(t),this.bounds.half>.1&&this.items.length>=4){this.subdivide();for(var r=0;r<this.items.length;++r)this.insert(this.items[r],e,n+1);this.items=null}}else{var i=e[t],o=e[t+1],a=this.bounds,s=0;i>a.x&&(s+=1),o>a.y&&(s+=2),function(t,e){return 0===e?t.nw:1===e?t.ne:2===e?t.sw:3===e?t.se:void 0}(this,s).insert(t,e,n+1)}},i.prototype.visit=function(t){t(this)&&this.nw&&(this.nw.visit(t),this.ne.visit(t),this.sw.visit(t),this.se.visit(t))},i.prototype.query=function(t,e,n,r){if(r(this.bounds,t)){var i=this.items;if(i)for(var o=0;o<i.length;++o){var a=i[o],s=n[a],u=n[a+1];t.contains(s,u)&&e.push(a)}this.nw&&(this.nw.query(t,e,n,r),this.ne.query(t,e,n,r),this.sw.query(t,e,n,r),this.se.query(t,e,n,r))}}},2972:t=>{t.exports=class{constructor(){this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY}growBy(t){this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t}get left(){return this.minX}get top(){return this.minY}get right(){return this.maxX}get bottom(){return this.maxY}get width(){return this.maxX-this.minX}get height(){return this.maxY-this.minY}get cx(){return(this.minX+this.maxX)/2}get cy(){return(this.minY+this.maxY)/2}addPoint(t,e){if(void 0===t)throw new Error("Point is not defined");let n=t,r=e;void 0===r&&(n=t.x,r=t.y),n<this.minX&&(this.minX=n),n>this.maxX&&(this.maxX=n),r<this.minY&&(this.minY=r),r>this.maxY&&(this.maxY=r)}addRect(t){if(!t)throw new Error("rect is not defined");this.addPoint(t.left,t.top),this.addPoint(t.right,t.top),this.addPoint(t.left,t.bottom),this.addPoint(t.right,t.bottom)}merge(t){t.minX<this.minX&&(this.minX=t.minX),t.minY<this.minY&&(this.minY=t.minY),t.maxX>this.maxX&&(this.maxX=t.maxX),t.maxY>this.maxY&&(this.maxY=t.maxY)}}},8949:t=>{t.exports=class{constructor(t){this.cars=[],this.lastCarId=0,this.v=t,this.lastTime=Date.now()}addCar(t){let e={id:this.getNewId(),startPositionIndex:0,startPosition:t[0],stopPosition:t[1],currentPosition:t[0],currentFormula:this.updateEquation(t[0],t[1],t[0],this.v),data:t};this.cars.push(e)}removeCar(t){var e=0;for(let n=0;n<this.cars.length&&this.casr[n].id!=t;n++)e++;this.cars.splice(e,1)}moveCar(t,e){}getNewId(){return this.lastCarId=this.cars.length+1,this.lastCarId}getLastCarId(){return this.lastCarId}getNextStop(t,e){}updateEquation(t,e,n,r){var i=t.x,o=t.y,a=e.x,s=e.y,u=this.lastTime,c=n.x,f=n.y,l=a-i;if(l>0?l=1:l<0&&(l=-1),a-i==0)var h=0;else h=l*r/(((s-o)/(a-i))**2+1)**.5;var d=s-o;if(d>0?d=1:d<0&&(d=-1),s-o==0)var p=0;else p=d*r/(((a-i)/(s-o))**2+1)**.5;return function(t){return{x:c+h*(t-u),y:f+p*(t-u)}}}checkPassTheStopPoint(t,e,n){var r=((t.x-e.x)**2+(t.y-e.y)**2)**.5;return((n.x-t.x)**2+(n.y-t.y)**2)**.5>r}updateCarStartStopPosition(t){for(let n=0;n<this.cars.length;n++){var e=this.cars[n];if(e.id==t&&this.cars[n].startPositionIndex!==this.cars[n].data.length-2){this.cars[n].startPositionIndex+=1,this.cars[n].startPosition=e.data[this.cars[n].startPositionIndex],this.cars[n].stopPosition=e.data[this.cars[n].startPositionIndex+1],this.cars[n].currentFormula=this.updateEquation(this.cars[n].startPosition,this.cars[n].stopPosition,this.cars[n].startPosition,this.v);break}}}updateSVG(t,e){t.setAttribute("cx",e.x),t.setAttribute("cy",e.y)}updateTime(t){this.lastTime=t||Date.now()}}},6347:(t,e,n)=>{var r=n(8482),i=n(392);t.exports=function(t,e){e||(e=6371393);var n=null;return i(t).then((function(t){n=JSON.parse(t);var i=[0,0],o=r.geoMercator().center([n.cx,n.cy]).scale(e);return function(t,e){i[0]=t,i[1]=e;let n=o.invert(i);return{x:n[0],y:n[1]}}}))}},3717:t=>{t.exports=class{constructor(t,e){this.visible=!1,this.beingDragged=!1,this.pointId=-1,this.x=0,this.y=0,this.r=18,this.pointChanged=t,this.findNearestPoint=e}startDragging(t,e){let n=this;function r(r){let i,o;if(r.stopPropagation(),r.preventDefault(),r.touches){let t;for(var a=0;a<r.touches.length;++a)if(r.touches[a].identifier===e){t=r.touches[a];break}if(!t)return;i=t.clientX,o=t.clientY}else i=r.clientX,o=r.clientY;var s=t.getSceneCoordinate(i,o);n.x=s.x,n.y=s.y;let u=n.findNearestPoint(s.x,s.y);n.pointId=u.id,n.pointChanged(n)}function i(t){if(t.touches&&t.touches.length>0)for(let n=0;n<t.touches.length;++n)if(t.touches[n].identifier===e)return;n.beingDragged=!1,document.removeEventListener("mousemove",r,!0),document.removeEventListener("mouseup",i,!0),document.removeEventListener("touchmove",r,!0),document.removeEventListener("touchend",i,!0),document.removeEventListener("touchcancel",i,!0)}this.beingDragged=!0,document.addEventListener("mousemove",r,!0),document.addEventListener("touchmove",r,{capture:!0,passive:!1}),document.addEventListener("touchend",i,!0),document.addEventListener("touchcancel",i,!0),document.addEventListener("mouseup",i,!0)}setFrom(t){this.visible=!0,this.pointId=t.id,this.x=t.data.x,this.y=t.data.y,this.pointChanged(this)}clear(){this.visible=!1,this.pointId=-1,this.x=0,this.y=0,this.pointChanged(this)}intersects(t,e,n){if(!this.visible||this.beingDragged)return!1;let r=this.r/n,i=t-this.x,o=e-this.y;return i*i+o*o<=r*r}}},1045:(t,e,n)=>{let r=n(4964);class i extends r.Element{constructor(t,e){super(),this.g=t,this.dx=0,this.dy=0,this.scale=0,this.drawCallback=e||o}draw(){let t=this.worldTransform;if(n=this,(e=this.worldTransform).scale==n.scale&&e.dx===n.dx&&e.dy===n.dy)return;var e,n;let r=this.scene.getPixelRatio(),i=t.scale/r,o=t.dx/r,a=t.dy/r;this.g.setAttributeNS(null,"transform",`matrix(${i}, 0, 0, ${i}, ${o}, ${a})`),this.scale=t.scale,this.dx=t.dx,this.dy=t.dy,this.drawCallback(this)}}function o(){}t.exports=i},4929:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>P});var r=n(4245),i=n.n(r);const o=i()({});var a=n(7621),s=n.n(a);const u=()=>s()("rgba(26, 26, 26, 0.8)"),c=()=>s()("#F7F2E8"),f=n(4964);let l=0;class h{get color(){return this._color}set color(t){let e=s()(t);this._color=e,this.lines&&(this.lines.color=d(e.toRgb())),this.scene&&this.scene.renderFrame()}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.lines&&this.scene&&this.lines.setLineWidth(t)}constructor(){this._color=u(),this.grid=null,this.lines=null,this.scene=null,this.dx=0,this.dy=0,this.scale=1,this.hidden=!1,this.id="paths_"+l,this._lineWidth=1,l+=1}getGridProjector(){if(this.grid)return this.grid.projector}getQueryBounds(){const{grid:t}=this;if(t){if(t.queryBounds)return t.queryBounds;if(t.isArea)return{areaId:t.id}}}setGrid(t){this.grid=t,this.scene&&this.bindToScene(this.scene)}getViewBox(){if(!this.grid)return null;let{width:t,height:e}=this.grid.getProjectedRect(),n=Math.max(t,e)/4;return{left:-n,top:n,right:n,bottom:-n}}moveTo(t,e=0){console.warn("Please use moveBy() instead. The moveTo() is under construction")}moveBy(t,e=0){this.dx=t,this.dy=e,this._transferTransform()}buildLinesCollection(){if(this.lines)return this.lines;let t=this.grid,e=new f.WireCollection(t.wayPointCount,{width:this._lineWidth,allowColors:!1,is3D:!1});t.forEachWay((function(t,n){e.add({from:t,to:n})}));let n=s()(this._color).toRgb();e.color=d(n),e.id=this.id,this.lines=e}destroy(){this.scene&&this.lines&&this.scene.removeChild(this.lines)}bindToScene(t){this.scene&&this.lines&&console.error("You seem to be adding this layer twice..."),this.scene=t,this.grid&&(this.buildLinesCollection(),this.hidden||this.scene.appendChild(this.lines))}hide(){this.hidden||(this.hidden=!0,this.scene&&this.grid&&this.scene.removeChild(this.lines))}show(){this.hidden&&(this.hidden=!1,this.scene&&this.grid?this.scene.appendChild(this.lines):console.log("Layer will be shown when grid is available"))}_transferTransform(){this.lines&&(this.lines.translate([this.dx,this.dy,0]),this.lines.updateWorldTransform(!0),this.scene&&this.scene.renderFrame(!0))}}function d(t){return{r:t.r/255,g:t.g/255,b:t.b/255,a:t.a}}class p{constructor(t){i()(this),this.callback=t||Function.prototype}cancel(){this.isCancelled=!0,this.fire("cancel")}notify(t){this.isCancelled||this.callback(t)}onCancel(t){this.on("cancel",t,this)}offCancel(t){this.off("cancel",t)}}function g(t,e){let n;e||(e={});let r=e.progress||new p,i=!1;return r.on&&r.onCancel(o),new Promise((function(i,a){n=new XMLHttpRequest,"function"==typeof r.notify&&n.addEventListener("progress",(function(t){t.lengthComputable?r.notify({loaded:t.loaded,total:t.total,percent:t.loaded/t.total,lengthComputable:!0}):r.notify({loaded:t.loaded,lengthComputable:!1})}),!1),n.addEventListener("load",(function(){if(r.offCancel(o),!r.isCancelled)if(200===n.status){var s=n.response;"json"===e.responseType&&"string"==typeof s&&(s=JSON.parse(s)),setTimeout((()=>i(s)),0)}else a({statusError:n.status,message:`Unexpected status code ${n.status} when calling ${t}`})}),!1),n.addEventListener("error",(function(){a(`Failed to download ${t}`)}),!1),n.addEventListener("abort",(function(){a({cancelled:!0,message:`Cancelled download of ${t}`})}),!1),n.open(e.method||"GET",t),e.responseType&&(n.responseType=e.responseType),e.headers&&Object.keys(e.headers).forEach((t=>{n.setRequestHeader(t,e.headers[t])})),"POST"===e.method?n.send(e.body):n.send(null)}));function o(){i=!0,n&&n.abort()}}let m=["https://overpass.kumi.systems/api/interpreter","https://overpass-api.de/api/interpreter","https://overpass.openstreetmap.ru/cgi/interpreter"];class v{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}growBy(t){this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t}get left(){return this.minX}get top(){return this.minY}get right(){return this.maxX}get bottom(){return this.maxY}get width(){return this.maxX-this.minX}get height(){return this.maxY-this.minY}get cx(){return(this.minX+this.maxX)/2}get cy(){return(this.minY+this.maxY)/2}addPoint(t,e){if(void 0===t)throw new Error("Point is not defined");let n=t,r=e;void 0===r&&(n=t.x,r=t.y),n<this.minX&&(this.minX=n),n>this.maxX&&(this.maxX=n),r<this.minY&&(this.minY=r),r>this.maxY&&(this.maxY=r)}addRect(t){if(!t)throw new Error("rect is not defined");this.addPoint(t.left,t.top),this.addPoint(t.right,t.top),this.addPoint(t.left,t.bottom),this.addPoint(t.right,t.bottom)}merge(t){t.minX<this.minX&&(this.minX=t.minX),t.minY<this.minY&&(this.minY=t.minY),t.maxX>this.maxX&&(this.maxX=t.maxX),t.maxY>this.maxY&&(this.maxY=t.maxY)}}var y=n(3007);class w{constructor(){this.elements=[],this.bounds=new v,this.nodes=new Map,this.wayPointCount=0,this.id=0,this.name="",this.isArea=!0,this.projector=void 0}setName(t){this.name=t}setId(t){this.id=t}setIsArea(t){this.isArea=t}setBBox(t){this.bboxString=t}hasRoads(){return this.wayPointCount>0}setProjector(t){this.projector=t}static fromPBF(t){if(1!==t.version)throw new Error("Unknown version "+t.version);let e=[];t.nodes.forEach((t=>{t.type="node",e.push(t)})),t.ways.forEach((t=>{t.type="way",e.push(t)}));const n=w.fromOSMResponse(e);return n.setName(t.name),n.setId(t.id),n}static fromOSMResponse(t){let e=new w,n=e.nodes,r=e.bounds,i=0;return t.forEach((t=>{"node"===t.type?(n.set(t.id,t),r.addPoint(t.lon,t.lat)):"way"===t.type&&(i+=t.nodes.length)})),e.elements=t,e.wayPointCount=i,e}getProjectedRect(){let t=this.bounds,e=this.getProjector(),n=e({lon:t.left,lat:t.bottom}),r=e({lon:t.right,lat:t.top}),i=n.x,o=n.y,a=r.y,s=r.x;return{left:i,top:o,right:s,bottom:a,width:s-i,height:Math.abs(a-o)}}forEachElement(t){this.elements.forEach(t)}forEachWay(t,e,n){let r=this.nodes,i=this.getProjector();this.elements.forEach((o=>{if("way"!==o.type)return;let a=o.nodes,s=r.get(a[0]);if(!s)return;let u=i(s);e&&e(o);for(let e=1;e<a.length;++e){if(s=r.get(a[e]),!s)continue;let n=i(s);t(u,n),u=n}n&&n(o)}))}getProjector(){let t=[0,0];this.projector||(this.projector=(0,y.ZP)(),this.projector.center([this.bounds.cx,this.bounds.cy]).scale(6371393));let e=this.projector;return function({lon:n,lat:r}){t[0]=n,t[1]=r;let i=e(t);return{x:i[0],y:-i[1]}}}}let b=new Map;function x(t){let e=b.get(t);return e?Promise.resolve(e):g(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(t)}`,{responseType:"json"}).then(E).then((e=>(b.set(t,e),e)))}function E(t){return t.map((t=>{let e,n;return"relation"===t.osm_type?e=t.osm_id+36e8:"way"===t.osm_type&&(e=t.osm_id+24e8),t.boundingbox&&(n=[Number.parseFloat(t.boundingbox[0]),Number.parseFloat(t.boundingbox[2]),Number.parseFloat(t.boundingbox[1]),Number.parseFloat(t.boundingbox[3])]),{areaId:e,bbox:n,lat:t.lat,lon:t.lon,osmId:t.osm_id,osmType:t.osm_type,name:t.display_name,type:t.type}}))}class S{static All="way";static Building="way[building]";static Road="way[highway]";static RoadBasic='way[highway~"^(motorway|primary|secondary|tertiary)|residential"]';static RoadStrict='way[highway~"^(((motorway|trunk|primary|secondary|tertiary)(_link)?)|unclassified|residential|living_street|pedestrian|service|track)$"][area!=yes]';static runFromOptions(t,e){return t.getQueryTemplate().then((t=>new S(t,e).run()))}constructor(t,e){this.queryBounds=t.bounds,this.queryString=t.queryString,this.progress=e,this.promise=null}run(){if(this.promise)return this.promise;let t=function(t){let e,n=/{{geocode(.+?):(.+?)}}/,r=[];for(;e=t.match(n);)r.push(t.substr(0,e.index)),r.push({geoType:e[1],name:e[2]}),t=t.substr(e.index+e[0].length);return r.push(t),r}(this.queryString);return this.promise=function(t){let e=0;return function n(){if(e>=t.length)return Promise.resolve();let r=t[e];return e+=1,"string"==typeof r?n():x(r.name).then(_).then((t=>{if(!t)throw new Error("No areas found for request "+r.name);Object.assign(r,t)})).then((1e3,function(t){return new Promise((e=>{setTimeout((()=>e(t)),1e3)}))})).then(n)}().then((function(){return t.map((t=>"string"==typeof t?t:"Area"===t.geoType?`area(${t.areaId})`:"Coords"===t.geoType?t.lat+","+t.lon:"Id"===t.geoType?`${t.osmType}(${t.osmId})`:"Bbox"===t.geoType?t.bbox.join(","):void 0)).join("")}))}(t).then((t=>function(t,e){const n={method:"POST",responseType:"json",progress:e=e||new p,headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"data="+encodeURIComponent(t)};let r=0;return i(m[r]);function i(t){return g(t,n).catch(o)}function o(t){if(t.cancelled)throw t;if(r>=m.length-1)throw t;return t.statusError&&e.notify({loaded:-1}),r+=1,i(m[r])}}(t,this.progress))).then((t=>{let e=w.fromOSMResponse(t.elements);return e.queryBounds=this.queryBounds,e})),this.promise}}function _(t){if(t.length>0)return t[0]}class T{static parse(t,e,n){let r=new T;if("string"==typeof n&&(r.place=n),e&&(r.wayFilter=e),!n)return r;Object.assign(r,n);let i=function(t,e){if(void 0!==e)return"number"==typeof e?t.queryLayerAll()[e]:"string"==typeof e?t.queryLayer(e):e}(t,n.layer);if(i){r.projector=i.getGridProjector();let t=i.getQueryBounds();!t||r.place||r.areaId||r.bbox||(r.place=t.place,r.areaId=t.areaId,r.bbox=t.bbox)}return n.projector&&(r.projector=projector),r}constructor(t){this.place=void 0,this.projector=void 0,this.wayFilter=void 0,this.timeout=900,this.maxHeapByteSize=1073741824,this.outputMethod="skel",Object.assign(this,t)}getQueryTemplate(){if(this.raw)return Promise.resolve({queryString:this.raw});if(!this.wayFilter)throw new Error("Way filter is required");return this.getBounds().then((t=>{let e;if(t.areaId)e=`[timeout:${this.timeout}][maxsize:${this.maxHeapByteSize}][out:json];\narea(${t.areaId});\n(._; )->.area;\n(${this.wayFilter}(area.area); node(w););\nout ${this.outputMethod};`;else if(t.bbox){let n=function(t){return t&&t.join(",")}(t.bbox);e=`[timeout:${this.timeout}][maxsize:${this.maxHeapByteSize}][bbox:${n}][out:json];\n(${this.wayFilter}; node(w););\nout ${this.outputMethod};`}return{bounds:t,queryString:e}}))}getBounds(){if(this.place)return x(this.place).then((t=>t&&t[0]));if(this.areaId)return Promise.resolve({areaId:this.areaId});if(this.bbox)return Promise.resolve({bbox:this.bbox});throw new Error("Please specify bounding area for the query (place|areaId|bbox)")}}n(6399),n(5854).Z;const I=n(4964);function C(t,e){var n;return((n=t||(new Date).toISOString())?n.replace(/[#%&{}\\/?*><$!'":@+`|=]/g,"_"):"")+(e||"")}function A(){return Array.from(document.querySelectorAll(".printable")).map((t=>{let e=window.getComputedStyle(t),n=t.getBoundingClientRect(),r=Number.parseInt(e.fontSize,10),i=Number.parseInt(e.paddingRight,10),o=2*Number.parseInt(e.paddingBottom,10);return{text:t.innerText,bounds:n,fontSize:r,paddingBottom:o,paddingRight:i,color:e.color,fontFamily:e.fontFamily,fill:e.color,element:t}}))}function R(t){setTimeout((()=>{window.URL.revokeObjectURL(t)}),45e3)}const F=n(4964);function P(t){let e=F.createScene(t),n=u();e.on("transform",(function(t){o.fire("scene-transform")})),e.on("append-child",(function(t){p.fire("layer-added",t)})),e.on("remove-child",(function(t){p.fire("layer-removed",t)})),e.setClearColor(247/255,242/255,232/255,1);let r=e.getCamera();r.setMoveSpeed&&(r.setMoveSpeed(200),r.setRotationSpeed(Math.PI/500));let a=e.getGL();a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);let f=!1,l=[],d=c();document.addEventListener("keydown",y,!0),document.addEventListener("keyup",w,!0);let p={render(){e.renderFrame(!0)},clear(){l.forEach((t=>t.destroy())),l=[],e.clear()},queryLayerAll:g,queryLayer:m,getRenderer:()=>e,getWGL:()=>F,version:()=>"0.0.2",dispose(){e.clear(),e.dispose(),p.fire("dispose",p),document.removeEventListener("keydown",y,!0),document.removeEventListener("keyup",w,!0)},set lineColor(t){l.forEach((e=>{e.color=t})),n=s()(t),o.fire("line-color",n),p.fire("line-color",n)},get lineColor(){let t=m();return t&&t.color||n},set background(t){d=s()(t);let n=d.toRgb();e.setClearColor(n.r/255,n.g/255,n.b/255,n.a),e.renderFrame(),o.fire("background-color",d),p.fire("background-color",d)},get background(){return d},add:v,load:function(t,e){let n=T.parse(p,t,e),r=new h;return r.id=n.place,S.runFromOptions(n).then((t=>{t.setProjector(n.projector),r.setGrid(t)})).catch((e=>{console.error(`Could not execute:\n  ${t}\n  The error was:`),console.error(e),r.destroy()})),v(r),r},saveToPNG:function(t){return function(t,e){e=e||{},function(t){let e=document.querySelector("#canvas"),n=e.width,r=e.height,i=document.createElement("canvas"),o=i.getContext("2d");return i.width=n,i.height=r,t.render(),o.drawImage(e,0,0,e.width,e.height,0,0,n,r),Promise.all(A().map((t=>function(t,e){return t?new Promise(((n,r)=>{let i=window.devicePixelRatio||1;if(t.element instanceof SVGSVGElement){let r=t.element,o=t.bounds,a=new Image;a.width=o.width*i,a.height=o.height*i,a.onload=()=>{e.drawImage(a,o.left*i,o.top*i,a.width,a.height),r.removeAttribute("width"),r.removeAttribute("height"),n()},r.setAttribute("width",a.width),r.setAttribute("height",a.height),a.src="data:image/svg+xml;base64,"+btoa((new XMLSerializer).serializeToString(r))}else e.save(),e.font=i*t.fontSize+"px "+t.fontFamily,e.fillStyle=t.color,e.textAlign="end",e.fillText(t.text,(t.bounds.right-t.paddingRight)*i,(t.bounds.bottom-t.paddingBottom)*i),e.restore(),n()})):Promise.resolve()}(t,o)))).then((()=>i))}(t).then((t=>{let n=C(e.name,".png");t.toBlob((function(t){let e=window.URL.createObjectURL(t),r=document.createElement("a");r.href=e,r.download=n,r.click(),R(e)}),"image/png")}))}(p,{name:t})},saveToSVG:function(t,e){return function(t,e){e=e||{};let n=function(t,e){const n=t.getRenderer(),r={open:()=>"\x3c!-- Generator: https://github.com/anvaka/city-roads\nData Â© OpenStreetMap contributors, ODbL 1.0. https://osm.org/copyright\n--\x3e",close:()=>function(){let t=n.getPixelRatio();return e.printable.map((e=>{if(e.element instanceof SVGSVGElement){let n=e.bounds,r=(n.left,n.top,e.element);r.setAttribute("x",n.left*t),r.setAttribute("y",n.top*t),r.setAttribute("width",n.width*t),r.setAttribute("height",n.height*t);let i=(new XMLSerializer).serializeToString(e.element);return r.removeAttribute("x"),r.removeAttribute("y"),r.removeAttribute("width"),r.removeAttribute("height"),i}{let n=e;if(!n.text)return;let r=n.text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),i=n.bounds,o=(i.right-n.paddingRight)*t,a=(i.bottom-n.paddingBottom)*t,s=n.fontSize*t,u=n.fontFamily.replace(/"/g,"'");return`<text text-anchor="end" x="${o}" y="${a}" fill="${n.color}" font-family="${u}" font-size="${s}">${r}</text>`}})).filter((t=>t)).join("\n")}()};return e.minLength&&(r.beforeWrite=t=>{let n=0;for(let r=1;r<t.length;++r)if(n+=Math.hypot(t[r].x-t[r-1].x,t[r].y-t[r-1].y),n>e.minLength)return!0;return n>e.minLength}),r.round=e.round,I.toSVG(n,r)}(t,{printable:A(),...e}),r=new Blob([n],{type:"image/svg+xml"}),i=window.URL.createObjectURL(r),o=C(e.name,".svg");setTimeout((()=>{let t=document.createElement("a");t.href=i,t.download=o,t.click(),R(i)}),30)}(p,Object.assign({},{name:t},e))}};return i()(p);function g(t){return t?l.filter((e=>e.id===t)):l}function m(t){let e=g(t);if(e)return e[0]}function v(t){if(!(l.indexOf(t)>-1)&&(t.bindToScene(e),l.push(t),1===l.length)){let n=t.getViewBox();n&&e.setViewBox(n)}}function y(t){t.shiftKey&&(f=!0,r.setSpeed&&r.setSpeed(.1))}function w(t){!t.shiftKey&&f&&(r.setSpeed&&r.setSpeed(1),f=!1)}}},5854:(t,e)=>{"use strict";var n=e.Z={};n.read=function(t,e){return t.readFields(n._readField,{version:0,name:"",date:"",id:"",nodes:[],ways:[]},e)},n._readField=function(t,e,r){1===t?e.version=r.readVarint():2===t?e.name=r.readString():3===t?e.date=r.readString():4===t?e.id=r.readString():5===t?e.nodes.push(n.node.read(r,r.readVarint()+r.pos)):6===t&&e.ways.push(n.way.read(r,r.readVarint()+r.pos))},n.write=function(t,e){if(t.version&&e.writeVarintField(1,t.version),t.name&&e.writeStringField(2,t.name),t.date&&e.writeStringField(3,t.date),t.id&&e.writeStringField(4,t.id),t.nodes)for(var r=0;r<t.nodes.length;r++)e.writeMessage(5,n.node.write,t.nodes[r]);if(t.ways)for(r=0;r<t.ways.length;r++)e.writeMessage(6,n.way.write,t.ways[r])},n.node={},n.node.read=function(t,e){return t.readFields(n.node._readField,{id:0,lat:0,lon:0},e)},n.node._readField=function(t,e,n){1===t?e.id=n.readVarint():2===t?e.lat=n.readFloat():3===t&&(e.lon=n.readFloat())},n.node.write=function(t,e){t.id&&e.writeVarintField(1,t.id),t.lat&&e.writeFloatField(2,t.lat),t.lon&&e.writeFloatField(3,t.lon)},n.way={},n.way.read=function(t,e){return t.readFields(n.way._readField,{nodes:[]},e)},n.way._readField=function(t,e,n){1===t&&n.readPackedVarint(e.nodes)},n.way.write=function(t,e){t.nodes&&e.writePackedVarint(1,t.nodes)}},6399:(t,e,n)=>{var r=n(3614),i=n(5854).Z;t.exports=function(t){let e=[],n=[],o=(new Date).toISOString();t.forEachElement((t=>{"node"===t.type?e.push(t):"way"===t.type&&n.push(t)}));let a=new r;return i.write({version:1,id:t.id,date:o,name:t.name,nodes:e,ways:n},a),a.finish()}},6508:(t,e,n)=>{const r=n(4004),i=n(4736),o=n(2972),a=n(3959);t.exports=function(t,e){let n,s,u=i(),c=new o;return r(t+".co.bin",{responseType:"arraybuffer",progress:function(t){}}).then((function(t){return n=new Int32Array(t),console.log("Downloaded nodes: "+n.length/2),function(t){return console.time("add nodes to graph"),new Promise((e=>{a(t,f,(()=>{console.timeEnd("add nodes to graph"),e()}),{step:2})}))}(n)})).then((function(){return r(t+".gr.bin",{responseType:"arraybuffer",progress:function(t){}}).then(l)})).then((()=>({graph:u,points:n,links:s,graphBBox:c})));function f(t,e,n){let r=Math.floor(e/2),i=n[e+1];u.addNode(r,{x:t,y:i}),c.addPoint(t,i)}function l(t){return s=new Int32Array(t),console.time("add edges to graph"),new Promise((t=>{a(s,h,(()=>{console.timeEnd("add edges to graph"),console.log(u.getLinksCount()+" edges; "+u.getNodesCount()+" nodes."),t()}),{step:2})}))}function h(t,e,n){let r=t-1,i=n[e+1]-1;u.addLink(r,i)}}},6163:(t,e,n)=>{var r=n(8482),i=n(392);t.exports=function(t,e){e||(e=6371393);var n=null;return i(t).then((function(t,i){var o=[0,0];n=JSON.parse(t);var a=r.geoMercator().center([n.cx,n.cy]).scale(e);return function(t,e){o[0]=t,o[1]=e;let n=a(o);return{x:n[0],y:n[1]}}}))}},392:(t,e,n)=>{const r=n(4004);t.exports=function(t){return r(t,{responseType:"text"})}},4004:t=>{t.exports=function(t,e){return e||(e={}),new Promise((function(n,r){var i=new XMLHttpRequest;"function"==typeof e.progress&&i.addEventListener("progress",(function(t){t.lengthComputable&&e.progress({loaded:t.loaded,total:t.total,percent:t.loaded/t.total})}),!1),i.addEventListener("load",(function(){if(200===i.status){var o=i.response;"json"===e.responseType&&"string"==typeof o&&(o=JSON.parse(o)),n(o)}else r(`Unexpected status code ${i.status} when calling ${t}`)}),!1),i.addEventListener("error",(function(){r(`Failed to download ${t}`)}),!1),i.addEventListener("abort",(function(){r(`Cancelled download of ${t}`)}),!1),i.open("GET",t),e.responseType&&(i.responseType=e.responseType),i.send(null)}))}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{const t=n(6508),e=n(4964),r=(n(4004),n(392),n(6738)),i=(n(4929),n(1045)),o=n(6347),s=n(8949),u=n(4901),c=n(9161),f=n(6163),l=n(3717);window.path=u,window.wgl=e,window.loadPositions=t,window.createTree=r,new Date;var h=new s(.1),d=null,p={svgPath:"",noPath:!1};const m=c({graph:"teh"});var v={visible:!1,lastSearchTook:0,pathLength:0,graphNodeCount:"",graphLinksCount:""};let y,w=0,b=new l(O,k),x=new l(O,k);var E=null,S=null,_=null,T=null;t("maps/teh").then((t=>{var e;e=t.points,(E=r()).initAsync(e,{}),function(t){pathFindersLookup={"a-greedy-star":u.aGreedy(t,{distance:Z,heuristic:Z}),nba:u.nba(t,{distance:Z,heuristic:Z}),"astar-uni":u.aStar(t,{distance:Z,heuristic:Z}),dijkstra:u.aStar(t,{distance:Z})},function(){if(y=pathFindersLookup.nba,!y)throw new Error("Cannot find pathfinder nba")}(),Y()}(S=t.graph),_=t.graphBBox,C(),o("./maps/teh.bond.json").then((t=>{})),f("./maps/teh.bond.json").then((t=>{T=t}))}));var I=null;function C(){I&&(I.dispose(),I=null),A&&(A(),A=null);let t=document.getElementById("my_canvas");loaded=!0,(I=e.scene(t)).setPixelRatio(2);let n=new i(document.getElementsByTagName("svg")[0].querySelector(".scene"),B);I.appendChild(n),I.setClearColor(16/255,16/255,16/255,1);let r=_.width/8;I.setViewBox({left:-r,top:-r,right:r,bottom:r});let o=S.getLinksCount(),a=new e.WireCollection(o);a.color={r:71/255,g:71/255,b:71/255,a:.7},S.forEachLink((function(t){let e=S.getNode(t.fromId).data,n=S.getNode(t.toId).data;a.add({from:e,to:n})})),I.appendChild(a),I.on("mousemove",F,this),I.on("click",P,this),document.body.addEventListener("mousedown",R,!0),document.body.addEventListener("touchstart",R,!0)}function A(){document.body.removeEventListener("mousedown",R,!0),document.body.removeEventListener("touchstart",R,!0)}function R(t){var e,n=void 0;if(t.touches){let r=(t.changedTouches||t.touches)[0];e=I.getSceneCoordinate(r.clientX,r.clientY),n=r.identifier}else e=I.getSceneCoordinate(t.clientX,t.clientY);let r=L({sceneX:e.x,sceneY:e.y},I);if(a=T(51.3331463850494,35.699889),console.log(a),console.log(a.x-e.x,a.y-e.y),r)return t.stopPropagation(),t.preventDefault(),void r.startDragging(I,n)}function F(t){new Date;let e=L(t,I);e!==d&&(d=e)}function P(t){console.log(t),b.visible?x.visible||N(t,x):N(t,b)}function N(t,e){if(!E)return;let n=k(t.sceneX,t.sceneY);if(!n)throw new Error("Point should be defined at this moment");e.setFrom(n)}function O(){if(!b.visible||!x.visible)return void(p.svgPath="");let t=b.pointId,e=x.pointId;w&&(clearTimeout(w),w=0),w=setTimeout((()=>{if(w=0,!b.visible||!x.visible)return;let t=b.pointId,e=x.pointId;m.get("fromId")!=t&&m.set("fromId",t),m.get("toId")!==e&&m.set("toId",e)}),400);let n=window.performance.now(),r=function(t,e){return y.find(t,e).map((t=>t.data))}(t,e),i=window.performance.now()-n;var o;p.noPath=0===r.length,p.svgPath=(o=r).length<1?"":(g=document.getElementById("my_g"),o.map(((t,e)=>{let n=0===e?"M":"";if(0==e){var r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.setAttribute("cx",t.x),r.setAttribute("cy",t.y),r.setAttribute("r",40),r.setAttribute("stroke","green"),r.setAttribute("stroke-width","4"),r.setAttribute("fill","yellow"),h.addCar(o),lastCarId=h.getLastCarId(),r.setAttribute("id","circle_"+lastCarId),g.appendChild(r)}return n+((i=t).x+",")+i.y;var i})).join(" ")),document.getElementById("my_path").setAttribute("d",p.svgPath),v.lastSearchTook=Math.round(100*i)/100+"ms",v.pathLength=function(t){let e=0;for(let n=1;n<t.length;++n)e+=H(t[n-1],t[n]);return Math.round(e).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}(r),v.visible=!0}function k(t,e,n=2e3){if(!E)return;let r=E.pointsAround(t,e,n).map((t=>S.getNode(t/2))).sort(((n,r)=>M(n.data,t,e)-M(r.data,t,e)));return r.length>0?r[0]:k(t,e,2*n)}function M(t,e,n){let r=t.x-e,i=t.y-n;return Math.sqrt(r*r+i*i)}function P(t){b.visible?x.visible||N(t,x):N(t,b)}function L(t,e){let n=e.getTransform().scale/e.getPixelRatio();return b.intersects(t.sceneX,t.sceneY,n)?b:x.intersects(t.sceneX,t.sceneY,n)?x:void 0}function B(t){let e=6/t.scale;document.getElementById("my_path").setAttributeNS(null,"stroke-width",e+"px"),t.scale,I.getPixelRatio()}function Z(t,e){return H(t.data,e.data)}function H(t,e){let n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function Y(){if(!S)return;let t=m.get("fromId"),e=m.get("toId"),n=S.getNode(t),r=S.getNode(e);n&&b.setFrom(n),r&&x.setFrom(r)}window.requestAnimationFrame((function t(){miliSecondsTime=Date.now(),h.cars.forEach((t=>{check=h.checkPassTheStopPoint(t.startPosition,t.stopPosition,t.currentPosition),check?h.updateCarStartStopPosition(t.id):(getFunction=t.currentFormula,newPosition=getFunction(miliSecondsTime),circle=document.getElementById("circle_"+t.id),h.updateSVG(circle,newPosition),t.currentPosition=newPosition)})),h.updateTime(miliSecondsTime),window.requestAnimationFrame(t)}))})()})();