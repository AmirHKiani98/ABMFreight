/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={96:(t,e,n)=>{var r=n(431),i={ease:r(.25,.1,.25,1),easeIn:r(.42,0,1,1),easeOut:r(0,0,.58,1),easeInOut:r(.42,0,.58,1),linear:r(0,0,1,1)};function o(){}function s(){var t=new Set,e=new Set,n=0;return{next:r,cancel:r,clearAll:function(){t.clear(),e.clear(),cancelAnimationFrame(n),n=0}};function r(t){e.add(t),n||(n=requestAnimationFrame(i))}function i(){n=0;var r=e;e=t,(t=r).forEach((function(t){t()})),t.clear()}}t.exports=function(t,e,n){var r=Object.create(null),s=Object.create(null),a="function"==typeof(n=n||{}).easing?n.easing:i[n.easing];a||(n.easing&&console.warn("Unknown easing function in amator: "+n.easing),a=i.ease);var u="function"==typeof n.step?n.step:o,l="function"==typeof n.done?n.done:o,h=function(t){if(!t)return"undefined"!=typeof window&&window.requestAnimationFrame?{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}:{next:function(t){return setTimeout(t,1e3/60)},cancel:function(t){return clearTimeout(t)}};if("function"!=typeof t.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!=typeof t.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return t}(n.scheduler),c=Object.keys(e);c.forEach((function(n){r[n]=t[n],s[n]=e[n]-t[n]}));var f,d="number"==typeof n.duration?n.duration:400,p=Math.max(1,.06*d),g=0;return f=h.next((function e(){var n=a(g/p);g+=1,function(e){c.forEach((function(n){t[n]=s[n]*e+r[n]}))}(n),g<=p?(f=h.next(e),u(t)):(f=0,setTimeout((function(){l(t)}),0))})),{cancel:function(){h.cancel(f),f=0}}},t.exports.makeAggregateRaf=s,t.exports.sharedScheduler=s()},431:t=>{var e=.1,n="function"==typeof Float32Array;function r(t,e){return 1-3*e+3*t}function i(t,e){return 3*e-6*t}function o(t){return 3*t}function s(t,e,n){return((r(e,n)*t+i(e,n))*t+o(e))*t}function a(t,e,n){return 3*r(e,n)*t*t+2*i(e,n)*t+o(e)}function u(t){return t}t.exports=function(t,r,i,o){if(!(0<=t&&t<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===r&&i===o)return u;for(var l=n?new Float32Array(11):new Array(11),h=0;h<11;++h)l[h]=s(h*e,t,i);return function(n){return 0===n?0:1===n?1:s(function(n){for(var r=0,o=1;10!==o&&l[o]<=n;++o)r+=e;--o;var u=r+(n-l[o])/(l[o+1]-l[o])*e,h=a(u,t,i);return h>=.001?function(t,e,n,r){for(var i=0;i<4;++i){var o=a(e,n,r);if(0===o)return e;e-=(s(e,n,r)-t)/o}return e}(n,u,t,i):0===h?u:function(t,e,n,r,i){var o,a,u=0;do{(o=s(a=e+(n-e)/2,r,i)-t)>0?n=a:e=a}while(Math.abs(o)>1e-7&&++u<10);return a}(n,r,r+e,t,i)}(n),r,o)}}},645:(t,e)=>{e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,l=u>>1,h=-7,c=n?i-1:0,f=n?-1:1,d=t[e+c];for(c+=f,o=d&(1<<-h)-1,d>>=-h,h+=a;h>0;o=256*o+t[e+c],c+=f,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=256*s+t[e+c],c+=f,h-=8);if(0===o)o=1-l;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=l}return(d?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,l=8*o-i-1,h=(1<<l)-1,c=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(s++,u/=2),s+c>=h?(a=0,s=h):s+c>=1?(a=(e*u-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;t[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[n+d]=255&s,d+=p,s/=256,l-=8);t[n+d-p]|=128*g}},245:t=>{t.exports=function(t){!function(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}(t);var e=function(t){var e=Object.create(null);return{on:function(n,r,i){if("function"!=typeof r)throw new Error("callback is expected to be a function");var o=e[n];return o||(o=e[n]=[]),o.push({callback:r,ctx:i}),t},off:function(n,r){if(void 0===n)return e=Object.create(null),t;if(e[n])if("function"!=typeof r)delete e[n];else for(var i=e[n],o=0;o<i.length;++o)i[o].callback===r&&i.splice(o,1);return t},fire:function(n){var r,i=e[n];if(!i)return t;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var o=0;o<i.length;++o){var s=i[o];s.callback.apply(s.ctx,r)}return t}}}(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},736:(t,e,n)=>{t.exports=function(t){if("uniqueLinkId"in(t=t||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),t.multigraph=t.uniqueLinkId),void 0===t.multigraph&&(t.multigraph=!1),"function"!=typeof Map)throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e,n=new Map,l=[],h={},c=0,f=t.multigraph?function(t,e,n){var r=u(t,e),i=h.hasOwnProperty(r);if(i||M(t,e)){i||(h[r]=0);var o="@"+ ++h[r];r=u(t+o,e+o)}return new a(t,e,n,r)}:function(t,e,n){return new a(t,e,n,u(t,e))},d=[],p=T,g=T,m=T,v=T,w={addNode:x,addLink:function(t,e,n){m();var r=A(t)||x(t),i=A(e)||x(e),o=f(t,e,n);return l.push(o),s(r,o),t!==e&&s(i,o),p(o,"add"),v(),o},removeLink:F,removeNode:S,getNode:A,getNodeCount:E,getLinkCount:_,getLinksCount:_,getNodesCount:E,getLinks:function(t){var e=A(t);return e?e.links:null},forEachNode:C,forEachLinkedNode:function(t,e,r){var i=A(t);if(i&&i.links&&"function"==typeof e)return r?function(t,e,r){for(var i=0;i<t.length;++i){var o=t[i];if(o.fromId===e&&r(n.get(o.toId),o))return!0}}(i.links,t,e):function(t,e,r){for(var i=0;i<t.length;++i){var o=t[i],s=o.fromId===e?o.toId:o.fromId;if(r(n.get(s),o))return!0}}(i.links,t,e)},forEachLink:function(t){var e,n;if("function"==typeof t)for(e=0,n=l.length;e<n;++e)t(l[e])},beginUpdate:m,endUpdate:v,clear:function(){m(),C((function(t){S(t.id)})),v()},hasLink:M,hasNode:A,getLink:M};return r(w),e=w.on,w.on=function(){return w.beginUpdate=m=I,w.endUpdate=v=P,p=b,g=y,w.on=e,e.apply(w,arguments)},w;function b(t,e){d.push({link:t,changeType:e})}function y(t,e){d.push({node:t,changeType:e})}function x(t,e){if(void 0===t)throw new Error("Invalid node identifier");m();var r=A(t);return r?(r.data=e,g(r,"update")):(r=new o(t,e),g(r,"add")),n.set(t,r),v(),r}function A(t){return n.get(t)}function S(t){var e=A(t);if(!e)return!1;m();var r=e.links;if(r){e.links=null;for(var i=0;i<r.length;++i)F(r[i])}return n.delete(t),g(e,"remove"),v(),!0}function E(){return n.size}function _(){return l.length}function F(t){if(!t)return!1;var e=i(t,l);if(e<0)return!1;m(),l.splice(e,1);var n=A(t.fromId),r=A(t.toId);return n&&(e=i(t,n.links))>=0&&n.links.splice(e,1),r&&(e=i(t,r.links))>=0&&r.links.splice(e,1),p(t,"remove"),v(),!0}function M(t,e){var n,r=A(t);if(!r||!r.links)return null;for(n=0;n<r.links.length;++n){var i=r.links[n];if(i.fromId===t&&i.toId===e)return i}return null}function T(){}function I(){c+=1}function P(){0==(c-=1)&&d.length>0&&(w.fire("changed",d),d.length=0)}function C(t){if("function"!=typeof t)throw new Error("Function is expected to iterate over graph nodes. You passed "+t);for(var e=n.values(),r=e.next();!r.done;){if(t(r.value))return!0;r=e.next()}}};var r=n(245);function i(t,e){if(!e)return-1;if(e.indexOf)return e.indexOf(t);var n,r=e.length;for(n=0;n<r;n+=1)if(e[n]===t)return n;return-1}function o(t,e){this.id=t,this.links=null,this.data=e}function s(t,e){t.links?t.links.push(e):t.links=[e]}function a(t,e,n,r){this.fromId=t,this.toId=e,this.data=n,this.id=r}function u(t,e){return t.toString()+"ðŸ‘‰ "+e.toString()}},39:t=>{function e(t,i){if(!(this instanceof e))return new e(t,i);if(Array.isArray(t)||(i=t,t=[]),i=i||{},this.data=t||[],this.length=this.data.length,this.compare=i.compare||r,this.setNodeId=i.setNodeId||n,this.length>0)for(var o=this.length>>1;o>=0;o--)this._down(o);if(i.setNodeId)for(o=0;o<this.length;++o)this.setNodeId(this.data[o],o)}function n(){}function r(t,e){return t-e}t.exports=e,e.prototype={push:function(t){this.data.push(t),this.setNodeId(t,this.length),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this.setNodeId(this.data[0],0),this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},updateItem:function(t){this._down(t),this._up(t)},_up:function(t){for(var e=this.data,n=this.compare,r=this.setNodeId,i=e[t];t>0;){var o=t-1>>1,s=e[o];if(n(i,s)>=0)break;e[t]=s,r(s,t),t=o}e[t]=i,r(i,t)},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t],o=this.setNodeId;t<r;){var s=1+(t<<1),a=s+1,u=e[s];if(a<this.length&&n(e[a],u)<0&&(s=a,u=e[a]),n(u,i)>=0)break;e[t]=u,o(u,t),t=s}e[t]=i,o(i,t)}}},394:(t,e,n)=>{t.exports=function(t,e){var n=(e=e||{}).oriented,o=e.heuristic;o||(o=s.heuristic);var u=e.distance;u||(u=s.distance);var l=i();return{find:function(e,i){var h=t.getNode(e);if(!h)throw new Error("fromId is not defined in this graph: "+e);var c=t.getNode(i);if(!c)throw new Error("toId is not defined in this graph: "+i);if(h===c)return[h];l.reset();var f=n?function(t,e){if(1===A){if(e.fromId===S.node.id)return _(t,e,S)}else if(2===A&&e.toId===S.node.id)return _(t,e,S)}:function(t,e){return _(t,e,S)},d=new Map,p=new r({compare:s.compareFScore,setNodeId:s.setHeapIndex}),g=new r({compare:s.compareFScore,setNodeId:s.setHeapIndex}),m=l.createNewState(h);d.set(e,m),m.fScore=o(h,c),m.distanceToSource=0,p.push(m),m.open=1;var v=l.createNewState(c);v.fScore=o(c,h),v.distanceToSource=0,g.push(v),v.open=2;for(var w,b,y=Number.POSITIVE_INFINITY,x=p,A=1;p.length>0&&g.length>0;){p.length<g.length?(A=1,x=p):(A=2,x=g);var S=x.pop();if(S.closed=!0,!(S.distanceToSource>y)&&(t.forEachLinkedNode(S.node.id,f),w&&b))return E(w,b)}return a;function E(t,e){for(var n=[],r=t;r;)n.push(r.node),r=r.parent;for(var i=e;i;)n.unshift(i.node),i=i.parent;return n}function _(t,e,n){var r,i=d.get(t.id);if(i||(i=l.createNewState(t),d.set(t.id,i)),!i.closed)if((r=i.open)&&r!==A){var s=i.distanceToSource+n.distanceToSource;s<y&&(w=i,b=n,y=s)}else{var a=n.distanceToSource+u(i.node,n.node,e);if(!(a>=i.distanceToSource)){var f=1===A?c:h,p=a+o(i.node,f);p>=y||(i.fScore=p,0===i.open&&(x.push(i),x.updateItem(i.heapIndex),i.open=A),i.parent=n,i.distanceToSource=a)}}}}}};var r=n(39),i=n(492),o=n(276),s=n(100),a=s.NO_PATH;t.exports.l2=o.l2,t.exports.l1=o.l1},5:(t,e,n)=>{t.exports=function(t,e){var n=(e=e||{}).oriented,o=e.heuristic;o||(o=s.heuristic);var l=e.distance;l||(l=s.distance);var h=i();return{find:function(e,i){var c=t.getNode(e);if(!c)throw new Error("fromId is not defined in this graph: "+e);var f=t.getNode(i);if(!f)throw new Error("toId is not defined in this graph: "+i);h.reset();var d,p,g,m=new Map,v=new r({compare:s.compareFScore,setNodeId:s.setHeapIndex}),w=h.createNewState(c);for(m.set(e,w),w.fScore=o(c,f),w.distanceToSource=0,v.push(w),w.open=1;v.length>0;){if(p=d=v.pop(),g=f,p.node===g)return u(d);d.closed=!0,t.forEachLinkedNode(d.node.id,b,n)}return a;function b(t,e){var n=m.get(t.id);if(n||(n=h.createNewState(t),m.set(t.id,n)),!n.closed){0===n.open&&(v.push(n),n.open=1);var r=d.distanceToSource+l(t,d.node,e);r>=n.distanceToSource||(n.parent=d,n.distanceToSource=r,n.fScore=r+o(n.node,f),v.updateItem(n.heapIndex))}}}}};var r=n(39),i=n(492),o=n(276),s=n(100),a=s.NO_PATH;function u(t){for(var e=[t.node],n=t.parent;n;)e.push(n.node),n=n.parent;return e}t.exports.l2=o.l2,t.exports.l1=o.l1},100:t=>{var e=[];"function"==typeof Object.freeze&&Object.freeze(e),t.exports={heuristic:function(){return 0},distance:function(){return 1},compareFScore:function(t,e){return t.fScore-e.fScore},NO_PATH:e,setHeapIndex:function(t,e){t.heapIndex=e},setH1:function(t,e){t.h1=e},setH2:function(t,e){t.h2=e},compareF1Score:function(t,e){return t.f1-e.f1},compareF2Score:function(t,e){return t.f2-e.f2}}},276:t=>{t.exports={l2:function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},l1:function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.abs(n)+Math.abs(r)}}},492:t=>{function e(t){this.node=t,this.parent=null,this.closed=!1,this.open=0,this.distanceToSource=Number.POSITIVE_INFINITY,this.fScore=Number.POSITIVE_INFINITY,this.heapIndex=-1}t.exports=function(){var t=0,n=[];return{createNewState:function(r){var i=n[t];return i?(i.node=r,i.parent=null,i.closed=!1,i.open=0,i.distanceToSource=Number.POSITIVE_INFINITY,i.fScore=Number.POSITIVE_INFINITY,i.heapIndex=-1):(i=new e(r),n[t]=i),t++,i},reset:function(){t=0}}}},238:(t,e,n)=>{t.exports=function(t,e){var n=(e=e||{}).oriented,i=e.quitFast,u=e.heuristic;u||(u=o.heuristic);var l=e.distance;l||(l=o.distance);var h=s();return{find:function(e,s){var c=t.getNode(e);if(!c)throw new Error("fromId is not defined in this graph: "+e);var f=t.getNode(s);if(!f)throw new Error("toId is not defined in this graph: "+s);h.reset();var d,p=n?function(t,e){if(e.fromId===S.node.id)return _(t,e)}:_,g=n?function(t,e){if(e.toId===S.node.id)return F(t,e)}:F,m=new Map,v=new r({compare:o.compareF1Score,setNodeId:o.setH1}),w=new r({compare:o.compareF2Score,setNodeId:o.setH2}),b=Number.POSITIVE_INFINITY,y=h.createNewState(c);m.set(e,y),y.g1=0;var x=u(c,f);y.f1=x,v.push(y);var A=h.createNewState(f);m.set(s,A),A.g2=0;var S,E=x;for(A.f2=E,w.push(A);w.length&&v.length&&(v.length<w.length?(S=v.pop()).closed||(S.closed=!0,S.f1<b&&S.g1+E-u(c,S.node)<b&&t.forEachLinkedNode(S.node.id,p),v.length>0&&(x=v.peek().f1)):(S=w.pop()).closed||(S.closed=!0,S.f2<b&&S.g2+x-u(S.node,f)<b&&t.forEachLinkedNode(S.node.id,g),w.length>0&&(E=w.peek().f2)),!i||!d););return function(t){if(!t)return a;for(var e=[t.node],n=t.p1;n;)e.push(n.node),n=n.p1;for(var r=t.p2;r;)e.unshift(r.node),r=r.p2;return e}(d);function _(t,e){var n=m.get(t.id);if(n||(n=h.createNewState(t),m.set(t.id,n)),!n.closed){var r=S.g1+l(S.node,t,e);r<n.g1&&(n.g1=r,n.f1=r+u(n.node,f),n.p1=S,n.h1<0?v.push(n):v.updateItem(n.h1));var i=n.g1+n.g2;i<b&&(b=i,d=n)}}function F(t,e){var n=m.get(t.id);if(n||(n=h.createNewState(t),m.set(t.id,n)),!n.closed){var r=S.g2+l(S.node,t,e);r<n.g2&&(n.g2=r,n.f2=r+u(c,n.node),n.p2=S,n.h2<0?w.push(n):w.updateItem(n.h2));var i=n.g1+n.g2;i<b&&(b=i,d=n)}}}}};var r=n(39),i=n(276),o=n(100),s=n(653),a=o.NO_PATH;t.exports.l2=i.l2,t.exports.l1=i.l1},653:t=>{function e(t){this.node=t,this.p1=null,this.p2=null,this.closed=!1,this.g1=Number.POSITIVE_INFINITY,this.g2=Number.POSITIVE_INFINITY,this.f1=Number.POSITIVE_INFINITY,this.f2=Number.POSITIVE_INFINITY,this.h1=-1,this.h2=-1}t.exports=function(){var t=0,n=[];return{createNewState:function(r){var i=n[t];return i?(i.node=r,i.p1=null,i.p2=null,i.closed=!1,i.g1=Number.POSITIVE_INFINITY,i.g2=Number.POSITIVE_INFINITY,i.f1=Number.POSITIVE_INFINITY,i.f2=Number.POSITIVE_INFINITY,i.h1=-1,i.h2=-1):(i=new e(r),n[t]=i),t++,i},reset:function(){t=0}}}},901:(t,e,n)=>{t.exports={aStar:n(5),aGreedy:n(394),nba:n(238)}},614:(t,e,n)=>{"use strict";t.exports=i;var r=n(645);function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o=4294967296,s=1/o,a="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function u(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function l(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function h(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function c(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function f(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function g(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function m(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function v(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function w(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function b(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function y(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function x(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function A(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=y(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=A(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=y(this.buf,this.pos)+y(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=y(this.buf,this.pos)+A(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return l(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return l(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return l(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return l(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return l(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return l(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&a?function(t,e,n){return a.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,s,a,u=t[i],l=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h>n)break;1===h?u<128&&(l=u):2===h?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===h?(o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&((l=(15&u)<<12|(63&o)<<6|63&s)<=2047||l>=55296&&l<=57343)&&(l=null)):4===h&&(o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&((l=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,h=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=h}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var n=u(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=u(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(t*s),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&h(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&h(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,i.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,v,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,w,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,b,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},959:t=>{t.exports=function(t,e,n,r){var i=0,o=0,s=(r=r||{}).step||1,a=r.maxTimeMS||8,u=r.probeElements||5e3;setTimeout((function r(){var l=Math.min(t.length,i+u),h=i,c=new Date;for(h=i;h<l;h+=s)e(t[h],h,t);h<t.length?(o+=new Date-c,i=h,u=Math.round(i*a/o),setTimeout(r,0)):n(t)}),0)}},621:(t,e,n)=>{var r;!function(i){var o=/^\s+/,s=/\s+$/,a=0,u=i.round,l=i.min,h=i.max,c=i.random;function f(t,e){if(e=e||{},(t=t||"")instanceof f)return t;if(!(this instanceof f))return new f(t,e);var n=function(t){var e,n,r,a={r:0,g:0,b:0},u=1,c=null,f=null,d=null,p=!1,g=!1;return"string"==typeof t&&(t=function(t){t=t.replace(o,"").replace(s,"").toLowerCase();var e,n=!1;if(P[t])t=P[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=X.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=X.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=X.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=X.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=X.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=X.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=X.hex8.exec(t))?{r:L(e[1]),g:L(e[2]),b:L(e[3]),a:O(e[4]),format:n?"name":"hex8"}:(e=X.hex6.exec(t))?{r:L(e[1]),g:L(e[2]),b:L(e[3]),format:n?"name":"hex"}:(e=X.hex4.exec(t))?{r:L(e[1]+""+e[1]),g:L(e[2]+""+e[2]),b:L(e[3]+""+e[3]),a:O(e[4]+""+e[4]),format:n?"name":"hex8"}:!!(e=X.hex3.exec(t))&&{r:L(e[1]+""+e[1]),g:L(e[2]+""+e[2]),b:L(e[3]+""+e[3]),format:n?"name":"hex"}}(t)),"object"==typeof t&&(z(t.r)&&z(t.g)&&z(t.b)?(e=t.r,n=t.g,r=t.b,a={r:255*R(e,255),g:255*R(n,255),b:255*R(r,255)},p=!0,g="%"===String(t.r).substr(-1)?"prgb":"rgb"):z(t.h)&&z(t.s)&&z(t.v)?(c=V(t.s),f=V(t.v),a=function(t,e,n){t=6*R(t,360),e=R(e,100),n=R(n,100);var r=i.floor(t),o=t-r,s=n*(1-e),a=n*(1-o*e),u=n*(1-(1-o)*e),l=r%6;return{r:255*[n,a,s,s,u,n][l],g:255*[u,n,n,a,s,s][l],b:255*[s,s,u,n,n,a][l]}}(t.h,c,f),p=!0,g="hsv"):z(t.h)&&z(t.s)&&z(t.l)&&(c=V(t.s),d=V(t.l),a=function(t,e,n){var r,i,o;function s(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=R(t,360),e=R(e,100),n=R(n,100),0===e)r=i=o=n;else{var a=n<.5?n*(1+e):n+e-n*e,u=2*n-a;r=s(u,a,t+1/3),i=s(u,a,t),o=s(u,a,t-1/3)}return{r:255*r,g:255*i,b:255*o}}(t.h,c,d),p=!0,g="hsl"),t.hasOwnProperty("a")&&(u=t.a)),u=N(u),{ok:p,format:t.format||g,r:l(255,h(a.r,0)),g:l(255,h(a.g,0)),b:l(255,h(a.b,0)),a:u}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=u(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=u(this._r)),this._g<1&&(this._g=u(this._g)),this._b<1&&(this._b=u(this._b)),this._ok=n.ok,this._tc_id=a++}function d(t,e,n){t=R(t,255),e=R(e,255),n=R(n,255);var r,i,o=h(t,e,n),s=l(t,e,n),a=(o+s)/2;if(o==s)r=i=0;else{var u=o-s;switch(i=a>.5?u/(2-o-s):u/(o+s),o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,l:a}}function p(t,e,n){t=R(t,255),e=R(e,255),n=R(n,255);var r,i,o=h(t,e,n),s=l(t,e,n),a=o,u=o-s;if(i=0===o?0:u/o,o==s)r=0;else{switch(o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,v:a}}function g(t,e,n,r){var i=[B(u(t).toString(16)),B(u(e).toString(16)),B(u(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function m(t,e,n,r){return[B(D(r)),B(u(t).toString(16)),B(u(e).toString(16)),B(u(n).toString(16))].join("")}function v(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.s-=e/100,n.s=k(n.s),f(n)}function w(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.s+=e/100,n.s=k(n.s),f(n)}function b(t){return f(t).desaturate(100)}function y(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.l+=e/100,n.l=k(n.l),f(n)}function x(t,e){e=0===e?0:e||10;var n=f(t).toRgb();return n.r=h(0,l(255,n.r-u(-e/100*255))),n.g=h(0,l(255,n.g-u(-e/100*255))),n.b=h(0,l(255,n.b-u(-e/100*255))),f(n)}function A(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.l-=e/100,n.l=k(n.l),f(n)}function S(t,e){var n=f(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,f(n)}function E(t){var e=f(t).toHsl();return e.h=(e.h+180)%360,f(e)}function _(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+120)%360,s:e.s,l:e.l}),f({h:(n+240)%360,s:e.s,l:e.l})]}function F(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+90)%360,s:e.s,l:e.l}),f({h:(n+180)%360,s:e.s,l:e.l}),f({h:(n+270)%360,s:e.s,l:e.l})]}function M(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+72)%360,s:e.s,l:e.l}),f({h:(n+216)%360,s:e.s,l:e.l})]}function T(t,e,n){e=e||6,n=n||30;var r=f(t).toHsl(),i=360/n,o=[f(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(f(r));return o}function I(t,e){e=e||6;for(var n=f(t).toHsv(),r=n.h,i=n.s,o=n.v,s=[],a=1/e;e--;)s.push(f({h:r,s:i,v:o})),o=(o+a)%1;return s}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r=this.toRgb();return t=r.r/255,e=r.g/255,n=r.b/255,.2126*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=N(t),this._roundA=u(100*this._a)/100,this},toHsv:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=p(this._r,this._g,this._b),e=u(360*t.h),n=u(100*t.s),r=u(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=d(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=d(this._r,this._g,this._b),e=u(360*t.h),n=u(100*t.s),r=u(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return g(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var o=[B(u(t).toString(16)),B(u(e).toString(16)),B(u(n).toString(16)),B(D(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:u(this._r),g:u(this._g),b:u(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+u(this._r)+", "+u(this._g)+", "+u(this._b)+")":"rgba("+u(this._r)+", "+u(this._g)+", "+u(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:u(100*R(this._r,255))+"%",g:u(100*R(this._g,255))+"%",b:u(100*R(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+u(100*R(this._r,255))+"%, "+u(100*R(this._g,255))+"%, "+u(100*R(this._b,255))+"%)":"rgba("+u(100*R(this._r,255))+"%, "+u(100*R(this._g,255))+"%, "+u(100*R(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(C[g(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+m(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=f(t);n="#"+m(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return f(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(y,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(A,arguments)},desaturate:function(){return this._applyModification(v,arguments)},saturate:function(){return this._applyModification(w,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(S,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(E,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(M,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(F,arguments)}},f.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:V(t[r]));t=n}return f(t,e)},f.equals=function(t,e){return!(!t||!e)&&f(t).toRgbString()==f(e).toRgbString()},f.random=function(){return f.fromRatio({r:c(),g:c(),b:c()})},f.mix=function(t,e,n){n=0===n?0:n||50;var r=f(t).toRgb(),i=f(e).toRgb(),o=n/100;return f({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},f.readability=function(t,e){var n=f(t),r=f(e);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},f.isReadable=function(t,e,n){var r,i,o,s,a,u=f.readability(t,e);switch(i=!1,(o=n,"AA"!==(s=((o=o||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==s&&(s="AA"),"small"!==(a=(o.size||"small").toLowerCase())&&"large"!==a&&(a="small"),r={level:s,size:a}).level+r.size){case"AAsmall":case"AAAlarge":i=u>=4.5;break;case"AAlarge":i=u>=3;break;case"AAAsmall":i=u>=7}return i},f.mostReadable=function(t,e,n){var r,i,o,s,a=null,u=0;i=(n=n||{}).includeFallbackColors,o=n.level,s=n.size;for(var l=0;l<e.length;l++)(r=f.readability(t,e[l]))>u&&(u=r,a=f(e[l]));return f.isReadable(t,a,{level:o,size:s})||!i?a:(n.includeFallbackColors=!1,f.mostReadable(t,["#fff","#000"],n))};var P=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=f.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(P);function N(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function R(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=l(e,h(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),i.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function k(t){return l(1,h(0,t))}function L(t){return parseInt(t,16)}function B(t){return 1==t.length?"0"+t:""+t}function V(t){return t<=1&&(t=100*t+"%"),t}function D(t){return i.round(255*parseFloat(t)).toString(16)}function O(t){return L(t)/255}var Y,j,U,X=(j="[\\s|\\(]+("+(Y="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+Y+")[,|\\s]+("+Y+")\\s*\\)?",U="[\\s|\\(]+("+Y+")[,|\\s]+("+Y+")[,|\\s]+("+Y+")[,|\\s]+("+Y+")\\s*\\)?",{CSS_UNIT:new RegExp(Y),rgb:new RegExp("rgb"+j),rgba:new RegExp("rgba"+U),hsl:new RegExp("hsl"+j),hsla:new RegExp("hsla"+U),hsv:new RegExp("hsv"+j),hsva:new RegExp("hsva"+U),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function z(t){return!!X.CSS_UNIT.exec(t)}t.exports?t.exports=f:void 0===(r=function(){return f}.call(e,n,e,t))||(t.exports=r)}(Math)},697:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Element:()=>c,LineStripCollection:()=>it,Point:()=>W,PointCollection:()=>G,WireCollection:()=>et,createScene:()=>Y,createSpaceMapCamera:()=>B,isWebGLEnabled:()=>ot,scene:()=>Y,toSVG:()=>ut,utils:()=>j});var r=n(245),i=n.n(r),o=1e-6,s="undefined"!=typeof Float32Array?Float32Array:Array;function a(){var t=new s(16);return s!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function u(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],l=e[7],h=e[8],c=e[9],f=e[10],d=e[11],p=e[12],g=e[13],m=e[14],v=e[15],w=n*a-r*s,b=n*u-i*s,y=n*l-o*s,x=r*u-i*a,A=r*l-o*a,S=i*l-o*u,E=h*g-c*p,_=h*m-f*p,F=h*v-d*p,M=c*m-f*g,T=c*v-d*g,I=f*v-d*m,P=w*I-b*T+y*M+x*F-A*_+S*E;return P?(P=1/P,t[0]=(a*I-u*T+l*M)*P,t[1]=(i*T-r*I-o*M)*P,t[2]=(g*S-m*A+v*x)*P,t[3]=(f*A-c*S-d*x)*P,t[4]=(u*F-s*I-l*_)*P,t[5]=(n*I-i*F+o*_)*P,t[6]=(m*y-p*S-v*b)*P,t[7]=(h*S-f*y+d*b)*P,t[8]=(s*T-a*F+l*E)*P,t[9]=(r*F-n*T-o*E)*P,t[10]=(p*A-g*y+v*w)*P,t[11]=(c*y-h*A-d*w)*P,t[12]=(a*_-s*M-u*E)*P,t[13]=(n*M-r*_+i*E)*P,t[14]=(g*b-p*x-m*w)*P,t[15]=(h*x-c*b+f*w)*P,t):null}function l(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=e[9],d=e[10],p=e[11],g=e[12],m=e[13],v=e[14],w=e[15],b=n[0],y=n[1],x=n[2],A=n[3];return t[0]=b*r+y*a+x*c+A*g,t[1]=b*i+y*u+x*f+A*m,t[2]=b*o+y*l+x*d+A*v,t[3]=b*s+y*h+x*p+A*w,b=n[4],y=n[5],x=n[6],A=n[7],t[4]=b*r+y*a+x*c+A*g,t[5]=b*i+y*u+x*f+A*m,t[6]=b*o+y*l+x*d+A*v,t[7]=b*s+y*h+x*p+A*w,b=n[8],y=n[9],x=n[10],A=n[11],t[8]=b*r+y*a+x*c+A*g,t[9]=b*i+y*u+x*f+A*m,t[10]=b*o+y*l+x*d+A*v,t[11]=b*s+y*h+x*p+A*w,b=n[12],y=n[13],x=n[14],A=n[15],t[12]=b*r+y*a+x*c+A*g,t[13]=b*i+y*u+x*f+A*m,t[14]=b*o+y*l+x*d+A*v,t[15]=b*s+y*h+x*p+A*w,t}function h(t,e){var n=new s(3);!function(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],s=e[5],a=e[6],u=e[8],l=e[9],h=e[10];t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(o,s,a),t[2]=Math.hypot(u,l,h)}(n,e);var r=1/n[0],i=1/n[1],o=1/n[2],a=e[0]*r,u=e[1]*i,l=e[2]*o,h=e[4]*r,c=e[5]*i,f=e[6]*o,d=e[8]*r,p=e[9]*i,g=e[10]*o,m=a+c+g,v=0;return m>0?(v=2*Math.sqrt(m+1),t[3]=.25*v,t[0]=(f-p)/v,t[1]=(d-l)/v,t[2]=(u-h)/v):a>c&&a>g?(v=2*Math.sqrt(1+a-c-g),t[3]=(f-p)/v,t[0]=.25*v,t[1]=(u+h)/v,t[2]=(d+l)/v):c>g?(v=2*Math.sqrt(1+c-a-g),t[3]=(d-l)/v,t[0]=(u+h)/v,t[1]=.25*v,t[2]=(f+p)/v):(v=2*Math.sqrt(1+g-a-c),t[3]=(u-h)/v,t[0]=(d+l)/v,t[1]=(f+p)/v,t[2]=.25*v),t}Math.random,Math.PI,Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});const c=class{constructor(){this.children=[],this.model=a(),this.worldModel=a(),this.worldTransformNeedsUpdate=!0,this.type="Element",this.scene=null}appendChild(t,e){t.parent=this,e?this.children.unshift(t):this.children.push(t),t.bindScene&&t.bindScene(this.scene),this.scene&&this.scene.renderFrame()}bindScene(t){this.scene=t}traverse(t,e){t(this);for(var n=0;n<this.children.length;++n)this.children[n].traverse(t,e);e&&e(this)}rotate(t,e){return function(t,e,n,r){var i,s,a,u,l,h,c,f,d,p,g,m,v,w,b,y,x,A,S,E,_,F,M,T,I=r[0],P=r[1],C=r[2],N=Math.hypot(I,P,C);N<o||(I*=N=1/N,P*=N,C*=N,i=Math.sin(n),a=1-(s=Math.cos(n)),u=e[0],l=e[1],h=e[2],c=e[3],f=e[4],d=e[5],p=e[6],g=e[7],m=e[8],v=e[9],w=e[10],b=e[11],y=I*I*a+s,x=P*I*a+C*i,A=C*I*a-P*i,S=I*P*a-C*i,E=P*P*a+s,_=C*P*a+I*i,F=I*C*a+P*i,M=P*C*a-I*i,T=C*C*a+s,t[0]=u*y+f*x+m*A,t[1]=l*y+d*x+v*A,t[2]=h*y+p*x+w*A,t[3]=c*y+g*x+b*A,t[4]=u*S+f*E+m*_,t[5]=l*S+d*E+v*_,t[6]=h*S+p*E+w*_,t[7]=c*S+g*E+b*_,t[8]=u*F+f*M+m*T,t[9]=l*F+d*M+v*T,t[10]=h*F+p*M+w*T,t[11]=c*F+g*M+b*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]))}(this.model,this.model,t,e),this.worldTransformNeedsUpdate=!0,this.scene&&this.scene.renderFrame(),this}rotateX(t){return function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],s=e[5],a=e[6],u=e[7],l=e[8],h=e[9],c=e[10],f=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=s*i+h*r,t[6]=a*i+c*r,t[7]=u*i+f*r,t[8]=l*i-o*r,t[9]=h*i-s*r,t[10]=c*i-a*r,t[11]=f*i-u*r}(this.model,this.model,t),this.worldTransformNeedsUpdate=!0,this.scene&&this.scene.renderFrame(),this}rotateY(t){return function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],l=e[8],h=e[9],c=e[10],f=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-l*r,t[1]=s*i-h*r,t[2]=a*i-c*r,t[3]=u*i-f*r,t[8]=o*r+l*i,t[9]=s*r+h*i,t[10]=a*r+c*i,t[11]=u*r+f*i}(this.model,this.model,t),this.worldTransformNeedsUpdate=!0,this.scene&&this.scene.renderFrame(),this}rotateZ(t){return function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],s=e[1],a=e[2],u=e[3],l=e[4],h=e[5],c=e[6],f=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=s*i+h*r,t[2]=a*i+c*r,t[3]=u*i+f*r,t[4]=l*i-o*r,t[5]=h*i-s*r,t[6]=c*i-a*r,t[7]=f*i-u*r}(this.model,this.model,t),this.worldTransformNeedsUpdate=!0,this.scene&&this.scene.renderFrame(),this}scale(t){return function(t,e,n){var r=n[0],i=n[1],o=n[2];t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(this.model,this.model,t),this.worldTransformNeedsUpdate=!0,this.scene&&this.scene.renderFrame(),this}translate(t){return function(t,e,n){var r,i,o,s,a,u,l,h,c,f,d,p,g=n[0],m=n[1],v=n[2];e===t?(t[12]=e[0]*g+e[4]*m+e[8]*v+e[12],t[13]=e[1]*g+e[5]*m+e[9]*v+e[13],t[14]=e[2]*g+e[6]*m+e[10]*v+e[14],t[15]=e[3]*g+e[7]*m+e[11]*v+e[15]):(r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],l=e[6],h=e[7],c=e[8],f=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=s,t[4]=a,t[5]=u,t[6]=l,t[7]=h,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=r*g+a*m+c*v+e[12],t[13]=i*g+u*m+f*v+e[13],t[14]=o*g+l*m+d*v+e[14],t[15]=s*g+h*m+p*v+e[15])}(this.model,this.model,t),this.worldTransformNeedsUpdate=!0,this.scene&&this.scene.renderFrame(),this}removeChild(t){let e=this.children.indexOf(t);e>-1&&this.children.splice(e,1),this.scene&&this.scene.renderFrame()}updateWorldTransform(t){var e,n;(this.worldTransformNeedsUpdate||t)&&(this.parent?l(this.worldModel,this.parent.worldModel,this.model):(e=this.worldModel,n=this.model,e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),this.worldTransformNeedsUpdate=!1,t=!0);let r=t;for(var i=this.children,o=0;o<i.length;o++)r=i[o].updateWorldTransform(t)||r;return r}draw(t,e){for(var n=0;n<this.children.length;++n)this.children[n].draw(t,e)}dispose(){for(var t=0;t<this.children.length;++t)this.children[t].dispose()}};function f(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*s,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*s,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*s,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*s,t}var d;function p(){var t=new s(3);return s!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function g(t,e,n){var r=new s(3);return r[0]=t,r[1]=e,r[2]=n,r}function m(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function v(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function w(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function b(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}d=new s(4),s!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[3]=0);var y=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t};function x(){var t=new s(4);return s!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}p();p(),g(1,0,0),g(0,1,0),x(),x(),function(){var t=new s(9);s!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1}();let A=[0,0,0];const S=[1,0,0],E=[0,1,0],_=[0,0,1];class F{constructor(t){this.matrix=t||a(),this.cameraWorld=u(a(),this.matrix),this.position=[0,0,0],this.rotation=[0,0,0,1],this.deconstructPositionRotation()}lookAt(t,e,n){return function(t,e,n,r){var i,s,a,u,l,h,c,f,d,p,g=e[0],m=e[1],v=e[2],w=r[0],b=r[1],y=r[2],x=n[0],A=n[1],S=n[2];Math.abs(g-x)<o&&Math.abs(m-A)<o&&Math.abs(v-S)<o?function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1}(t):(c=g-x,f=m-A,d=v-S,i=b*(d*=p=1/Math.hypot(c,f,d))-y*(f*=p),s=y*(c*=p)-w*d,a=w*f-b*c,(p=Math.hypot(i,s,a))?(i*=p=1/p,s*=p,a*=p):(i=0,s=0,a=0),u=f*a-d*s,l=d*i-c*a,h=c*s-f*i,(p=Math.hypot(u,l,h))?(u*=p=1/p,l*=p,h*=p):(u=0,l=0,h=0),t[0]=i,t[1]=u,t[2]=c,t[3]=0,t[4]=s,t[5]=l,t[6]=f,t[7]=0,t[8]=a,t[9]=h,t[10]=d,t[11]=0,t[12]=-(i*g+s*m+a*v),t[13]=-(u*g+l*m+h*v),t[14]=-(c*g+f*m+d*v),t[15]=1)}(this.cameraWorld,t,e,n),this.deconstructPositionRotation(),this}update(){return function(t,e,n){var r=e[0],i=e[1],o=e[2],s=e[3],a=r+r,u=i+i,l=o+o,h=r*a,c=r*u,f=r*l,d=i*u,p=i*l,g=o*l,m=s*a,v=s*u,w=s*l;t[0]=1-(d+g),t[1]=c+w,t[2]=f-v,t[3]=0,t[4]=c-w,t[5]=1-(h+g),t[6]=p+m,t[7]=0,t[8]=f+v,t[9]=p-m,t[10]=1-(h+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1}(this.cameraWorld,this.rotation,this.position),u(this.matrix,this.cameraWorld),this}deconstructPositionRotation(){!function(t,e){t[0]=e[12],t[1]=e[13],t[2]=e[14]}(this.position,this.cameraWorld),h(this.rotation,this.cameraWorld)}translateOnAxis(t,e){let n=function(t,e,n){var r=n[0],i=n[1],o=n[2],s=n[3],a=e[0],u=e[1],l=e[2],h=i*l-o*u,c=o*a-r*l,f=r*u-i*a,d=i*f-o*c,p=o*h-r*f,g=r*c-i*h,m=2*s;return h*=m,c*=m,f*=m,d*=2,p*=2,g*=2,t[0]=a+h+d,t[1]=u+c+p,t[2]=l+f+g,t}(A,t,this.rotation);return v(this.position,this.position,n,e),this}translateX(t){return this.translateOnAxis(S,t)}translateY(t){return this.translateOnAxis(E,t)}translateZ(t){return this.translateOnAxis(_,t)}}var M,T=n(96),I=n.n(T);function P(t,e,n){"object"!=typeof n&&(n={});let r,i,o,s,a,u,l,h,c,f,d=.001,p="number"==typeof n.minVelocity?n.minVelocity:d,g="number"==typeof n.amplitude?n.amplitude:.01,m="function"==typeof n.cancelAnimationFrame?n.cancelAnimationFrame:C(),v="function"==typeof n.requestAnimationFrame?n.requestAnimationFrame:N();return{start:function(){r=t(),a=l=s=u=h=0,i=new Date,m(o),m(f),o=v(w)},setAmplitude:function(t){g=t},getAmplitude:function(){return g},stop:function(){o&&(m(o),o=0,m(f),f=0,b(s,u,h))},impulse:b,cancel:function(){m(o),m(f)}};function w(){var e=Date.now(),n=e-i;i=e;var a=t(),l=a.x-r.x,c=a.y-r.y,f=(a.z||0)-r.z;r=a;var d=1e3/(1+n);s=.8*l*d+.2*s,u=.8*c*d+.2*u,h=.8*f*d+.2*h,o=v(w)}function b(t,e,n){i=Date.now(),(t<-p||t>p)&&(a=g*t),(e<-p||e>p)&&(l=g*e),(n<-p||n>p)&&(c=g*n),f=v(y)}function y(){var n=Date.now()-i,r=!1,o=0,s=0,u=0;let h=Math.exp(-n/342);if(a&&((o=a*h)>d||o<-d?r=!0:o=a=0),l&&((s=l*h)>d||s<-d?r=!0:s=l=0),c&&((u=c*h)>d||u<-d?r=!0:u=c=0),r){let n=t();e(n.x+o,n.y+s,n.z+u),f=v(y)}}}function C(){return"function"==typeof cancelAnimationFrame?cancelAnimationFrame:clearTimeout}function N(){return"function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){return setTimeout(t,16)}}class R{constructor(t){this.x=t.clientX,this.y=t.clientY,this.lastX=this.x,this.lastY=this.y,this.id=t.identifier,this.createdAt=Date.now()}move(t){this.lastX=this.x,this.lastY=this.y,this.x=t.clientX,this.y=t.clientY}}class k{constructor(t){this.allowRotation=t,this.state=0,this.canRotate=!1,this.canScale=!1,this.canIncline=!1,this.first=void 0,this.second=void 0}reset(){this.state=0,this.canRotate=!1,this.canScale=!1,this.canIncline=!1,this.first=void 0,this.second=void 0}isUnknown(){return 0===this.state}track(t,e){if(this.stateChanged=!1,0!==this.state)return;if(!this.first||!this.second)return this.first={id:t.id,x:t.x,y:t.y},void(this.second={id:e.id,x:e.x,y:e.y});let n=this.first,r=this.second;if(t.id===r.id&&e.id===n.id){let t=n;n=r,r=t}let i=n.y-r.y,o=n.x-r.x,s=t.y-e.y,a=t.x-e.x,u=Math.abs(Math.hypot(i,o)-Math.hypot(s,a)),l=Math.atan2(i,o),h=Math.abs(l-Math.atan2(s,a));if(l=180*Math.abs(l)/Math.PI,(l<60||180-l<60)&&this.allowRotation&&Math.abs(t.createdAt-e.createdAt)<100){let i=t.x-n.x+e.x-r.x,o=t.y-n.y+e.y-r.y;Math.abs(i)<10&&Math.abs(o)>42&&(this.canIncline=!0)}this.canIncline?(this.canRotate=!1,this.canScale=!1,this.canIncline=!0,this.state=3):h>.1&&this.allowRotation?(this.canRotate=!0,this.canScale=!0,this.canIncline=!1,this.state=2):u>15&&(this.canRotate=!1,this.canScale=!0,this.canIncline=!1,this.state=1),this.stateChanged=!0}}function L(t,e,n){return Math.abs(t)<e?n:t}function B(t,e){let n=e.view,r=2*Math.PI,i=1.618*Math.PI,o=t.getOptions()||{},s=void 0===o.allowRotation||!!t.allowRotation,a=1,u=O(o.minPhi,-1/0),l=O(o.maxPhi,1/0),c=D(-Math.PI/2,u,l),f=[0,0,1],d=O(o.minTheta,0),p=O(o.maxTheta,Math.PI),g=D(0,d,p),x=e.center,A=n.position,S=P((function(){return{x:x[0],y:x[1],z:x[2]}}),(function(t,e,n){m(x,t,e,n),B()})),E=P((function(){return{x:c,y:g,z:0}}),(function(t,e){g=D(e,d,p),c=D(t,u,l),B()}),{minVelocity:1});const _={dispose:function(){E.cancel(),S.cancel(),T.dispose(),M.dispose(),C.dispose()},setViewBox:function(){A=n.position,a=Math.hypot(A[2]),x=[A[0],A[1],0],g=D(0,d,p),c=D(-Math.PI/2,u,l),B()},panByAbsoluteOffset:function(t,n){let r=e.width/e.height,i=2*a*Math.tan(e.fov/2);!function(t,e){let n=Math.cos(c),r=Math.sin(c);x[0]+=n*e+r*t,x[1]+=r*e-n*t}(r*i*t/window.innerWidth,-(i*n/window.innerHeight))},rotateByAngle:function(t,e){c=D(c+t,u,l),g=D(g+e,d,p)},rotateByAbsoluteOffset:function(t,n){if(!s)return;let o=e.width/e.height;c-=r*t/e.width,g-=i*n/e.height*o,g=D(g,d,p),c=D(c,u,l)},zoomCenterByScaleFactor:N,zoomToClientCoordinates:function(e,n,r,i){let o=function(e,n){let r=t.getSceneCoordinate(e,n),i=y([],[r.x,r.y,r.z],A);w(i,i);let o=b(f,i);if(Math.abs(o)>1e-7){let t=b(y([],x,A),f)/o;return v([],A,i,t)}}(e,n),s=o[0]-x[0],u=o[1]-x[1];if(i){let t={r:a,x:x[0],y:x[1]},e={r:a*(1-r),x:t.x+s*r,y:t.y+u*r};I()(t,e,{step(t){a=t.r,x[0]=t.x,x[1]=t.y,B()}})}else N(r,s,u),B()},redraw:B,allowRotation:s,rotateAnimation:E,panAnimation:S};let F=e.canvas;const M=function(t,e){let n=0,r=0,i=0,o=0,s=0,a=0,u=0,l=0,h=0,c=0,f=0;return t.getAttribute("tabindex")||t.setAttribute("tabindex",0),t.addEventListener("keydown",g),t.addEventListener("keyup",m),{dispose:function(){t.removeEventListener("keydown",g),t.removeEventListener("keyup",m),cancelAnimationFrame(n)}};function d(){n=0;let t=.9,d=!1;if(o=L(o*t+r,.5,0),s=L(s*t+i,.5,0),(o||s)&&(e.panByAbsoluteOffset(o,s),d=!0),a=L(a*t+u/2,Math.PI/360,0),c=L(c*t+f/6,Math.PI/360,0),(a||c)&&(e.rotateByAbsoluteOffset(a,c),d=!0),l=L(.7*l+h,.5,0),l){let t=.025*Math.sign(l);e.zoomCenterByScaleFactor(t,0,0),d=!0}d&&(e.redraw(),p())}function p(){n||(n=requestAnimationFrame(d))}function g(t){v(t,1)}function m(t){v(t,0)}function v(t,e){if(!function(t){return t.altKey||t.ctrlKey||t.metaKey}(t)){switch(t.which){case 81:u=-e;break;case 69:u=e;break;case 187:h=e;break;case 189:h=-e;break;case 82:f=e;break;case 70:f=-e;break;case 37:case 65:r=e;break;case 39:case 68:r=-e;break;case 38:case 87:i=e;break;case 40:case 83:i=-e}p()}}}(F,_),T=function(t,e){let n,r=!1,i=new Map,{allowRotation:o,panAnimation:s,rotateAnimation:a}=e,u=new k(o),l=Date.now(),h=l;return t.addEventListener("touchstart",c,{passive:!1}),{dispose:function(){t.removeEventListener("touchstart",c,{passive:!1}),p()}};function c(t){r||(document.addEventListener("touchmove",f,{passive:!1}),document.addEventListener("touchend",d,{passive:!1}),document.addEventListener("touchcancel ",d,{passive:!1}),r=!0),s.cancel(),a.cancel(),1===t.touches.length&&s.start();for(let e=0;e<t.touches.length;++e){let n=t.touches[e];i.has(n.identifier)||i.set(n.identifier,new R(n))}t.stopPropagation(),t.preventDefault()}function f(t){let n,r,o=Date.now(),c=0,f=0,d=0,p=0,g=!1,m=t.touches;for(let t=0;t<m.length;++t){let e=m[t],o=i.get(e.identifier);o&&(o.move(e),d+=o.x,p+=o.y,c+=o.x-o.lastX,f+=o.y-o.lastY,n?r||(r=o):n=o)}let v=m.length;if(c/=v,f/=v,d/=v,p/=v,r||u.reset(),n&&r){h=o;let i=r.x-n.x,l=r.y-n.y,c=r.lastX-n.lastX,f=r.lastY-n.lastY,m=Math.hypot(i,l)/Math.hypot(c,f)-1,v=Math.atan2(l,i)-Math.atan2(f,c);if(u.track(n,r),u.stateChanged&&(a.start(),s.cancel()),u.canScale&&(e.zoomToClientCoordinates(d,p,m),g=!0),u.canRotate&&(e.rotateByAngle(v,0),g=!0),u.canIncline){let t=r.y-r.lastY+n.y-n.lastY;e.rotateByAbsoluteOffset(0,t),g=!0}t.preventDefault(),t.stopPropagation()}let w=o-l,b=u.canIncline||w<300||t.touches.length>1&&u.isUnknown();0===c&&0===f||b||(e.panByAbsoluteOffset(c,f),g=!0),g&&e.redraw()}function d(t){let o=Date.now(),c=o-l;l=o;let f=t.changedTouches;for(let t=0;t<f.length;++t){let e=f[t];i.delete(e.identifier)}if(t.touches.length<2&&(u.reset(),a.stop(),s.stop()),0===t.touches.length&&i.clear(),0===i.size&&1===t.changedTouches.length){if(r=!1,p(),s.stop(),c<350&&o-h>350){let r=t.changedTouches[0],i=Math.abs(r.clientX-n.clientX),o=Math.abs(r.clientY-n.clientY);Math.hypot(i,o)<30&&e.zoomToClientCoordinates(n.clientX,n.clientY,.5,!0)}n=t.changedTouches[0]}}function p(){document.removeEventListener("touchmove",f,{passive:!1}),document.removeEventListener("touchend",d,{passive:!1}),document.removeEventListener("touchcancel ",d,{passive:!1})}}(F,_),C=function(t,e){let n,r,i,{allowRotation:o,panAnimation:s,rotateAnimation:a}=e;return t.addEventListener("wheel",f,{passive:!1}),t.addEventListener("mousedown",u,{passive:!1}),t.addEventListener("dblclick",c,{passive:!1}),{dispose:function(){t.removeEventListener("wheel",f,{passive:!1}),t.removeEventListener("mousedown",u,{passive:!1}),t.removeEventListener("dblclick",c,{passive:!1}),document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",h)}};function u(t){(1===t.button&&null!==window.event||0===t.button)&&(document.addEventListener("mousemove",l),document.addEventListener("mouseup",h),n=t.clientX,r=t.clientY,i=t.altKey&&o,s.cancel(),a.cancel(),i?a.start():s.start())}function l(t){let o=t.clientY-r,s=t.clientX-n;i?e.rotateByAbsoluteOffset(s,o):e.panByAbsoluteOffset(s,o),n=t.clientX,r=t.clientY,e.redraw()}function h(){document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",h),i?a.stop():s.stop()}function c(t){e.zoomToClientCoordinates(t.clientX,t.clientY,.5,!0),t.preventDefault(),t.stopPropagation()}function f(t){let n=t.deltaMode>0?100:1,r=(i=-t.deltaY*n,Math.sign(i)*Math.min(.25,Math.abs(i/128)));var i;e.zoomToClientCoordinates(t.clientX,t.clientY,r),t.preventDefault()}}(F,_);return B(),_;function N(t,e,n){a*=1-t,x[0]+=e*t,x[1]+=n*t}function B(){let r=V(a,g,c),i=Math.hypot(a,1),o=V(i,g-Math.acos(a/i),c);y(o,o,r),m(A,r[0],r[1],r[2]),function(t,e,n){t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2]}(A,A,x),function(t,e,n,r){var i=e[0],o=e[1],s=e[2],a=r[0],u=r[1],l=r[2],h=i-n[0],c=o-n[1],f=s-n[2],d=h*h+c*c+f*f;d>0&&(h*=d=1/Math.sqrt(d),c*=d,f*=d);var p=u*f-l*c,g=l*h-a*f,m=a*c-u*h;(d=p*p+g*g+m*m)>0&&(p*=d=1/Math.sqrt(d),g*=d,m*=d),t[0]=p,t[1]=g,t[2]=m,t[3]=0,t[4]=c*m-f*g,t[5]=f*p-h*m,t[6]=h*g-c*p,t[7]=0,t[8]=h,t[9]=c,t[10]=f,t[11]=0,t[12]=i,t[13]=o,t[14]=s,t[15]=1}(n.matrix,A,x,o),h(n.rotation,n.matrix),n.update(),t.fire("transform",e),t.renderFrame()}}function V(t,e,n){let r=t*Math.cos(e);return[t*Math.sin(e)*Math.cos(n),t*Math.sin(e)*Math.sin(n),r]}function D(t,e,n){return t<e&&(t=e),t>n&&(t=n),t}function O(t,e){return void 0===t?e:t}function Y(t,e){var n,r;e||(e={});var o=e.devicePixelRatio||window.devicePixelRatio,s=e.wglContext,h=t.getContext("webgl",s)||t.getContext("experimental-webgl",s);h.enable(h.BLEND),h.blendFuncSeparate(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA),h.clearColor(0,0,0,1),h.clear(h.COLOR_BUFFER_BIT);var d=0,p=new c,g=!1,m=!1,v=new F,b=a(),x=a(),A=void 0===e.fov?45*Math.PI/180:e.fov,S=void 0===e.near?.01:e.near,E=void 0===e.far?1/0:e.far,_={width:window.innerWidth,height:window.innerHeight,pixelRatio:o,canvas:t,projection:b,view:v,fov:A,center:[0,0,0]};N();var M=i()({appendChild:function(t,e){p.appendChild(t,e),M.fire("append-child",t)},getSceneCoordinate:L,getClientCoordinate:function(t,e,i=0){var o=l(a(),b,v.matrix);l(o,o,p.model);var s=f([],[t,e,i,1],o),u=M.getPixelRatio();return{x:n*(s[0]/s[3]+1)*.5/u,y:r*(1-.5*(s[1]/s[3]+1))/u}},getTransform:function(){return p.model},getRoot:function(){return p},getGL:function(){return h},removeChild:function(t){p.removeChild(t),M.fire("remove-child",t)},setViewBox:function(t){const e=_.pixelRatio*Math.max((t.top-t.bottom)/2,(t.right-t.left)/2),{position:n,rotation:r}=_.view;n[0]=(t.left+t.right)/2,n[1]=(t.top+t.bottom)/2,n[2]=e/Math.tan(_.fov/2),function(t,e,n,r,i){t[0]=e,t[1]=n,t[2]=r,t[3]=i}(r,0,0,0,1),_.view.update(),I.setViewBox&&I.setViewBox(t)},setClearColor:function(t,e,n,r){h.clearColor(t,e,n,r)},getClearColor:function(){return h.getParameter(h.COLOR_CLEAR_VALUE)},clear:function(){h.clear(h.COLOR_BUFFER_BIT)},dispose:function(){t.removeEventListener("mousemove",k),P&&P(),window.removeEventListener("resize",C,!0),I.dispose(),p.dispose(),d&&(cancelAnimationFrame(d),d=0)},renderFrame:V,getPixelRatio:function(){return o},setPixelRatio:function(t){o=t,_.pixelRatio=o,N()},getCamera:function(){return I},setCamera:function(t){I&&I.dispose(),I=t(M,_)},getDrawContext:function(){return _},getOptions:function(){return e}});let T=M.on;M.on=function(t,e,n){return"click"===t&&(g=!0),"mousemove"===t&&(m=!0),T(t,e,n)},p.bindScene(M);let I=(e.camera||B)(M,_);var P;return function(){t.addEventListener("mousemove",k),P=function(t,e,n){var r,i=new Date;return t.addEventListener("click",a,{passive:!1}),t.addEventListener("touchend",s,{passive:!1}),t.addEventListener("touchstart",o,{passive:!1}),function(){t.removeEventListener("click",a),t.removeEventListener("touchend",s),t.removeEventListener("touchstart",o)};function o(t){1===t.touches.length&&(i=new Date,r={x:t.touches[0].pageX,y:t.touches[0].pageY})}function s(t){if(t.touches.length>1)return;if(new Date-i>300)return;let e=t.changedTouches[0];var n=e.pageX-r.x,o=e.pageY-r.y;n*n+o*o<25&&a(e)}function a(t){e.call(n,t)}}(t,R,this),window.addEventListener("resize",C,!0)}(),V(),M;function C(){N()}function N(){e.size?(n=t.width=e.size.width,r=t.height=e.size.height):(n=t.width=t.offsetWidth*o,r=t.height=t.offsetHeight*o),h.viewport(0,0,n,r),_.width=n,_.height=r,p.worldTransformNeedsUpdate=!0,function(t,e,n,r,i){var o,s=1/Math.tan(e/2);t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r)}(b,A,n/r,S,E),x=u(a(),b),V()}function R(t){if(g){var e=L(t.clientX,t.clientY);e&&M.fire("click",{originalEvent:t,sceneX:e.x,sceneY:e.y})}}function k(t){if(m){var e=L(t.clientX,t.clientY);e&&M.fire("mousemove",{originalEvent:t,x:e.x,y:e.y,z:e.z})}}function L(t,e){var i=M.getPixelRatio();let o=f([],[i*t/n*2-1,2*(1-i*e/r)-1,0,1],x);o[0]/=o[3],o[1]/=o[3],o[2]/=o[3],o[3]/=o[3],f(o,o,v.cameraWorld),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3],o[3]/=o[3],y(o,o,v.position),w(o,o);var s=(0-v.position[2])/o[2];return o[2],function(t,e,n,r){t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r}(o,v.position,o,s),{x:o[0],y:o[1],z:o[2]}}function V(t){if(t)return D();d||(d=requestAnimationFrame(D))}function D(){h.clear(h.COLOR_BUFFER_BIT),_.wasDirty=p.updateWorldTransform(),p.draw(h,_),d=0}}M=Float64Array,s=M;const j={compile:function(t,e,n){var r=t.createShader(e);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(r));return r},link:function(t,e,n){var r=t.createProgram();if(t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS))throw new Error(t.getProgramInfoLog(r));return r},getLocations:function(t,e){return{attributes:U(t,e),uniforms:X(t,e)}},getAttributes:U,getUniforms:X,initBuffer:function(t,e,n,r){var i=t.createBuffer();if(!i)throw new Error("Failed to create a buffer");t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.vertexAttribPointer(r,n,t.FLOAT,!1,0,0),t.enableVertexAttribArray(r)}};function U(t,e){for(var n=Object.create(null),r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<r;++i){var o=t.getActiveAttrib(e,i).name;n[o]=t.getAttribLocation(e,o)}return n}function X(t,e){for(var n=Object.create(null),r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<r;++i){var o=t.getActiveUniform(e,i).name;n[o]=t.getUniformLocation(e,o)}return n}function z(){let t=new Map;return{get:function(e){if(!e)return;let n,r=t;for(let t=0;t<e.length;++t){let i=e[t];if(n=r.get(i),!n)return;r=n}return n},set:function(e,n){let r=t;for(let t=0;t<e.length-1;++t){let n=e[t],i=r.get(n);i||(i=new Map,r.set(n,i)),r=i}r.set(e[e.length-1],n)},remove:function(e){let n=t;for(let t=0;t<e.length-1;++t){let r=e[t],i=n.get(r);if(!i)return;n=i}n.delete(e[e.length-1])}}}let q=z();function $(t,e,n,r,i){for(var o=0,s=0,a=t-n;a<t+n;++a)if(!(a<0||a>=i))for(var u=e-n;u<e+n;++u)u<0||u>=i||(o+=r[4*(a*i+u)+3],s+=1);return o/s}const H=class{constructor(t,e,n,r){this.r=t,this.g=e,this.b=n,this.a=void 0===r?1:r}};class G extends c{constructor(t,e){if(void 0===t)throw new Error("Point capacity should be defined");super(),this.is3D=!e||void 0===e.is3D||e.is3D,this.allowColors=!e||void 0===e.allowColors||e.allowColors,this.itemsPerPoint=3,this.is3D&&(this.itemsPerPoint+=1),this.allowColors&&(this.itemsPerPoint+=1),this.capacity=t,this.count=0,this.color=new H(1,1,1,1),this._program=null,this.buffer=new ArrayBuffer(t*this.itemsPerPoint*4),this.positions=new Float32Array(this.buffer),this.allowColors&&(this.colors=new Uint32Array(this.buffer))}draw(t,e){this._program||(this._program=function(t,e){let n=!!e.allowColors,r=[n,t],i=q.get(r);if(!i){const{fragmentShaderCode:e,vertexShaderCode:o}=function(t){return{fragmentShaderCode:"\n  precision highp float;\n  varying vec4 vColor;\n  uniform sampler2D texture;\n\n  void main() {\n    vec4 tColor = texture2D(texture, gl_PointCoord);\n    gl_FragColor = vec4(vColor.rgb, tColor.a);\n  }\n  ",vertexShaderCode:`attribute float aPointSize;\n  attribute vec3 aPosition;\n  varying vec4 vColor;\n  ${t?"attribute vec4 aColor;":""}\n  uniform vec4 uColor;\n  uniform mat4 projectionMatrix;\n  uniform mat4 uModel;\n  uniform mat4 uView;\n  uniform vec3 uOrigin;\n\n  void main() {\n    mat4 modelView = uView * uModel;\n    vec4 mvPosition = modelView * vec4( aPosition, 1.0 );\n\n    vec4 glPos = projectionMatrix * mvPosition;\n    gl_Position = glPos;\n    vec4 glOrigin = modelView * vec4(uOrigin, 1.0);\n    float cameraDist = length( glPos.xyz - glOrigin.xyz );\n    gl_PointSize = max(aPointSize * 128./cameraDist, 2.);\n    vColor = ${t?"aColor.abgr":"uColor"};\n  }\n`}}(n);let s=j.compile(t,t.VERTEX_SHADER,o),a=j.compile(t,t.FRAGMENT_SHADER,e);i=j.link(t,s,a),q.set(r,i)}let o=j.getLocations(t,i),s=t.createBuffer();if(!s)throw new Error("failed to create a nodesBuffer");let a=function(t){var e=t.createTexture();if(!e)throw new Error("Failed to create circle texture");t.bindTexture(t.TEXTURE_2D,e);var n=function(t){for(var e=new Uint8Array(t*t*4),n=(t-8)/2,r=0;r<t;++r)for(var i=r*t,o=0;o<t;++o){var s=4*(i+o),a=r-n,u=o-n,l=Math.sqrt(u*u+a*a);if(l<n){var h=1-l/n;e[s+3]=h>.3?255:255*h}else e[s+3]=0}return function(t,e){for(var n=new Uint8Array(e*e*4),r=0;r<e;++r)for(var i=0;i<e;++i)n[4*(r*e+i)+3]=$(r,i,3,t,e);return n}(e,t)}(64);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,64,64,0,t.RGBA,t.UNSIGNED_BYTE,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.generateMipmap(t.TEXTURE_2D),e}(t),u=e.is3D?3:2,l=4*u,h=4*(u+1),c=4*(u+2),f=4*(u+1);return{draw:function(r){if(!e.count)return;t.useProgram(i);let d=e.buffer;if(t.uniformMatrix4fv(o.uniforms.uModel,!1,e.worldModel),t.uniformMatrix4fv(o.uniforms.projectionMatrix,!1,r.projection),t.uniformMatrix4fv(o.uniforms.uView,!1,r.view.matrix),t.uniform3fv(o.uniforms.uOrigin,r.view.position),t.bindTexture(t.TEXTURE_2D,a),t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,d,t.DYNAMIC_DRAW),n)t.enableVertexAttribArray(o.attributes.aPosition),t.vertexAttribPointer(o.attributes.aPosition,u,t.FLOAT,!1,c,0),t.enableVertexAttribArray(o.attributes.aPointSize),t.vertexAttribPointer(o.attributes.aPointSize,1,t.FLOAT,!1,c,l),t.enableVertexAttribArray(o.attributes.aColor),t.vertexAttribPointer(o.attributes.aColor,4,t.UNSIGNED_BYTE,!0,c,h);else{t.enableVertexAttribArray(o.attributes.aPosition),t.vertexAttribPointer(o.attributes.aPosition,u,t.FLOAT,!1,f,0),t.enableVertexAttribArray(o.attributes.aPointSize),t.vertexAttribPointer(o.attributes.aPointSize,1,t.FLOAT,!1,f,l);let n=e.color;t.uniform4f(o.uniforms.uColor,n.r,n.g,n.b,n.a)}t.drawArrays(t.POINTS,0,e.count)},dispose:function(){t.deleteProgram(i),t.deleteTexture(a),q.remove(r)}}}(t,this)),this._program.draw(e)}dispose(){this._program&&(this._program=null)}add(t,e){if(!t)throw new Error("Point is required");this.count>=this.capacity&&this._extendArray();var n=this.count*this.itemsPerPoint;let r=new class{constructor(t,e,n){this.offset=e,this._points=t,void 0!==n&&(this.data=n)}update(t){let e=this.offset,n=this._points.positions,r=this._points.is3D;n[e]=t.x,e++,n[e]=t.y,e++,r&&(n[e]=t.z||0,e++);let i=t.size||this._points.size||1;i&&(n[e]=i),this.setColor(t.color)}setColor(t){if(this._points.colors){var e=this.offset+(this._points.is3D?4:3);this._points.colors[e]=t}}}(this,n,e);return r.update(t),this.count+=1,r}_extendArray(){var t=new ArrayBuffer(2*this.buffer.byteLength),e=new Float32Array(t);this.positions&&e.set(this.positions),this.buffer=t,this.positions=e,this.allowColors&&(this.colors=new Uint32Array(t)),this.capacity*=2}}const W=class{constructor(t,e,n){if(Number.isNaN(t))throw new Error("x is not a number");if(Number.isNaN(e))throw new Error("y is not a number");this.x=t,this.y=e,this.color=new H(255,255,255),this.size=Number.isFinite(n)?n:4}};let K=z();function Z(t,e){let n=!!e.allowColors,r=[n,t],i=K.get(r);if(!i){const{frag:e,vert:a}=function(t){return{vert:`attribute vec3 aPosition;\n  varying vec4 vColor;\n  ${t?"attribute vec4 aColor;":""}\n  uniform vec4 uColor;\n  uniform mat4 projectionMatrix;\n  uniform mat4 uModel;\n  uniform mat4 uView;\n\nvoid main() {\n  gl_Position = projectionMatrix * uView * uModel * vec4(aPosition, 1.0);\n  vColor = ${t?"aColor.abgr":"uColor"};\n}`,frag:"precision mediump float;\n    varying vec4 vColor;\n    void main() {\n      gl_FragColor = vColor;\n    }"}}(n);var o=j.compile(t,t.VERTEX_SHADER,a),s=j.compile(t,t.FRAGMENT_SHADER,e);i=j.link(t,o,s),K.set(r,i)}let a=j.getLocations(t,i),u=t.createBuffer(),l=e.is3D?3:2,h=4*(l+1),c=4*l;return{draw:function(r){if(0===e.count)return;let o=e.buffer;t.useProgram(i),t.uniformMatrix4fv(a.uniforms.uModel,!1,e.worldModel),t.uniformMatrix4fv(a.uniforms.projectionMatrix,!1,r.projection),t.uniformMatrix4fv(a.uniforms.uView,!1,r.view.matrix);var s=e.color;t.uniform4f(a.uniforms.uColor,s.r,s.g,s.b,s.a),t.bindBuffer(t.ARRAY_BUFFER,u),e.isDirtyBuffer&&(t.bufferData(t.ARRAY_BUFFER,o,t.STATIC_DRAW),e.isDirtyBuffer=!1),t.enableVertexAttribArray(a.attributes.aPosition),n?(t.vertexAttribPointer(a.attributes.aPosition,l,t.FLOAT,!1,h,0),t.enableVertexAttribArray(a.attributes.aColor),t.vertexAttribPointer(a.attributes.aColor,4,t.UNSIGNED_BYTE,!0,h,c)):t.vertexAttribPointer(a.attributes.aPosition,l,t.FLOAT,!1,4*l,0),t.drawArrays(t.LINES,0,2*e.count)},dispose:function(){t.deleteBuffer(u),t.deleteProgram(i),K.remove(r)}}}let Q=z();class J{constructor(t,e){this.offset=e,this._wire=t,this.update=t.is3D?this.update3D:this.update2D}update2D(t,e){this._wire.isDirtyBuffer=!0;var n=this._wire.positions,r=this.offset;n[r+0]=t.x,n[r+1]=t.y,r+=2;var i=this._wire.allowColors;i&&(void 0!==t.color&&(this._wire.colors[r]=t.color),r+=1),n[r+0]=e.x,n[r+1]=e.y,i&&e.color&&(this._wire.colors[r+2]=e.color)}update3D(t,e){this._wire.isDirtyBuffer=!0;var n=this._wire.positions,r=this.offset;n[r+0]=t.x,n[r+1]=t.y,n[r+2]=t.z||0,r+=3;var i=this._wire.allowColors;i&&(void 0!==t.color?this._wire.colors[r]=t.color:this._wire.colors[r]=tt(this._wire.color),r+=1),n[r+0]=e.x,n[r+1]=e.y,n[r+2]=e.z||0,i&&(e.color?this._wire.colors[r+3]=e.color:this._wire.colors[r+3]=tt(this._wire.color))}}function tt(t){return Math.round(255*t.r)<<24|Math.round(255*t.g)<<16|Math.round(255*t.b)<<8|Math.round(255*t.a)}const et=class extends c{constructor(t,e){super(),this.allowColors=!e||void 0===e.allowColors||e.allowColors,this.is3D=!e||void 0===e.is3D||e.is3D,this.itemsPerLine=4,this.is3D&&(this.itemsPerLine+=2),this.allowColors&&(this.itemsPerLine+=2),this.capacity=t,this.count=0,this.color=new H(1,1,1,1),this.type="WireCollection",this._program=null,this.buffer=new ArrayBuffer(t*this.itemsPerLine*4),this.positions=new Float32Array(this.buffer),this.width=e&&e.width,this.allowColors&&(this.colors=new Uint32Array(this.buffer))}draw(t,e){this._program||(this._program=nt(this.width)?function(t,e){let n;if(!(Number.isFinite(e.width)&&e.width>0&&1!==e.width))return Z(t,e);if(n=t.getExtension("ANGLE_instanced_arrays"),!n)return console.error("ANGLE_instanced_arrays is not supported, thick lines are not possible"),Z(t,e);let r=!!e.allowColors,i=[r,t],o=Q.get(i);if(!o){const{frag:e,vert:n}=function(t){return{vert:`attribute vec3 aPosition, aFrom, aTo;\n    varying vec4 vColor;\n    ${t?"attribute vec4 aFromColor, aToColor;":""}\n    uniform vec4 uColor;\n    uniform mat4 projectionMatrix;\n    uniform mat4 uModel;\n    uniform mat4 uView;\n    uniform float uWidth;\n    uniform vec2 uResolution;\n  \n  void main() {\n    vec4 clip0 = projectionMatrix * uView * uModel * vec4(aFrom, 1.0);\n    vec4 clip1 = projectionMatrix * uView * uModel * vec4(aTo, 1.0);\n    vec2 screen0 = uResolution * (0.5 * clip0.xy/clip0.w + 0.5);\n    vec2 screen1 = uResolution * (0.5 * clip1.xy/clip1.w + 0.5);\n    vec2 xBasis = normalize(screen1 - screen0);\n    vec2 yBasis = vec2(-xBasis.y, xBasis.x);\n    vec2 pt0 = screen0 + uWidth * (aPosition.x * xBasis + aPosition.y * yBasis);\n    vec2 pt1 = screen1 + uWidth * (aPosition.x * xBasis + aPosition.y * yBasis);\n    vec2 pt = mix(pt0, pt1, aPosition.z);\n    vec4 clip = mix(clip0, clip1, aPosition.z);\n    gl_Position = vec4(clip.w * (2.0 * pt/uResolution - 1.0), clip.z, clip.w);\n\n    vColor = ${t?"mix(aFromColor.abgr, aToColor.abgr, aPosition.z)":"uColor"};\n  }`,frag:"precision mediump float;\n    varying vec4 vColor;\n    void main() {\n      gl_FragColor = vColor;\n    }"}}(r);var s=j.compile(t,t.VERTEX_SHADER,n),a=j.compile(t,t.FRAGMENT_SHADER,e);o=j.link(t,s,a),Q.set(i,o)}let u=j.getLocations(t,o),l=t.createBuffer(),h=e.is3D?3:2,c=r?2*(h+1)*4:2*h*4;const f=t.createBuffer(),d=new Float32Array([0,-.5,0,0,-.5,1,0,.5,1,0,-.5,0,0,.5,1,0,.5,0]);return{isThickWire:!0,draw:function(i){if(0===e.count)return;let s=e.buffer;t.useProgram(o),t.uniformMatrix4fv(u.uniforms.uModel,!1,e.worldModel),t.uniformMatrix4fv(u.uniforms.projectionMatrix,!1,i.projection),t.uniformMatrix4fv(u.uniforms.uView,!1,i.view.matrix),t.uniform3fv(u.uniforms.uOrigin,i.view.position),t.uniform1f(u.uniforms.uWidth,e.width),t.uniform2f(u.uniforms.uResolution,i.width,i.height);var a=e.color;t.uniform4f(u.uniforms.uColor,a.r,a.g,a.b,a.a),t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferData(t.ARRAY_BUFFER,d,t.STATIC_DRAW),t.enableVertexAttribArray(u.attributes.aPosition),t.vertexAttribPointer(u.attributes.aPosition,3,t.FLOAT,!1,0,0),n.vertexAttribDivisorANGLE(u.attributes.aPosition,0),t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferData(t.ARRAY_BUFFER,s,t.DYNAMIC_DRAW),t.enableVertexAttribArray(u.attributes.aFrom),t.vertexAttribPointer(u.attributes.aFrom,h,t.FLOAT,!1,c,0),n.vertexAttribDivisorANGLE(u.attributes.aFrom,1),r?(t.enableVertexAttribArray(u.attributes.aFromColor),t.vertexAttribPointer(u.attributes.aFromColor,4,t.UNSIGNED_BYTE,!0,c,4*h),n.vertexAttribDivisorANGLE(u.attributes.aFromColor,1),t.enableVertexAttribArray(u.attributes.aTo),t.vertexAttribPointer(u.attributes.aTo,h,t.FLOAT,!1,c,4*(h+1)),n.vertexAttribDivisorANGLE(u.attributes.aTo,1),t.enableVertexAttribArray(u.attributes.aToColor),t.vertexAttribPointer(u.attributes.aToColor,4,t.UNSIGNED_BYTE,!0,c,4*(2*h+1)),n.vertexAttribDivisorANGLE(u.attributes.aToColor,1)):(t.enableVertexAttribArray(u.attributes.aTo),t.vertexAttribPointer(u.attributes.aTo,h,t.FLOAT,!1,c,4*h),n.vertexAttribDivisorANGLE(u.attributes.aTo,1)),n.drawArraysInstancedANGLE(t.TRIANGLES,0,6,e.count),n.vertexAttribDivisorANGLE(u.attributes.aFrom,0),n.vertexAttribDivisorANGLE(u.attributes.aTo,0),n.vertexAttribDivisorANGLE(u.attributes.aFromColor,0),n.vertexAttribDivisorANGLE(u.attributes.aToColor,0)},dispose:function(){l&&t.deleteBuffer(l),f&&t.deleteBuffer(f),u&&(t.disableVertexAttribArray(u.attributes.aFrom),t.disableVertexAttribArray(u.attributes.aFromColor),t.disableVertexAttribArray(u.attributes.aTo),t.disableVertexAttribArray(u.attributes.aToColor),t.disableVertexAttribArray(u.attributes.aPosition)),t.deleteProgram(o),Q.remove(i)}}}(t,this):Z(t,this)),this._program.draw(e)}setLineWidth(t){if(t===this.width)return;let e=nt(t);if(this.width=t,!this._program||!this.scene)return;if(e&&this._program.isThickWire)return void this.scene.renderFrame();let n=this.parent;n.removeChild(this),this.dispose(),n.appendChild(this)}add(t){if(!t)throw new Error("Line is required");this.count>=this.capacity&&this._extendArray();var e=this.count*this.itemsPerLine;let n=new J(this,e);return n.update(t.from,t.to),this.count+=1,n}forEachLine(t){const{positions:e,count:n,itemsPerLine:r,allowColors:i}=this;let o=n*r;if(this.is3D)for(let n=0;n<o;n+=r){let r={x:e[n],y:e[n+1],z:e[n+2]},o=n+3;i&&(r.color=this.colors[n+3],o+=1);let s={x:e[o],y:e[o+1],z:e[o+2]};i&&(s.color=this.colors[o+3]),t(r,s)}else for(let n=0;n<o;n+=r){let r={x:e[n],y:e[n+1],z:0},o=n+2;i&&(r.color=this.colors[n+2],o+=1);let s={x:e[o],y:e[o+1],z:0};i&&(s.color=this.colors[o+2]),t(r,s)}}dispose(){this._program&&(this._program=null)}_extendArray(){var t=new ArrayBuffer(2*this.buffer.byteLength),e=new Float32Array(t);this.positions&&e.set(this.positions),this.buffer=t,this.positions=e,this.allowColors&&(this.colors=new Uint32Array(t)),this.capacity*=2}};function nt(t){return void 0!==t&&1!==t&&t>0}let rt=z();class it extends c{constructor(t,e){super(),this.drawCount=0,this.madeFullCircle=!1,this.allowColors=!e||void 0===e.allowColors||e.allowColors,this.is3D=!e||void 0===e.is3D||e.is3D,this.itemsPerLine=2,this.allowColors&&(this.itemsPerLine+=1),this.is3D&&(this.itemsPerLine+=1),this.capacity=t,this.nextElementIndex=1,this._program=null,this.color=new H(1,1,1,1),this.buffer=new ArrayBuffer((t+1)*this.itemsPerLine*4),this.positions=new Float32Array(this.buffer),this.allowColors&&(this.colors=new Uint32Array(this.buffer))}draw(t,e){this._program||(this._program=function(t,e){let{allowColors:n,is3D:r}=e;n=!!n;const i=[n,t];let o=rt.get(i);const s=2+(n?1:0)+(r?1:0);let a=e.buffer;if(!o){const{lineFSSrc:e,lineVSSrc:r}=function(t){return{lineVSSrc:`attribute vec3 aPosition;\n  varying vec4 vColor;\n  ${t?"attribute vec4 aColor;":""}\n  uniform vec4 uColor;\n  uniform mat4 projectionMatrix;\n  uniform mat4 uModel;\n  uniform mat4 uView;\n  void main() {\n    gl_Position = projectionMatrix * uView * uModel * vec4(aPosition, 1.0);\n    vColor = ${t?"aColor.abgr":"uColor"};\n  }`,lineFSSrc:"precision mediump float;\nvarying vec4 vColor;\nvoid main() {\n  gl_FragColor = vColor;\n}\n"}}(n);var u=j.compile(t,t.VERTEX_SHADER,r),l=j.compile(t,t.FRAGMENT_SHADER,e);o=j.link(t,u,l),rt.set(i,o)}var h=j.getLocations(t,o);let c=r?3:2,f=4*(c+1),d=4*c;var p=t.createBuffer();return{draw:function(e,r){if(0===a.length)return;t.useProgram(o),t.uniformMatrix4fv(h.uniforms.uModel,!1,e.worldModel),t.uniformMatrix4fv(h.uniforms.projectionMatrix,!1,r.projection),t.uniformMatrix4fv(h.uniforms.uView,!1,r.view.matrix),t.uniform3fv(h.uniforms.uOrigin,r.view.position);let{color:i,nextElementIndex:u,madeFullCircle:l}=e;if(t.uniform4f(h.uniforms.uColor,i.r,i.g,i.b,i.a),t.bindBuffer(t.ARRAY_BUFFER,p),t.enableVertexAttribArray(h.attributes.aPosition),t.bufferData(t.ARRAY_BUFFER,a,t.DYNAMIC_DRAW),n?(t.vertexAttribPointer(h.attributes.aPosition,c,t.FLOAT,!1,f,0),t.enableVertexAttribArray(h.attributes.aColor),t.vertexAttribPointer(h.attributes.aColor,4,t.UNSIGNED_BYTE,!0,f,d)):t.vertexAttribPointer(h.attributes.aPosition,c,t.FLOAT,!1,0,0),l){let e=a.byteLength/4/s-u;t.drawArrays(t.LINE_STRIP,u,e),u>1&&t.drawArrays(t.LINE_STRIP,0,u-1)}else t.drawArrays(t.LINE_STRIP,1,u-1)},dispose:function(){t.deleteBuffer(p),t.deleteProgram(o),rt.remove(i)}}}(t,this)),this._program.draw(this,e)}add(t){let e=this.nextElementIndex*this.itemsPerLine,n=this.positions;if(n[e]=t.x,e+=1,n[e]=t.y,e+=1,this.is3D&&(n[e]=t.z||0,e+=1),this.allowColors&&(this.colors[e]=void 0===t.color?4294967295:t.color),this.nextElementIndex+=1,this.drawCount+=1,this.nextElementIndex>this.capacity){this.nextElementIndex=1;let r=0;n[r]=t.x,r+=1,n[r]=t.y,r+=1,this.is3D&&(n[r]=t.z||0,r+=1),this.allowColors&&(this.colors[r]=this.colors[e]),this.madeFullCircle=!0}}dispose(){this._program&&(this._program.dispose(),this._program=null)}}const ot=function(t){try{return!(!window.WebGLRenderingContext||(t||(t=document.createElement("canvas")),!t.getContext("webgl")&&!t.getContext("experimental-webgl")))}catch(t){return!1}};var st=n(736),at=n.n(st);function ut(t,e){e=e||{};let n=function(){let t=new Map;return t.set("WireCollection",ht),t}();const r=t.getRoot();r.updateWorldTransform();let i=[],o=Object.assign({background:dt(t.getClearColor()),write:function(t){i.push(t)},scene:t},t.getDrawContext());return function(t,e){const n=`0 0 ${t.width} ${t.height}`;t.write('<?xml version="1.0" encoding="utf-8"?>'),e.open&&t.write(e.open()),t.write(`<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n    viewBox="${n}">\n<style>\n  path {\n   vector-effect: non-scaling-stroke;\n  }\n</style>\n`),t.background&&t.write(`<rect id="background" fill="${t.background}" x="0" y="0" width="${t.width}" height="${t.height}"></rect>`)}(o,e),function t(r){let i={beforeWrite:e.beforeWrite||lt,round:void 0===e.round?void 0:e.round};for(var s=0;s<r.length;++s){const e=r[s],a=n.get(e.type);a&&a(e,o,i),t(e.children)}}(r.children),function(t,e){e.close&&t.write(e.close()),t.write("</svg>")}(o,e),i.join("\n")}function lt(){return!0}function ht(t,e,n){if(!t.scene)return;let{beforeWrite:r,round:i}=n,o=at()(),s=function(t,e,n){const{width:r,height:i,projection:o,view:s}=e,u=l(a(),o,s.matrix);l(u,u,t.worldModel);const h=function(t){return void 0===t?gt:!0===t||0===t?Math.round:function(e){return Math.round(e*t)/t}}(n);return function(t,e,n){const o=f([],[t,e,n,1],u);return{x:h(r*(o[0]/o[3]+1)*.5),y:h(i*(1-.5*(o[1]/o[3]+1))),isBehind:o[3]<=0}}}(t,e,i);if(t.forEachLine(((n,r)=>{let i=s(n.x,n.y,n.z),a=s(r.x,r.y,r.z);if(!i.isBehind&&!a.isBehind&&function(t,e,n,r){return mt(t,e,{x:0,y:0},{x:0,y:1})&&mt(t,e,{x:0,y:0},{x:1,y:0})&&mt(t,e,{x:0,y:r},{x:0,y:-1})&&mt(t,e,{x:n,y:0},{x:-1,y:0})}(i,a,e.width,e.height)){let e=dt(ct(t,n,r)),s=`${i.x}|${i.y}`,u=`${a.x}|${a.y}`;o.getNode(s)||o.addNode(s,i),o.getNode(u)||o.addNode(u,a),o.hasLink(s,u)||o.addLink(s,u,{stroke:e})}})),0===o.getLinksCount())return;const u=dt(ct(t));let h=`fill="none" stroke-width="${(void 0===t.width?1:t.width)/t.scene.getPixelRatio()}" stroke="${u}"`,c=t.id?`<g id="${t.id}" ${h}>`:`<g ${h}>`;e.write(c);let d=function(t){let e=new Set,n=[],r=[];return t.forEachNode((i=>{e.has(i.id)||(r.push({to:i.id}),function(){for(;r.length;){let i=r.pop();i.to&&i.from&&n.push({from:i.from,to:i.to}),e.has(i.to)||(e.add(i.to),t.forEachLinkedNode(i.to,(function(t){e.has(t.id)||r.push({from:i.to,to:t.id})})))}}())})),n}(o),p=null,g=null;function m(){if(!g)return;if(g=g.map((t=>o.getNode(t).data)),!r(g))return;let t=`M${g[0].x} ${g[0].y} L`+g.slice(1).map((t=>`${t.x} ${t.y}`)).join(",");e.write(`<path d="${t}"/>`)}d.forEach((t=>{let{from:e,to:n}=t;if(e!==p)if(n===p){let t=e;e=n,n=t}else m(),g=[];g.push(e,n),p=n})),m(),e.write("</g>")}function ct(t,e,n){return t.allowColors&&e&&e.color&&n&&n.color?function(t,e,n=.5){let r=ft(t),i=ft(e);return[r[0]*n+(1-n)*i[0],r[1]*n+(1-n)*i[1],r[2]*n+(1-n)*i[2],r[3]*n+(1-n)*i[3]]}(e.color,n.color):[t.color.r,t.color.g,t.color.b,t.color.a]}function ft(t){return[t>>24&1,t>>16&1,t>>8&1,1&t]}function dt(t){return`#${pt(t[0])}${pt(t[1])}${pt(t[2])}`}function pt(t){let e=Math.floor(255*t).toString(16);return 1===e.length?"0"+e:e}function gt(t){return t}function mt(t,e,n,r){let i=vt(t,n,r),o=vt(e,n,r);if(i<=0&&o<=0)return!1;if(i>0&&o>0)return!0;let s=i/(i-o),a=t.x+s*(e.x-t.x),u=t.y+s*(e.y-t.y);return i<=0?(t.x=a,t.y=u):(e.x=a,e.y=u),!0}function vt(t,e,n){return(t.x-e.x)*n.x+(t.y-e.y)*n.y}},738:(t,e,n)=>{var r=n(590),i=n(236),o=new r,s=n(806),a=n(959);t.exports=function(){var t,e,n=new r,u={init:function(n){l(n),e=n,t=h(n);for(var r=0;r<n.length;r+=2)t.insert(r,e)},initAsync:function(n,r){l(n);var i=r&&r.done,o=r&&r.progress;t=h(n),e=n,a(n,(function(e,r){t.insert(r,n,0),o&&o(r,n.length)}),(function(){"function"==typeof i&&i(u)}),{step:2})},bounds:function(){return t?t.bounds:o},pointsAround:function(r,i,o,a){"function"!=typeof a&&(a=s);var u=[];return n.x=r,n.y=i,n.half=o,t.query(n,u,e,a),u},visit:function(e){return t.visit(e)}};return u;function l(t){if(!t)throw new Error("Points array is required for quadtree to work");if("number"!=typeof t.length)throw new Error("Points should be array-like object");if(t.length%2!=0)throw new Error("Points array should consist of series of x,y coordinates and be multiple of 2")}function h(t){if(0===t.length){var e=new r;return new i(e)}for(var n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,u=0;u<t.length;u+=2){var l=t[u],h=t[u+1];l<n&&(n=l),l>s&&(s=l),h<o&&(o=h),h>a&&(a=h)}var c=Math.max(s-n,a-o),f=(c+=2)/2,d=new r((n-=1)+f,(o-=1)+f,f);return new i(d)}}},590:t=>{function e(t,e,n){this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.half="number"==typeof n?n:0}t.exports=e,e.prototype.left=function(){return this.x-this.half},e.prototype.top=function(){return this.y-this.half},e.prototype.width=function(){return 2*this.half},e.prototype.height=function(){return 2*this.half},e.prototype.centerX=function(){return this.x},e.prototype.centerY=function(){return this.y},e.prototype.contains=function(t,e){var n=this.half;return this.x-n<=t&&t<this.x+n&&this.y-n<=e&&e<this.y+n}},806:t=>{t.exports=function(t,e){return t.x-t.half<e.x+e.half&&t.x+t.half>e.x-e.half&&t.y-t.half<e.y+e.half&&t.y+t.half>e.y-e.half}},236:(t,e,n)=>{var r=n(590);function i(t){this.bounds=t,this.nw=null,this.ne=null,this.sw=null,this.se=null,this.items=null}t.exports=i,i.prototype.subdivide=function(){var t=this.bounds,e=t.half/2;this.nw=new i(new r(t.x-e,t.y-e,e)),this.ne=new i(new r(t.x+e,t.y-e,e)),this.sw=new i(new r(t.x-e,t.y+e,e)),this.se=new i(new r(t.x+e,t.y+e,e))},i.prototype.insert=function(t,e,n){if(n||(n=0),!(n>24))if(null===this.nw){if(null===this.items?this.items=[t]:this.items.push(t),this.bounds.half>.1&&this.items.length>=4){this.subdivide();for(var r=0;r<this.items.length;++r)this.insert(this.items[r],e,n+1);this.items=null}}else{var i=e[t],o=e[t+1],s=this.bounds,a=0;i>s.x&&(a+=1),o>s.y&&(a+=2),function(t,e){return 0===e?t.nw:1===e?t.ne:2===e?t.sw:3===e?t.se:void 0}(this,a).insert(t,e,n+1)}},i.prototype.visit=function(t){t(this)&&this.nw&&(this.nw.visit(t),this.ne.visit(t),this.sw.visit(t),this.se.visit(t))},i.prototype.query=function(t,e,n,r){if(r(this.bounds,t)){var i=this.items;if(i)for(var o=0;o<i.length;++o){var s=i[o],a=n[s],u=n[s+1];t.contains(a,u)&&e.push(s)}this.nw&&(this.nw.query(t,e,n,r),this.ne.query(t,e,n,r),this.sw.query(t,e,n,r),this.se.query(t,e,n,r))}}},972:t=>{t.exports=class{constructor(){this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY}growBy(t){this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t}get left(){return this.minX}get top(){return this.minY}get right(){return this.maxX}get bottom(){return this.maxY}get width(){return this.maxX-this.minX}get height(){return this.maxY-this.minY}get cx(){return(this.minX+this.maxX)/2}get cy(){return(this.minY+this.maxY)/2}addPoint(t,e){if(void 0===t)throw new Error("Point is not defined");let n=t,r=e;void 0===r&&(n=t.x,r=t.y),n<this.minX&&(this.minX=n),n>this.maxX&&(this.maxX=n),r<this.minY&&(this.minY=r),r>this.maxY&&(this.maxY=r)}addRect(t){if(!t)throw new Error("rect is not defined");this.addPoint(t.left,t.top),this.addPoint(t.right,t.top),this.addPoint(t.left,t.bottom),this.addPoint(t.right,t.bottom)}merge(t){t.minX<this.minX&&(this.minX=t.minX),t.minY<this.minY&&(this.minY=t.minY),t.maxX>this.maxX&&(this.maxX=t.maxX),t.maxY>this.maxY&&(this.maxY=t.maxY)}}},829:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>te});var r=n(245),i=n.n(r);const o=i()({});var s=n(621),a=n.n(s);const u=()=>a()("rgba(26, 26, 26, 0.8)"),l=()=>a()("#F7F2E8"),h=n(697);let c=0;class f{get color(){return this._color}set color(t){let e=a()(t);this._color=e,this.lines&&(this.lines.color=d(e.toRgb())),this.scene&&this.scene.renderFrame()}get lineWidth(){return this._lineWidth}set lineWidth(t){this._lineWidth=t,this.lines&&this.scene&&this.lines.setLineWidth(t)}constructor(){this._color=u(),this.grid=null,this.lines=null,this.scene=null,this.dx=0,this.dy=0,this.scale=1,this.hidden=!1,this.id="paths_"+c,this._lineWidth=1,c+=1}getGridProjector(){if(this.grid)return this.grid.projector}getQueryBounds(){const{grid:t}=this;if(t){if(t.queryBounds)return t.queryBounds;if(t.isArea)return{areaId:t.id}}}setGrid(t){this.grid=t,this.scene&&this.bindToScene(this.scene)}getViewBox(){if(!this.grid)return null;let{width:t,height:e}=this.grid.getProjectedRect(),n=Math.max(t,e)/4;return{left:-n,top:n,right:n,bottom:-n}}moveTo(t,e=0){console.warn("Please use moveBy() instead. The moveTo() is under construction")}moveBy(t,e=0){this.dx=t,this.dy=e,this._transferTransform()}buildLinesCollection(){if(this.lines)return this.lines;let t=this.grid,e=new h.WireCollection(t.wayPointCount,{width:this._lineWidth,allowColors:!1,is3D:!1});t.forEachWay((function(t,n){e.add({from:t,to:n})}));let n=a()(this._color).toRgb();e.color=d(n),e.id=this.id,this.lines=e}destroy(){this.scene&&this.lines&&this.scene.removeChild(this.lines)}bindToScene(t){this.scene&&this.lines&&console.error("You seem to be adding this layer twice..."),this.scene=t,this.grid&&(this.buildLinesCollection(),this.hidden||this.scene.appendChild(this.lines))}hide(){this.hidden||(this.hidden=!0,this.scene&&this.grid&&this.scene.removeChild(this.lines))}show(){this.hidden&&(this.hidden=!1,this.scene&&this.grid?this.scene.appendChild(this.lines):console.log("Layer will be shown when grid is available"))}_transferTransform(){this.lines&&(this.lines.translate([this.dx,this.dy,0]),this.lines.updateWorldTransform(!0),this.scene&&this.scene.renderFrame(!0))}}function d(t){return{r:t.r/255,g:t.g/255,b:t.b/255,a:t.a}}class p{constructor(t){i()(this),this.callback=t||Function.prototype}cancel(){this.isCancelled=!0,this.fire("cancel")}notify(t){this.isCancelled||this.callback(t)}onCancel(t){this.on("cancel",t,this)}offCancel(t){this.off("cancel",t)}}function g(t,e){let n;e||(e={});let r=e.progress||new p,i=!1;return r.on&&r.onCancel(o),new Promise((function(i,s){n=new XMLHttpRequest,"function"==typeof r.notify&&n.addEventListener("progress",(function(t){t.lengthComputable?r.notify({loaded:t.loaded,total:t.total,percent:t.loaded/t.total,lengthComputable:!0}):r.notify({loaded:t.loaded,lengthComputable:!1})}),!1),n.addEventListener("load",(function(){if(r.offCancel(o),!r.isCancelled)if(200===n.status){var a=n.response;"json"===e.responseType&&"string"==typeof a&&(a=JSON.parse(a)),setTimeout((()=>i(a)),0)}else s({statusError:n.status,message:`Unexpected status code ${n.status} when calling ${t}`})}),!1),n.addEventListener("error",(function(){s(`Failed to download ${t}`)}),!1),n.addEventListener("abort",(function(){s({cancelled:!0,message:`Cancelled download of ${t}`})}),!1),n.open(e.method||"GET",t),e.responseType&&(n.responseType=e.responseType),e.headers&&Object.keys(e.headers).forEach((t=>{n.setRequestHeader(t,e.headers[t])})),"POST"===e.method?n.send(e.body):n.send(null)}));function o(){i=!0,n&&n.abort()}}let m=["https://overpass.kumi.systems/api/interpreter","https://overpass-api.de/api/interpreter","https://overpass.openstreetmap.ru/cgi/interpreter"];class v{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}growBy(t){this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t}get left(){return this.minX}get top(){return this.minY}get right(){return this.maxX}get bottom(){return this.maxY}get width(){return this.maxX-this.minX}get height(){return this.maxY-this.minY}get cx(){return(this.minX+this.maxX)/2}get cy(){return(this.minY+this.maxY)/2}addPoint(t,e){if(void 0===t)throw new Error("Point is not defined");let n=t,r=e;void 0===r&&(n=t.x,r=t.y),n<this.minX&&(this.minX=n),n>this.maxX&&(this.maxX=n),r<this.minY&&(this.minY=r),r>this.maxY&&(this.maxY=r)}addRect(t){if(!t)throw new Error("rect is not defined");this.addPoint(t.left,t.top),this.addPoint(t.right,t.top),this.addPoint(t.left,t.bottom),this.addPoint(t.right,t.bottom)}merge(t){t.minX<this.minX&&(this.minX=t.minX),t.minY<this.minY&&(this.minY=t.minY),t.maxX>this.maxX&&(this.maxX=t.maxX),t.maxY>this.maxY&&(this.maxY=t.maxY)}}var w=1e-6,b=Math.PI,y=b/2,x=b/4,A=2*b,S=180/b,E=b/180,_=Math.abs,F=Math.atan,M=Math.atan2,T=Math.cos,I=(Math.ceil,Math.exp),P=(Math.floor,Math.log),C=(Math.pow,Math.sin),N=Math.sign||function(t){return t>0?1:t<0?-1:0},R=Math.sqrt,k=Math.tan;function L(t){return t>1?y:t<-1?-y:Math.asin(t)}function B(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function V(t,e){return[_(t)>b?t+Math.round(-t/A)*A:t,e]}function D(t,e,n){return(t%=A)?e||n?B(Y(t),j(e,n)):Y(t):e||n?j(e,n):V}function O(t){return function(e,n){return[(e+=t)>b?e-A:e<-b?e+A:e,n]}}function Y(t){var e=O(t);return e.invert=O(-t),e}function j(t,e){var n=T(t),r=C(t),i=T(e),o=C(e);function s(t,e){var s=T(e),a=T(t)*s,u=C(t)*s,l=C(e),h=l*n+a*r;return[M(u*i-h*o,a*n-l*r),L(h*i+u*o)]}return s.invert=function(t,e){var s=T(e),a=T(t)*s,u=C(t)*s,l=C(e),h=l*i-u*o;return[M(u*i+l*o,a*n+h*r),L(h*n-a*r)]},s}function U(){}function X(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:U,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function z(t,e){return _(t[0]-e[0])<w&&_(t[1]-e[1])<w}function q(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function $(t,e,n,r,i){var o,s,a=[],u=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(z(r,s)){if(!r[2]&&!s[2]){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}s[0]+=2e-6}a.push(n=new q(r,t,null,!0)),u.push(n.o=new q(r,null,n,!1)),a.push(n=new q(s,t,null,!1)),u.push(n.o=new q(s,null,n,!0))}})),a.length){for(u.sort(e),H(a),H(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var l,h,c=a[0];;){for(var f=c,d=!0;f.v;)if((f=f.n)===c)return;l=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(d)for(o=0,s=l.length;o<s;++o)i.point((h=l[o])[0],h[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(d)for(l=f.p.z,o=l.length-1;o>=0;--o)i.point((h=l[o])[0],h[1]);else r(f.x,f.p.x,-1,i);f=f.p}l=(f=f.o).z,d=!d}while(!f.v);i.lineEnd()}}}function H(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function G(){this.reset()}V.invert=V,G.prototype={constructor:G,reset:function(){this.s=this.t=0},add:function(t){K(W,t,this.t),K(this,W.s,this.s),this.s?this.t+=W.t:this.s=W.t},valueOf:function(){return this.s}};var W=new G;function K(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function Z(t){return[M(t[1],t[0]),L(t[2])]}function Q(t){var e=t[0],n=t[1],r=T(n);return[r*T(e),r*C(e),C(n)]}function J(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function tt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function et(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function nt(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function rt(t){var e=R(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var it,ot,st=new G;function at(t){return _(t[0])<=b?t[0]:N(t[0])*((_(t[0])+b)%A-b)}function ut(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}1===(it=ut).length&&(ot=it,it=function(t,e){return ut(ot(t),e)});var lt=Array.prototype;function ht(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--s]=r[e];return n}function ct(t,e,n,r){return function(i){var o,s,a,u=e(i),l=X(),h=e(l),c=!1,f={point:d,lineStart:g,lineEnd:m,polygonStart:function(){f.point=v,f.lineStart=S,f.lineEnd=E,s=[],o=[]},polygonEnd:function(){f.point=d,f.lineStart=g,f.lineEnd=m,s=ht(s);var t=function(t,e){var n=at(e),r=e[1],i=C(r),o=[C(n),-T(n),0],s=0,a=0;st.reset(),1===i?r=y+w:-1===i&&(r=-y-w);for(var u=0,l=t.length;u<l;++u)if(c=(h=t[u]).length)for(var h,c,f=h[c-1],d=at(f),p=f[1]/2+x,g=C(p),m=T(p),v=0;v<c;++v,d=E,g=F,m=I,f=S){var S=h[v],E=at(S),_=S[1]/2+x,F=C(_),I=T(_),P=E-d,N=P>=0?1:-1,R=N*P,k=R>b,B=g*F;if(st.add(M(B*N*C(R),m*I+B*T(R))),s+=k?P+N*A:P,k^d>=n^E>=n){var V=tt(Q(f),Q(S));rt(V);var D=tt(o,V);rt(D);var O=(k^P>=0?-1:1)*L(D[2]);(r>O||r===O&&(V[0]||V[1]))&&(a+=k^P>=0?1:-1)}}return(s<-w||s<w&&st<-w)^1&a}(o,r);s.length?(c||(i.polygonStart(),c=!0),$(s,dt,t,n,i)):t&&(c||(i.polygonStart(),c=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),c&&(i.polygonEnd(),c=!1),s=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){u.point(t,e)}function g(){f.point=p,u.lineStart()}function m(){f.point=d,u.lineEnd()}function v(t,e){a.push([t,e]),h.point(t,e)}function S(){h.lineStart(),a=[]}function E(){v(a[0][0],a[0][1]),h.lineEnd();var t,e,n,r,u=h.clean(),f=l.result(),d=f.length;if(a.pop(),o.push(a),a=null,d)if(1&u){if((e=(n=f[0]).length-1)>0){for(c||(i.polygonStart(),c=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else d>1&&2&u&&f.push(f.pop().concat(f.shift())),s.push(f.filter(ft))}return f}}function ft(t){return t.length>1}function dt(t,e){return((t=t.x)[0]<0?t[1]-y-w:y-t[1])-((e=e.x)[0]<0?e[1]-y-w:y-e[1])}lt.slice,lt.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);const pt=ct((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?b:-b,u=_(o-n);_(u-b)<w?(t.point(n,r=(r+s)/2>0?y:-y),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&u>=b&&(_(n-i)<w&&(n-=i*w),_(o-a)<w&&(o-=a*w),r=function(t,e,n,r){var i,o,s=C(t-n);return _(s)>w?F((C(e)*(o=T(r))*C(n)-C(r)*(i=T(e))*C(t))/(i*o*s)):(e+r)/2}(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*y,r.point(-b,i),r.point(0,i),r.point(b,i),r.point(b,0),r.point(b,-i),r.point(0,-i),r.point(-b,-i),r.point(-b,0),r.point(-b,i);else if(_(t[0]-e[0])>w){var o=t[0]<e[0]?b:-b;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-b,-y]);function gt(t,e){(e=Q(e))[0]-=t,rt(e);var n,r=(n=-e[1])>1?0:n<-1?b:Math.acos(n);return((-e[2]<0?-r:r)+A-w)%A}function mt(t){var e=T(t),n=6*E,r=e>0,i=_(e)>w;function o(t,n){return T(t)*T(n)>e}function s(t,n,r){var i=[1,0,0],o=tt(Q(t),Q(n)),s=J(o,o),a=o[0],u=s-a*a;if(!u)return!r&&t;var l=e*s/u,h=-e*a/u,c=tt(i,o),f=nt(i,l);et(f,nt(o,h));var d=c,p=J(f,d),g=J(d,d),m=p*p-g*(J(f,f)-1);if(!(m<0)){var v=R(m),y=nt(d,(-p-v)/g);if(et(y,f),y=Z(y),!r)return y;var x,A=t[0],S=n[0],E=t[1],F=n[1];S<A&&(x=A,A=S,S=x);var M=S-A,T=_(M-b)<w;if(!T&&F<E&&(x=E,E=F,F=x),T||M<w?T?E+F>0^y[1]<(_(y[0]-A)<w?E:F):E<=y[1]&&y[1]<=F:M>b^(A<=y[0]&&y[0]<=S)){var I=nt(d,(-p+v)/g);return et(I,f),[y,Z(I)]}}}function a(e,n){var i=r?t:b-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return ct(o,(function(t){var e,n,u,l,h;return{lineStart:function(){l=u=!1,h=1},point:function(c,f){var d,p=[c,f],g=o(c,f),m=r?g?0:a(c,f):g?a(c+(c<0?b:-b),f):0;if(!e&&(l=u=g)&&t.lineStart(),g!==u&&(!(d=s(e,p))||z(e,d)||z(p,d))&&(p[2]=1),g!==u)h=0,g?(t.lineStart(),d=s(p,e),t.point(d[0],d[1])):(d=s(e,p),t.point(d[0],d[1],2),t.lineEnd()),e=d;else if(i&&e&&r^g){var v;m&n||!(v=s(p,e,!0))||(h=0,r?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1],3)))}!g||e&&z(e,p)||t.point(p[0],p[1]),e=p,u=g,n=m},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return h|(l&&u)<<1}}}),(function(e,r,i,o){!function(t,e,n,r,i,o){if(n){var s=T(e),a=C(e),u=r*n;null==i?(i=e+r*A,o=e-u/2):(i=gt(s,i),o=gt(s,o),(r>0?i<o:i>o)&&(i+=r*A));for(var l,h=i;r>0?h>o:h<o;h-=u)l=Z([s,-a*T(h),-a*C(h)]),t.point(l[0],l[1])}}(o,t,n,i,e,r)}),r?[0,-t]:[-b,t-b])}var vt=1e9,wt=-vt;function bt(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,l){var h=0,c=0;if(null==i||(h=s(i,a))!==(c=s(o,a))||u(i,o)<0^a>0)do{l.point(0===h||3===h?t:n,h>1?r:e)}while((h=(h+a+4)%4)!==c);else l.point(o[0],o[1])}function s(r,i){return _(r[0]-t)<w?i>0?0:3:_(r[0]-n)<w?i>0?2:1:_(r[1]-e)<w?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var u,l,h,c,f,d,p,g,m,v,w,b=s,y=X(),x={point:A,lineStart:function(){x.point=S,l&&l.push(h=[]),v=!0,m=!1,p=g=NaN},lineEnd:function(){u&&(S(c,f),d&&m&&y.rejoin(),u.push(y.result())),x.point=A,m&&b.lineEnd()},polygonStart:function(){b=y,u=[],l=[],w=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=l.length;n<i;++n)for(var o,s,a=l[n],u=1,h=a.length,c=a[0],f=c[0],d=c[1];u<h;++u)o=f,s=d,f=(c=a[u])[0],d=c[1],s<=r?d>r&&(f-o)*(r-s)>(d-s)*(t-o)&&++e:d<=r&&(f-o)*(r-s)<(d-s)*(t-o)&&--e;return e}(),n=w&&e,i=(u=ht(u)).length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),i&&$(u,a,e,o,s),s.polygonEnd()),b=s,u=l=h=null}};function A(t,e){i(t,e)&&b.point(t,e)}function S(o,s){var a=i(o,s);if(l&&h.push([o,s]),v)c=o,f=s,d=a,v=!1,a&&(b.lineStart(),b.point(o,s));else if(a&&m)b.point(o,s);else{var u=[p=Math.max(wt,Math.min(vt,p)),g=Math.max(wt,Math.min(vt,g))],y=[o=Math.max(wt,Math.min(vt,o)),s=Math.max(wt,Math.min(vt,s))];!function(t,e,n,r,i,o){var s,a=t[0],u=t[1],l=0,h=1,c=e[0]-a,f=e[1]-u;if(s=n-a,c||!(s>0)){if(s/=c,c<0){if(s<l)return;s<h&&(h=s)}else if(c>0){if(s>h)return;s>l&&(l=s)}if(s=i-a,c||!(s<0)){if(s/=c,c<0){if(s>h)return;s>l&&(l=s)}else if(c>0){if(s<l)return;s<h&&(h=s)}if(s=r-u,f||!(s>0)){if(s/=f,f<0){if(s<l)return;s<h&&(h=s)}else if(f>0){if(s>h)return;s>l&&(l=s)}if(s=o-u,f||!(s<0)){if(s/=f,f<0){if(s>h)return;s>l&&(l=s)}else if(f>0){if(s<l)return;s<h&&(h=s)}return l>0&&(t[0]=a+l*c,t[1]=u+l*f),h<1&&(e[0]=a+h*c,e[1]=u+h*f),!0}}}}}(u,y,t,e,n,r)?a&&(b.lineStart(),b.point(o,s),w=!1):(m||(b.lineStart(),b.point(u[0],u[1])),b.point(y[0],y[1]),a||b.lineEnd(),w=!1)}p=o,g=s,m=a}return x}}function yt(t){return t}function xt(t){return function(e){var n=new At;for(var r in t)n[r]=t[r];return n.stream=e,n}}function At(){}function St(t,e){t&&_t.hasOwnProperty(t.type)&&_t[t.type](t,e)}At.prototype={constructor:At,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Et={Feature:function(t,e){St(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)St(n[r].geometry,e)}},_t={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ft(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ft(n[r],e,0)},Polygon:function(t,e){Mt(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Mt(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)St(n[r],e)}};function Ft(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Mt(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Ft(t[n],e,1);e.polygonEnd()}var Tt=1/0,It=Tt,Pt=-Tt,Ct=Pt;const Nt={point:function(t,e){t<Tt&&(Tt=t),t>Pt&&(Pt=t),e<It&&(It=e),e>Ct&&(Ct=e)},lineStart:U,lineEnd:U,polygonStart:U,polygonEnd:U,result:function(){var t=[[Tt,It],[Pt,Ct]];return Pt=Ct=-(It=Tt=1/0),t}};function Rt(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),function(t,e){t&&Et.hasOwnProperty(t.type)?Et[t.type](t,e):St(t,e)}(n,t.stream(Nt)),e(Nt.result()),null!=r&&t.clipExtent(r),t}function kt(t,e,n){return Rt(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),s=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,a=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([s,a])}),n)}var Lt=T(30*E);function Bt(t,e){return+e?function(t,e){function n(r,i,o,s,a,u,l,h,c,f,d,p,g,m){var v=l-r,b=h-i,y=v*v+b*b;if(y>4*e&&g--){var x=s+f,A=a+d,S=u+p,E=R(x*x+A*A+S*S),F=L(S/=E),T=_(_(S)-1)<w||_(o-c)<w?(o+c)/2:M(A,x),I=t(T,F),P=I[0],C=I[1],N=P-r,k=C-i,B=b*N-v*k;(B*B/y>e||_((v*N+b*k)/y-.5)>.3||s*f+a*d+u*p<Lt)&&(n(r,i,o,s,a,u,P,C,T,x/=E,A/=E,S,g,m),m.point(P,C),n(P,C,T,x,A,S,l,h,c,f,d,p,g,m))}}return function(e){var r,i,o,s,a,u,l,h,c,f,d,p,g={point:m,lineStart:v,lineEnd:b,polygonStart:function(){e.polygonStart(),g.lineStart=y},polygonEnd:function(){e.polygonEnd(),g.lineStart=v}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function v(){h=NaN,g.point=w,e.lineStart()}function w(r,i){var o=Q([r,i]),s=t(r,i);n(h,c,l,f,d,p,h=s[0],c=s[1],l=r,f=o[0],d=o[1],p=o[2],16,e),e.point(h,c)}function b(){g.point=m,e.lineEnd()}function y(){v(),g.point=x,g.lineEnd=A}function x(t,e){w(r=t,e),i=h,o=c,s=f,a=d,u=p,g.point=w}function A(){n(h,c,l,f,d,p,i,o,r,s,a,u,16,e),g.lineEnd=b,b()}return g}}(t,e):function(t){return xt({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Vt=xt({point:function(t,e){this.stream.point(t*E,e*E)}});function Dt(t,e,n,r,i){function o(o,s){return[e+t*(o*=r),n-t*(s*=i)]}return o.invert=function(o,s){return[(o-e)/t*r,(n-s)/t*i]},o}function Ot(t,e,n,r,i,o){var s=T(o),a=C(o),u=s*t,l=a*t,h=s/t,c=a/t,f=(a*n-s*e)/t,d=(a*e+s*n)/t;function p(t,o){return[u*(t*=r)-l*(o*=i)+e,n-l*t-u*o]}return p.invert=function(t,e){return[r*(h*t-c*e+f),i*(d-c*t-h*e)]},p}function Yt(t,e){return[t,P(k((y+e)/2))]}function jt(){return function(t){var e,n,r,i=function(t){return function(t){var e,n,r,i,o,s,a,u,l,h,c=150,f=480,d=250,p=0,g=0,m=0,v=0,w=0,b=0,y=1,x=1,A=null,_=pt,F=null,M=yt,T=.5;function I(t){return u(t[0]*E,t[1]*E)}function P(t){return(t=u.invert(t[0],t[1]))&&[t[0]*S,t[1]*S]}function C(){var t=Ot(c,0,0,y,x,b).apply(null,e(p,g)),r=(b?Ot:Dt)(c,f-t[0],d-t[1],y,x,b);return n=D(m,v,w),a=B(e,r),u=B(n,a),s=Bt(a,T),N()}function N(){return l=h=null,I}return I.stream=function(t){return l&&h===t?l:l=Vt(function(t){return xt({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)(_(s(M(h=t)))))},I.preclip=function(t){return arguments.length?(_=t,A=void 0,N()):_},I.postclip=function(t){return arguments.length?(M=t,F=r=i=o=null,N()):M},I.clipAngle=function(t){return arguments.length?(_=+t?mt(A=t*E):(A=null,pt),N()):A*S},I.clipExtent=function(t){return arguments.length?(M=null==t?(F=r=i=o=null,yt):bt(F=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),N()):null==F?null:[[F,r],[i,o]]},I.scale=function(t){return arguments.length?(c=+t,C()):c},I.translate=function(t){return arguments.length?(f=+t[0],d=+t[1],C()):[f,d]},I.center=function(t){return arguments.length?(p=t[0]%360*E,g=t[1]%360*E,C()):[p*S,g*S]},I.rotate=function(t){return arguments.length?(m=t[0]%360*E,v=t[1]%360*E,w=t.length>2?t[2]%360*E:0,C()):[m*S,v*S,w*S]},I.angle=function(t){return arguments.length?(b=t%360*E,C()):b*S},I.reflectX=function(t){return arguments.length?(y=t?-1:1,C()):y<0},I.reflectY=function(t){return arguments.length?(x=t?-1:1,C()):x<0},I.precision=function(t){return arguments.length?(s=Bt(a,T=t*t),N()):R(T)},I.fitExtent=function(t,e){return kt(I,t,e)},I.fitSize=function(t,e){return function(t,e,n){return kt(t,[[0,0],e],n)}(I,t,e)},I.fitWidth=function(t,e){return function(t,e,n){return Rt(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,s=-i*n[0][1];t.scale(150*i).translate([o,s])}),n)}(I,t,e)},I.fitHeight=function(t,e){return function(t,e,n){return Rt(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],s=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,s])}),n)}(I,t,e)},function(){return e=t.apply(this,arguments),I.invert=e.invert&&P,C()}}((function(){return t}))()}(t),o=i.center,s=i.scale,a=i.translate,u=i.clipExtent,l=null;function h(){var o=b*s(),a=i(function(t){function e(e){return(e=t(e[0]*E,e[1]*E))[0]*=S,e[1]*=S,e}return t=D(t[0]*E,t[1]*E,t.length>2?t[2]*E:0),e.invert=function(e){return(e=t.invert(e[0]*E,e[1]*E))[0]*=S,e[1]*=S,e},e}(i.rotate()).invert([0,0]));return u(null==l?[[a[0]-o,a[1]-o],[a[0]+o,a[1]+o]]:t===Yt?[[Math.max(a[0]-o,l),e],[Math.min(a[0]+o,n),r]]:[[l,Math.max(a[1]-o,e)],[n,Math.min(a[1]+o,r)]])}return i.scale=function(t){return arguments.length?(s(t),h()):s()},i.translate=function(t){return arguments.length?(a(t),h()):a()},i.center=function(t){return arguments.length?(o(t),h()):o()},i.clipExtent=function(t){return arguments.length?(null==t?l=e=n=r=null:(l=+t[0][0],e=+t[0][1],n=+t[1][0],r=+t[1][1]),h()):null==l?null:[[l,e],[n,r]]},h()}(Yt).scale(961/A)}Yt.invert=function(t,e){return[t,2*F(I(e))-y]};class Ut{constructor(){this.elements=[],this.bounds=new v,this.nodes=new Map,this.wayPointCount=0,this.id=0,this.name="",this.isArea=!0,this.projector=void 0}setName(t){this.name=t}setId(t){this.id=t}setIsArea(t){this.isArea=t}setBBox(t){this.bboxString=t}hasRoads(){return this.wayPointCount>0}setProjector(t){this.projector=t}static fromPBF(t){if(1!==t.version)throw new Error("Unknown version "+t.version);let e=[];t.nodes.forEach((t=>{t.type="node",e.push(t)})),t.ways.forEach((t=>{t.type="way",e.push(t)}));const n=Ut.fromOSMResponse(e);return n.setName(t.name),n.setId(t.id),n}static fromOSMResponse(t){let e=new Ut,n=e.nodes,r=e.bounds,i=0;return t.forEach((t=>{"node"===t.type?(n.set(t.id,t),r.addPoint(t.lon,t.lat)):"way"===t.type&&(i+=t.nodes.length)})),e.elements=t,e.wayPointCount=i,e}getProjectedRect(){let t=this.bounds,e=this.getProjector(),n=e({lon:t.left,lat:t.bottom}),r=e({lon:t.right,lat:t.top}),i=n.x,o=n.y,s=r.y,a=r.x;return{left:i,top:o,right:a,bottom:s,width:a-i,height:Math.abs(s-o)}}forEachElement(t){this.elements.forEach(t)}forEachWay(t,e,n){let r=this.nodes,i=this.getProjector();this.elements.forEach((o=>{if("way"!==o.type)return;let s=o.nodes,a=r.get(s[0]);if(!a)return;let u=i(a);e&&e(o);for(let e=1;e<s.length;++e){if(a=r.get(s[e]),!a)continue;let n=i(a);t(u,n),u=n}n&&n(o)}))}getProjector(){let t=[0,0];this.projector||(this.projector=jt(),this.projector.center([this.bounds.cx,this.bounds.cy]).scale(6371393));let e=this.projector;return function({lon:n,lat:r}){t[0]=n,t[1]=r;let i=e(t);return{x:i[0],y:-i[1]}}}}let Xt=new Map;function zt(t){let e=Xt.get(t);return e?Promise.resolve(e):g(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(t)}`,{responseType:"json"}).then(qt).then((e=>(Xt.set(t,e),e)))}function qt(t){return t.map((t=>{let e,n;return"relation"===t.osm_type?e=t.osm_id+36e8:"way"===t.osm_type&&(e=t.osm_id+24e8),t.boundingbox&&(n=[Number.parseFloat(t.boundingbox[0]),Number.parseFloat(t.boundingbox[2]),Number.parseFloat(t.boundingbox[1]),Number.parseFloat(t.boundingbox[3])]),{areaId:e,bbox:n,lat:t.lat,lon:t.lon,osmId:t.osm_id,osmType:t.osm_type,name:t.display_name,type:t.type}}))}class $t{static All="way";static Building="way[building]";static Road="way[highway]";static RoadBasic='way[highway~"^(motorway|primary|secondary|tertiary)|residential"]';static RoadStrict='way[highway~"^(((motorway|trunk|primary|secondary|tertiary)(_link)?)|unclassified|residential|living_street|pedestrian|service|track)$"][area!=yes]';static runFromOptions(t,e){return t.getQueryTemplate().then((t=>new $t(t,e).run()))}constructor(t,e){this.queryBounds=t.bounds,this.queryString=t.queryString,this.progress=e,this.promise=null}run(){if(this.promise)return this.promise;let t=function(t){let e,n=/{{geocode(.+?):(.+?)}}/,r=[];for(;e=t.match(n);)r.push(t.substr(0,e.index)),r.push({geoType:e[1],name:e[2]}),t=t.substr(e.index+e[0].length);return r.push(t),r}(this.queryString);return this.promise=function(t){let e=0;return function n(){if(e>=t.length)return Promise.resolve();let r=t[e];return e+=1,"string"==typeof r?n():zt(r.name).then(Ht).then((t=>{if(!t)throw new Error("No areas found for request "+r.name);Object.assign(r,t)})).then((1e3,function(t){return new Promise((e=>{setTimeout((()=>e(t)),1e3)}))})).then(n)}().then((function(){return t.map((t=>"string"==typeof t?t:"Area"===t.geoType?`area(${t.areaId})`:"Coords"===t.geoType?t.lat+","+t.lon:"Id"===t.geoType?`${t.osmType}(${t.osmId})`:"Bbox"===t.geoType?t.bbox.join(","):void 0)).join("")}))}(t).then((t=>function(t,e){const n={method:"POST",responseType:"json",progress:e=e||new p,headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:"data="+encodeURIComponent(t)};let r=0;return i(m[r]);function i(t){return g(t,n).catch(o)}function o(t){if(t.cancelled)throw t;if(r>=m.length-1)throw t;return t.statusError&&e.notify({loaded:-1}),r+=1,i(m[r])}}(t,this.progress))).then((t=>{let e=Ut.fromOSMResponse(t.elements);return e.queryBounds=this.queryBounds,e})),this.promise}}function Ht(t){if(t.length>0)return t[0]}class Gt{static parse(t,e,n){let r=new Gt;if("string"==typeof n&&(r.place=n),e&&(r.wayFilter=e),!n)return r;Object.assign(r,n);let i=function(t,e){if(void 0!==e)return"number"==typeof e?t.queryLayerAll()[e]:"string"==typeof e?t.queryLayer(e):e}(t,n.layer);if(i){r.projector=i.getGridProjector();let t=i.getQueryBounds();!t||r.place||r.areaId||r.bbox||(r.place=t.place,r.areaId=t.areaId,r.bbox=t.bbox)}return n.projector&&(r.projector=projector),r}constructor(t){this.place=void 0,this.projector=void 0,this.wayFilter=void 0,this.timeout=900,this.maxHeapByteSize=1073741824,this.outputMethod="skel",Object.assign(this,t)}getQueryTemplate(){if(this.raw)return Promise.resolve({queryString:this.raw});if(!this.wayFilter)throw new Error("Way filter is required");return this.getBounds().then((t=>{let e;if(t.areaId)e=`[timeout:${this.timeout}][maxsize:${this.maxHeapByteSize}][out:json];\narea(${t.areaId});\n(._; )->.area;\n(${this.wayFilter}(area.area); node(w););\nout ${this.outputMethod};`;else if(t.bbox){let n=function(t){return t&&t.join(",")}(t.bbox);e=`[timeout:${this.timeout}][maxsize:${this.maxHeapByteSize}][bbox:${n}][out:json];\n(${this.wayFilter}; node(w););\nout ${this.outputMethod};`}return{bounds:t,queryString:e}}))}getBounds(){if(this.place)return zt(this.place).then((t=>t&&t[0]));if(this.areaId)return Promise.resolve({areaId:this.areaId});if(this.bbox)return Promise.resolve({bbox:this.bbox});throw new Error("Please specify bounding area for the query (place|areaId|bbox)")}}n(399),n(854).Z;const Wt=n(697);function Kt(t,e){var n;return((n=t||(new Date).toISOString())?n.replace(/[#%&{}\\/?*><$!'":@+`|=]/g,"_"):"")+(e||"")}function Zt(){return Array.from(document.querySelectorAll(".printable")).map((t=>{let e=window.getComputedStyle(t),n=t.getBoundingClientRect(),r=Number.parseInt(e.fontSize,10),i=Number.parseInt(e.paddingRight,10),o=2*Number.parseInt(e.paddingBottom,10);return{text:t.innerText,bounds:n,fontSize:r,paddingBottom:o,paddingRight:i,color:e.color,fontFamily:e.fontFamily,fill:e.color,element:t}}))}function Qt(t){setTimeout((()=>{window.URL.revokeObjectURL(t)}),45e3)}const Jt=n(697);function te(t){let e=Jt.createScene(t),n=u();e.on("transform",(function(t){o.fire("scene-transform")})),e.on("append-child",(function(t){p.fire("layer-added",t)})),e.on("remove-child",(function(t){p.fire("layer-removed",t)})),e.setClearColor(247/255,242/255,232/255,1);let r=e.getCamera();r.setMoveSpeed&&(r.setMoveSpeed(200),r.setRotationSpeed(Math.PI/500));let s=e.getGL();s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA);let h=!1,c=[],d=l();document.addEventListener("keydown",w,!0),document.addEventListener("keyup",b,!0);let p={render(){e.renderFrame(!0)},clear(){c.forEach((t=>t.destroy())),c=[],e.clear()},queryLayerAll:g,queryLayer:m,getRenderer:()=>e,getWGL:()=>Jt,version:()=>"0.0.2",dispose(){e.clear(),e.dispose(),p.fire("dispose",p),document.removeEventListener("keydown",w,!0),document.removeEventListener("keyup",b,!0)},set lineColor(t){c.forEach((e=>{e.color=t})),n=a()(t),o.fire("line-color",n),p.fire("line-color",n)},get lineColor(){let t=m();return t&&t.color||n},set background(t){d=a()(t);let n=d.toRgb();e.setClearColor(n.r/255,n.g/255,n.b/255,n.a),e.renderFrame(),o.fire("background-color",d),p.fire("background-color",d)},get background(){return d},add:v,load:function(t,e){let n=Gt.parse(p,t,e),r=new f;return r.id=n.place,$t.runFromOptions(n).then((t=>{t.setProjector(n.projector),r.setGrid(t)})).catch((e=>{console.error(`Could not execute:\n  ${t}\n  The error was:`),console.error(e),r.destroy()})),v(r),r},saveToPNG:function(t){return function(t,e){e=e||{},function(t){let e=document.querySelector("#canvas"),n=e.width,r=e.height,i=document.createElement("canvas"),o=i.getContext("2d");return i.width=n,i.height=r,t.render(),o.drawImage(e,0,0,e.width,e.height,0,0,n,r),Promise.all(Zt().map((t=>function(t,e){return t?new Promise(((n,r)=>{let i=window.devicePixelRatio||1;if(t.element instanceof SVGSVGElement){let r=t.element,o=t.bounds,s=new Image;s.width=o.width*i,s.height=o.height*i,s.onload=()=>{e.drawImage(s,o.left*i,o.top*i,s.width,s.height),r.removeAttribute("width"),r.removeAttribute("height"),n()},r.setAttribute("width",s.width),r.setAttribute("height",s.height),s.src="data:image/svg+xml;base64,"+btoa((new XMLSerializer).serializeToString(r))}else e.save(),e.font=i*t.fontSize+"px "+t.fontFamily,e.fillStyle=t.color,e.textAlign="end",e.fillText(t.text,(t.bounds.right-t.paddingRight)*i,(t.bounds.bottom-t.paddingBottom)*i),e.restore(),n()})):Promise.resolve()}(t,o)))).then((()=>i))}(t).then((t=>{let n=Kt(e.name,".png");t.toBlob((function(t){let e=window.URL.createObjectURL(t),r=document.createElement("a");r.href=e,r.download=n,r.click(),Qt(e)}),"image/png")}))}(p,{name:t})},saveToSVG:function(t,e){return function(t,e){e=e||{};let n=function(t,e){const n=t.getRenderer(),r={open:()=>"\x3c!-- Generator: https://github.com/anvaka/city-roads\nData Â© OpenStreetMap contributors, ODbL 1.0. https://osm.org/copyright\n--\x3e",close:()=>function(){let t=n.getPixelRatio();return e.printable.map((e=>{if(e.element instanceof SVGSVGElement){let n=e.bounds,r=(n.left,n.top,e.element);r.setAttribute("x",n.left*t),r.setAttribute("y",n.top*t),r.setAttribute("width",n.width*t),r.setAttribute("height",n.height*t);let i=(new XMLSerializer).serializeToString(e.element);return r.removeAttribute("x"),r.removeAttribute("y"),r.removeAttribute("width"),r.removeAttribute("height"),i}{let n=e;if(!n.text)return;let r=n.text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),i=n.bounds,o=(i.right-n.paddingRight)*t,s=(i.bottom-n.paddingBottom)*t,a=n.fontSize*t,u=n.fontFamily.replace(/"/g,"'");return`<text text-anchor="end" x="${o}" y="${s}" fill="${n.color}" font-family="${u}" font-size="${a}">${r}</text>`}})).filter((t=>t)).join("\n")}()};return e.minLength&&(r.beforeWrite=t=>{let n=0;for(let r=1;r<t.length;++r)if(n+=Math.hypot(t[r].x-t[r-1].x,t[r].y-t[r-1].y),n>e.minLength)return!0;return n>e.minLength}),r.round=e.round,Wt.toSVG(n,r)}(t,{printable:Zt(),...e}),r=new Blob([n],{type:"image/svg+xml"}),i=window.URL.createObjectURL(r),o=Kt(e.name,".svg");setTimeout((()=>{let t=document.createElement("a");t.href=i,t.download=o,t.click(),Qt(i)}),30)}(p,Object.assign({},{name:t},e))}};return i()(p);function g(t){return t?c.filter((e=>e.id===t)):c}function m(t){let e=g(t);if(e)return e[0]}function v(t){if(!(c.indexOf(t)>-1)&&(t.bindToScene(e),c.push(t),1===c.length)){let n=t.getViewBox();n&&e.setViewBox(n)}}function w(t){t.shiftKey&&(h=!0,r.setSpeed&&r.setSpeed(.1))}function b(t){!t.shiftKey&&h&&(r.setSpeed&&r.setSpeed(1),h=!1)}}},854:(t,e)=>{"use strict";var n=e.Z={};n.read=function(t,e){return t.readFields(n._readField,{version:0,name:"",date:"",id:"",nodes:[],ways:[]},e)},n._readField=function(t,e,r){1===t?e.version=r.readVarint():2===t?e.name=r.readString():3===t?e.date=r.readString():4===t?e.id=r.readString():5===t?e.nodes.push(n.node.read(r,r.readVarint()+r.pos)):6===t&&e.ways.push(n.way.read(r,r.readVarint()+r.pos))},n.write=function(t,e){if(t.version&&e.writeVarintField(1,t.version),t.name&&e.writeStringField(2,t.name),t.date&&e.writeStringField(3,t.date),t.id&&e.writeStringField(4,t.id),t.nodes)for(var r=0;r<t.nodes.length;r++)e.writeMessage(5,n.node.write,t.nodes[r]);if(t.ways)for(r=0;r<t.ways.length;r++)e.writeMessage(6,n.way.write,t.ways[r])},n.node={},n.node.read=function(t,e){return t.readFields(n.node._readField,{id:0,lat:0,lon:0},e)},n.node._readField=function(t,e,n){1===t?e.id=n.readVarint():2===t?e.lat=n.readFloat():3===t&&(e.lon=n.readFloat())},n.node.write=function(t,e){t.id&&e.writeVarintField(1,t.id),t.lat&&e.writeFloatField(2,t.lat),t.lon&&e.writeFloatField(3,t.lon)},n.way={},n.way.read=function(t,e){return t.readFields(n.way._readField,{nodes:[]},e)},n.way._readField=function(t,e,n){1===t&&n.readPackedVarint(e.nodes)},n.way.write=function(t,e){t.nodes&&e.writePackedVarint(1,t.nodes)}},399:(t,e,n)=>{var r=n(614),i=n(854).Z;t.exports=function(t){let e=[],n=[],o=(new Date).toISOString();t.forEachElement((t=>{"node"===t.type?e.push(t):"way"===t.type&&n.push(t)}));let s=new r;return i.write({version:1,id:t.id,date:o,name:t.name,nodes:e,ways:n},s),s.finish()}},508:(t,e,n)=>{const r=n(4),i=n(736),o=n(972),s=n(959);t.exports=function(t,e){let n,a,u=i(),l=new o;return r(t+".co.bin",{responseType:"arraybuffer",progress:function(t){}}).then((function(t){return n=new Int32Array(t),console.log("Downloaded nodes: "+n.length/2),function(t){return console.time("add nodes to graph"),new Promise((e=>{s(t,h,(()=>{console.timeEnd("add nodes to graph"),e()}),{step:2})}))}(n)})).then((function(){return r(t+".gr.bin",{responseType:"arraybuffer",progress:function(t){}}).then(c)})).then((()=>({graph:u,points:n,links:a,graphBBox:l})));function h(t,e,n){let r=Math.floor(e/2),i=n[e+1];u.addNode(r,{x:t,y:i}),l.addPoint(t,i)}function c(t){return a=new Int32Array(t),console.time("add edges to graph"),new Promise((t=>{s(a,f,(()=>{console.timeEnd("add edges to graph"),console.log(u.getLinksCount()+" edges; "+u.getNodesCount()+" nodes."),t()}),{step:2})}))}function f(t,e,n){let r=t-1,i=n[e+1]-1;u.addLink(r,i)}}},4:t=>{t.exports=function(t,e){return e||(e={}),new Promise((function(n,r){var i=new XMLHttpRequest;"function"==typeof e.progress&&i.addEventListener("progress",(function(t){t.lengthComputable&&e.progress({loaded:t.loaded,total:t.total,percent:t.loaded/t.total})}),!1),i.addEventListener("load",(function(){if(200===i.status){var o=i.response;"json"===e.responseType&&"string"==typeof o&&(o=JSON.parse(o)),n(o)}else r(`Unexpected status code ${i.status} when calling ${t}`)}),!1),i.addEventListener("error",(function(){r(`Failed to download ${t}`)}),!1),i.addEventListener("abort",(function(){r(`Cancelled download of ${t}`)}),!1),i.open("GET",t),e.responseType&&(i.responseType=e.responseType),i.send(null)}))}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{const t=n(508),e=n(697),r=n(738),i=(n(829),n(901));window.path=i,window.wgl=e,window.loadPositions=t,window.createTree=r})()})();